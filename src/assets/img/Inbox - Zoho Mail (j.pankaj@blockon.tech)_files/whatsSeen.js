define([],function(a){"use strict";function b(){return r.getWhatsNewSeen()}function c(a){r.setWhatsNewSeen(a)}function d(a,b){return!("null"===a||!a)&&a===b}function e(){c(o)}function f(a,b){var c=b.data||{};"NEWUI_SETTINGS_UPDATE"===c.act&&"whatsNewSeen"===c.settingsName&&d(o,c.settingsValue)&&(l.publish(n.WHATSSEEN_HIDE),q.hide())}function g(){l.subscribe(n.WHATSSEEN_CLICK,e),p.addHandler("mail",f)}function h(){l.unsubscribe(n.WHATSEEN_CLICK,e),p.removeHandler("mail",f)}function i(){return!("null"===o||!o)&&!d(o,b())}function j(){s.showFeature&&(g(),i()&&q.show())}function k(){h()}var l=a("$"),m=a("zmail.Components.WhatsSeen"),n={WHATSSEEN_CLICK:"/whatsSeen/click",WHATSSEEN_HIDE:"/whatsSeen/hide"},o=a("zmail").whatsSeen,p=a("zmComponent.notifier"),q=a("zmTopBar.WhatsSeen"),r=a("zmAdHocSettings"),s=a("zmail");return m.init=j,m.getUserWhatsSeenVersion=b,m.setUserWhatsSeenVersion=c,m.destroy=k,m});