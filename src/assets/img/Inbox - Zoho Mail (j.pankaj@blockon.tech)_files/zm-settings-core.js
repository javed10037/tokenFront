"use strict";_defineSettingsModule("Categories",function(a,b){var c="all",d=zmText.get("zm-settings-core","category"),e={title:d.labels.allCategory},f=b("Platform.Components"),g=f.CategoryManager,h=g.create(c,{props:{title:e.title},attributes:{"default":!0}});a.All=h},"MailSuite"),_defineSettingsModule("Categories",function(a,b){var c="general",d=zmText.get("zm-settings-core","category"),e={title:d.labels.generalCategory},f=b("Platform.Components"),g=f.CategoryManager,h=g.create(c,{props:{title:e.title}});a.General=h},"MailSuite"),_defineSettingsModule("Categories",function(a,b){var c="mail",d=zmText.get("zm-settings-core","category"),e={title:d.labels.mailCategory},f=b("Platform.Components"),g=f.CategoryManager,h=g.create(c,{props:{title:e.title}});a.Mail=h},"MailSuite"),_defineSettingsModule("Categories",function(a,b){var c="groups",d=zmText.get("zm-settings-core","category"),e={title:d.labels.groupsCategory},f=b("Platform.Components"),g=f.CategoryManager,h=g.create(c,{props:{title:e.title}});a.General=h},"MailSuite"),_defineSettingsModule("Categories",function(a,b){},"MailSuite"),_defineSettingsModule("Utils",function(a){var b=zmail.urls.accURL,c=function(a){setTimeout(function(){window.open(a)},0)},d={openPersonalInfoPage:function(){c(b+"/u/h#profile/personal","_blank")},openActivityHistoryPage:function(){c(b+"/u/h#sessions/useractivityhistory","_blank")},openActiveSessionsPage:function(){c(b+"/u/h#sessions/useractivesessions","_blank")},openSecurityQuestionPage:function(){c(b+"/u/h#security/security_qa","_blank")},openChangePasswordPage:function(){c(b+"/u/h#security/security_pwd","_blank")}};a.Actions=d},"MailSuite.Settings.Account"),_defineSettingsModule("Cards",function(a,b){var c="account-settings",d="general",e=zmText.get("zm-settings-core","accountSettings"),f={cardTitle:e.card.title},g=b("Platform.Components"),h=g.SettingCardManager,i=h.create(c,{props:{openable:!1,title:f.cardTitle},attributes:{category:d},searchCommand:{on:"goto",callback:function(){var a=this,b=zmail.Settings.SearchCommandIntegrator;b.showAutoFill(a.getDependentCommands())}}});a.Account=i},"MailSuite"),function(a){var b="account-settings",c={PERSONAL_INFO:"personal-info",ACTIVITY_HISTORY:"activity-history",ACTIVE_SESSIONS:"active-sessions",SECURITY_QUESTIONS:"security-questions",CHANGE_PASSWORD:"change-password"},d=zmText.get("zm-settings-core","accountSettings"),e={cardItem:{title:d.cardItems.labels}},f=a("Platform.Components"),g=a("Platform.Entities"),h=a("MailSuite.Settings.Account.Utils"),i=h.Actions,j=f.SettingCardItemManager,k=g.SettingCardItem,l=k.Types,m=function(a,b){b=b||{},j.create(a,b)};m(c.PERSONAL_INFO,{props:{loadFrameworkOnCommandExecution:!1,title:e.cardItem.title.personalInfo},attributes:{type:l.Action,card:b},primaryAction:function(){i.openPersonalInfoPage()}}),m(c.ACTIVITY_HISTORY,{props:{loadFrameworkOnCommandExecution:!1,title:e.cardItem.title.activityHistory},attributes:{type:l.Action,card:b},primaryAction:function(){i.openActivityHistoryPage()}}),m(c.ACTIVE_SESSIONS,{props:{loadFrameworkOnCommandExecution:!1,title:e.cardItem.title.activeSessions},attributes:{type:l.Action,card:b},primaryAction:function(){i.openActiveSessionsPage()}}),m(c.SECURITY_QUESTIONS,{props:{loadFrameworkOnCommandExecution:!1,title:e.cardItem.title.securityQuestions},attributes:{type:l.Action,card:b},primaryAction:function(){i.openSecurityQuestionPage()}}),m(c.CHANGE_PASSWORD,{props:{loadFrameworkOnCommandExecution:!1,title:e.cardItem.title.changePassword},attributes:{type:l.Action,card:b},primaryAction:function(){i.openChangePasswordPage()}})}(zmail.Settings.Modules["import"]),function(a){var b="account-settings",c={PERSONAL_INFO:"personal-info",ACTIVITY_HISTORY:"activity-history",ACTIVE_SESSIONS:"active-sessions",SECURITY_QUESTION:"security-question",CHANGE_PASSWORD:"change-password"},d=zmText.get("zm-settings-core","accountSettings"),e=d.quickNavigatorItems.labels,f=a("Platform.Components"),g=a("MailSuite.Settings.Account.Utils"),h=f.QuickNavigatorSectionManager,i=f.QuickNavigatorItemManager,j=g.Actions;h.create(b,{props:{title:e.sectionTitle},state:{selected:!1}}),i.create(c.PERSONAL_INFO,{props:{title:e.personalInfoTitle},attributes:{section:b},openAction:function(){j.openPersonalInfoPage()}}),i.create(c.ACTIVITY_HISTORY,{props:{title:e.activityHistoryTitle},attributes:{section:b},openAction:function(){j.openActivityHistoryPage()}}),i.create(c.ACTIVE_SESSIONS,{props:{title:e.activeSessionsTitle},attributes:{section:b},openAction:function(){j.openActiveSessionsPage()}}),i.create(c.SECURITY_QUESTION,{props:{title:e.securityQuestionTitle},attributes:{section:b},openAction:function(){j.openSecurityQuestionPage()}}),i.create(c.CHANGE_PASSWORD,{props:{title:e.changePasswordTitle},attributes:{section:b},openAction:function(){j.openChangePasswordPage()}})}(zmail.Settings.Modules["import"]),_defineSettingsModule("Pages",function(a,b){var c="general-settings",d=b("Platform.Components"),e=b("Platform.Entities"),f=zmText.get("zm-settings-core","generalSettings"),g={title:f.page.title},h=d.SettingPageManager,i=e.SettingPage,j=i.Types,k=h.create(c,{props:{title:g.title},attributes:{type:j.Title,category:"general",card:c,pageCSSClass:"general-settings-page",appContainer:!0}});a.General=k},"MailSuite"),_defineSettingsModule("Cards",function(a,b){var c="general-settings",d="general",e="general-settings",f=zmText.get("zm-settings-core","generalSettings"),g={cardTitle:f.card.title,searchCommandTitle:f.card.searchCommandTitle},h=b("Platform.Components"),i=h.SettingCardManager,j=i.create(c,{props:{openable:!0,title:g.cardTitle},state:{hidden:!1},attributes:{category:d},searchCommand:{title:g.searchCommandTitle},openAction:i.CardActions.OpenPageAction(e)});a.General=j},"MailSuite"),_defineSettingsModule("Persister",function(a,b){var c=b("Platform.System.Utils"),d=function(){var a=c.makeDeferred(),d=b("MailSuite.Settings.General"),e=d.StartupAction,f=d.StartupApp,g=d.MailAppStartup,h={},i=e.Constants.MODES;h[i.NEW_SESSION]="none",h[i.RESTORE_SESSION]="restore",h[i.NEW_SESSION_WITH_TARGET]="app";var j=e.Setting.get(),k=f.Setting.get(),l=h[j];if(j===i.NEW_SESSION_WITH_TARGET&&(l=l+"-"+k,k===f.Constants.MODES.MAIL)){var m=g.Setting.get();l=l+"-"+m,zmail.mailOpt.isFol="inbox"===m?1:0,zmAjq.XHR({u:zmail.conPath+"/userSettings.do",p:{mode:"viewVO",settings:JSON.stringify({defaultFolder:zmail.mailOpt.isFol})},t:"post",fn:function(b){a.resolve({success:!0,response:b})},efn:function(b){a.reject({success:!1,response:b})}})}return zmAdHocSettings.setLPageType(l),a.resolve(),a.promise()};a.save=d},"MailSuite.Settings.StartupSetting"),_defineSettingsModule("StartupAction",function(a,b){var c=b("Platform.Components"),d=c.SettingManager,e=b("Platform.System.Utils"),f=b("MailSuite.Settings.StartupSetting.Persister"),g="startup-action",h="restore-session",i="new-session-with-target",j=function(){return[i,h]},k=function(){return{NEW_SESSION_WITH_TARGET:i,RESTORE_SESSION:h}},l={MODES:k()},m=d.create(g,{props:{defaultValue:i,options:j()},type:"option",category:"general",persister:{errors:function(a){return"Error occurred (E"+a+")"},fetch:function(){var a=e.makeDeferred(),b=zmAdHocSettings.getLPageType(),c="app-mail-"+("1"===String(zmail.mailOpt.isFol)?"inbox":"unread");switch(b=(b||"").split("-"),b[0]){case"restore":"restore"!==b[0]||_zm._isPrivilegedUser()?b=h:(b=i,zmAdHocSettings.setLPageType(c));break;case"app":b=i;break;default:b=i,zmAdHocSettings.setLPageType(c)}return a.resolve(b),a.promise()},save:function(){var a=e.makeDeferred();return f.save(),a.resolve(),a.promise()}}});a.Setting=m,a.Constants=l},"MailSuite.Settings.General"),_defineSettingsModule("mailTo",function(a,b){var c,d=b("Platform.Components"),e=d.SettingManager,f="mail-to";zmail.isInternalOrgUser&&(c=e.create(f,{props:{defaultValue:!1},attributes:{category:"general"}}),a.Setting=c)},"MailSuite.Settings.General"),_defineSettingsModule("StartupApp",function(a,b){var c=b("Platform.Components"),d=b("Platform.System.Utils"),e=c.SettingManager,f=b("MailSuite.Settings.StartupSetting.Persister"),g="startup-app",h="mail",i="calendar",j="tasks",k="notes",l="contacts",m="bookmarks",n="streams",o=function(){return[h,i,j,k,n,l,m]},p=function(){return{MAIL:h,CALENDAR:i,TASKS:j,NOTES:k,CONTACTS:l,BOOKMARKS:m,STREAMS:n}},q=function(){var a={},b=p();return Object.keys(b).forEach(function(c){a[b[c]]=c}),a},r={MODES:p(),REVERSE_MODES:q(),ORDER:o()},s=e.create(g,{props:{defaultValue:h,options:o()},type:"option",category:"general",persister:{errors:function(a){return"Error occurred (E"+a+")"},fetch:function(){var a=d.makeDeferred(),b=zmAdHocSettings.getLPageType();return b=(b||"").split("-"),"app"===b[0]&&b[1]&&r.REVERSE_MODES[b[1]]?a.resolve(b[1]):a.resolve(h),a.promise()},save:function(){var a=d.makeDeferred();return f.save(),a.resolve(),a.promise()}}});a.Setting=s,a.Constants=r},"MailSuite.Settings.General"),_defineSettingsModule("MailAppStartup",function(a,b){var c=b("Platform.Components"),d=c.SettingManager,e=b("Platform.System.Utils"),f=b("MailSuite.Settings.StartupSetting.Persister"),g="mail-app-startup",h=d.create(g,{props:{defaultValue:"unread"},type:"default",category:"general",persister:{errors:function(a){return"Error occurred (E"+a+")"},fetch:function(){var a=e.makeDeferred(),b=zmAdHocSettings.getLPageType(),c="1"===String(zmail.mailOpt.isFol)?"inbox":"unread";return b=(b||"").split("-"),"app"===b[0]&&"mail"===b[1]?(b.shift(),b.shift(),b=b.join("-"),b!==c&&(b=c,zmAdHocSettings.setLPageType("app-mail-"+c))):b=c,a.resolve(b),a.promise()},save:function(){var a=e.makeDeferred();return f.save(),a.resolve(),a.promise()}}});a.Setting=h},"MailSuite.Settings.General"),_defineSettingsModule("UIFontFamily",function(a,b){var c=b("Platform.Components"),d=b("Platform.System.Utils"),e=c.SettingManager,f="lato",g="pt-sans",h="arial",i="ui-font-family",j=function(){return["lato","pt-sans","arial"]},k=function(){return{LATO:f,PT_SANS:g,ARIAL:h}},l={FONTS:k(),ADHOC_VALUE_MAP:{Lato:f,"PT Sans":g,Arial:h},ADHOC_VALUE_REVERSE_MAP:{}};l.ADHOC_VALUE_REVERSE_MAP[f]="Lato",l.ADHOC_VALUE_REVERSE_MAP[g]="PT Sans",l.ADHOC_VALUE_REVERSE_MAP[h]="Arial";var m=e.create(i,{props:{defaultValue:f,options:j()},persister:{errors:function(a){return"Error occurred ( E-"+a+")"},fetch:function(){var a=zmAdHocSettings.getFont(),b=d.makeDeferred();return b.resolve(l.ADHOC_VALUE_MAP[a]),b.promise()},save:function(a){var b=d.makeDeferred();return zmAdHocSettings.setFont(l.ADHOC_VALUE_REVERSE_MAP[a]),b.resolve(),b.promise()}},type:"option",category:"general"});a.Setting=m,a.Constants=l},"MailSuite.Settings.General"),_defineSettingsModule("UIFontSize",function(a,b){var c=b("Platform.Components"),d=c.SettingManager,e="ui-font-size",f=d.create(e,{props:{defaultValue:10},type:"default",category:"general"});a.Setting=f},"MailSuite.Settings.General"),_defineSettingsModule("UITheme",function(a,b){var c=b("Platform.Components"),d=b("Platform.System.Utils"),e=c.SettingManager,f="ui-theme",g="blue-light",h="blue-dark",i="green-light",j="green-dark",k="yellow-light",l="yellow-dark",m="red-light",n="red-dark",o="black-light",p=function(){return{COBALT_BLUE_LIGHT:g,COBALT_BLUE_DARK:h,FERN_GREEN_LIGHT:i,FERN_GREEN_DARK:j,TANGERINE_YELLOW_LIGHT:k,TANGERINE_YELLOW_DARK:l,CARDINAL_RED_LIGHT:m,CARDINAL_RED_DARK:n,OBSIDIAN_BLACK_LIGHT:o}},q=function(){var a=p(),b=Object.keys(a);return b.map(function(b){return a[b]})},r={THEMES:p(),ADHOC_THEME_MAP:{theme1:h,theme2:j,theme3:i,theme4:g,theme5:n,theme6:m,theme7:l,theme8:k,theme9:o}},s=e.create(f,{props:{defaultValue:r.THEMES.COBALT_BLUE_DARK,options:q()},persister:{errors:function(a){return"Error occurred ( E-"+a+" )"},fetch:function(){var a=zmAdHocSettings.getTheme(),b=d.makeDeferred();return b.resolve(r.ADHOC_THEME_MAP[a]),b.promise()},save:function(a){var b=d.makeDeferred();return a=Object.keys(r.ADHOC_THEME_MAP).filter(function(b){return r.ADHOC_THEME_MAP[b]===a}),a=a[0],zmAdHocSettings.setTheme(a),b.resolve(),b.promise()}},type:"option",category:"general"});a.Setting=s,a.Constants=r},"MailSuite.Settings.General"),_defineSettingsModule("UserLang",function(a,b){var c=b("Platform.Components"),d=b("Platform.System.Utils"),e=c.SettingManager,f="ui-user-lang",g={SUPPORTED_LANGUAGES:_.map(zmText.languageConfig,function(a){return a.code})},h=function(a){var b=g.SUPPORTED_LANGUAGES.indexOf(a);return b>-1},i=e.create(f,{props:{defaultValue:"en"},persister:{errors:function(a){return"Error occurred ( E-"+a+")"},fetch:function(){var a=d.makeDeferred(),b=zmail.user.lang;return a.resolve(b),a.promise()},save:function(a){var b=d.makeDeferred(),c={},e={};return h(a)?(c.mode="userProfileInfoVO",a&&(e.lang=a),c.settings=JSON.stringify({lang:a}),zmAjq.XHR({u:"/zm/userSettings.do",t:"POST",fn:function(a){zmail.user.lang=a.lang,b.resolve(a.lang)},p:c,csr:"s",ep:e})):b.reject(400),b.promise()}},category:"general"});i.initialize(),a.Setting=i,a.Constants=g},"MailSuite.Settings.General"),_defineSettingsModule("MailSoundNotifier",function(a,b){var c=b("Platform.Components"),d=b("Platform.System.Utils"),e=c.SettingManager,f="mail-sound-notifier",g=function(){return zmComponent.soundNotifier._allowedValues},h=e.create(f,{props:{defaultValue:0,options:g()},persister:{errors:function(a){return"Error occurred ( E-"+a+" )"},fetch:function(){var a=zmAdHocSettings.getMailSoundNotifier(),b=d.makeDeferred();return b.resolve(Number(a)),b.promise()},save:function(a){var b=d.makeDeferred();return a=String(a),zmAdHocSettings.setMailSoundNotifier(a),b.resolve(),b.promise()}},type:"option",category:"general"}),i=function(){h.initialize(),zmAdHocSettings.subscribeMailSoundNotifierChange(function(a,b){h.set(Number(b.value))})};i(),a.Setting=h},"MailSuite.Settings.General"),_defineSettingsModule("UserCountry",function(a,b){var c=b("Platform.Components"),d=b("Platform.System.Utils"),e=c.SettingManager,f="ui-user-country",g={},h=e.create(f,{props:{defaultValue:"US"},persister:{errors:function(a){return"Error occurred ( E-"+a+")"},fetch:function(){var a=d.makeDeferred(),b=zmail.user.countrycode;return a.resolve(b),a.promise()},save:function(a){var b=d.makeDeferred(),c={},e={};return c.mode="userProfileInfoVO",a&&(e.country=a),c.settings=JSON.stringify({country:a}),zmAjq.XHR({u:"/zm/userSettings.do",t:"POST",fn:function(a){zmail.user.countrycode=a.country,b.resolve(a.country)},p:c,csr:"s",ep:e}),b.promise()}},category:"general"});h.initialize(),a.Setting=h,a.Constants=g},"MailSuite.Settings.General"),_defineSettingsModule("ViewState",function(a,b){var c=b("Platform.Components"),d=b("Platform.System.Utils"),e=c.SettingManager,f="conversation-view",g="off",h="acrossFolder",i="withinFolder",j=function(){return[0,1,2]},k=function(){return[1,2]},l=function(){return{0:g,1:i,2:h}},m={ALLOWED_VALUES:j(),MODE_MAP:l(),ENABLED_MODES:k()},n={errors:function(a){return"Error occured ! Error Code = "+a},fetch:function(a){var b=d.makeDeferred();return d.debugLog("fetching mail-setting "+f,a),b.resolve(zmail.folviewThread),b.promise()},save:function(a,b){var c=d.makeDeferred();return d.debugLog("saving "+f,a,b),zmList.setListingType(a).done(function(b){1===b[0]&&"success"===_zm.getProperty(b[1],"result")?c.resolve(a):c.reject()}),c.promise()}},o=e.create(f,{props:{defaultValue:zmail.userOptions.composeView,options:j()},persister:n,type:"option",category:"conversation"});o.initialize(),a.Setting=o,a.Constants=m},"MailSuite.Settings.Conversation"),_defineSettingsModule("SortOrder",function(a,b){var c=b("Platform.Components"),d=b("Platform.System.Utils"),e=c.SettingManager,f="conversation-view",g="latestOnTop",h="oldestOnTop",i=function(){return[0,1]},j=function(){return{0:g,1:h}},k={ALLOWED_VALUES:i(),MODE_MAP:j()},l={errors:function(a){return"Error occured ! Error Code = "+a},fetch:function(a){var b=d.makeDeferred();return d.debugLog("fetching mail-setting "+f,a),b.resolve(zmail.convSortOrder),b.promise()},save:function(a,b){var c=d.makeDeferred();return d.debugLog("saving "+f,a,b),zmList.setConversationOrder(a).done(function(){c.resolve(a)}),c.promise()}},m=e.create(f,{props:{defaultValue:zmail.convSortOrder,options:i()},persister:l,type:"option",category:"conversation"});m.initialize(),a.Setting=m,a.Constants=k},"MailSuite.Settings.Conversation"),function(a){var b,c,d="general-settings",e={FONT_FAMILY:"font-family",THEME:"ui-theme",STARTUP_ACTION:"startup-action",DISPLAY_LANGUAGE:"display-language",SOUND_NOTIFIER:"sound-alerts",MAILTO_HANDLER:"mailto-handler"},f=zmText.get("zm-settings-core","generalSettings"),g=f.cardItems,h=a("Platform.Components"),i=a("Platform.Entities"),j=a("MailSuite.Settings.General"),k=j.UIFontFamily,l=j.UITheme,m=j.StartupAction,n=j.StartupApp,o=j.UserLang,p=j.MailSoundNotifier,q=j.mailTo,r=h.SettingCardItemManager,s=i.SettingCardItem,t=s.Types,u=k.Setting,v=l.Setting,w=o.Setting,x=p.Setting,y=m.Setting,z=n.Setting,A=q.Setting,B=k.Constants.FONTS,C=l.Constants.THEMES,D=m.Constants.MODES,E=function(a,b){for(var c in b)if(b[c]===a)return c},F=function(a){a=a||u.get();var b=E(a,B);return g.fontFamily.fontNames[b]},G=r.create(e.FONT_FAMILY,{props:{title:g.fontFamily.cardItem.title,value:F()},attributes:{type:t.LabelValue,card:d},searchCommand:{title:g.fontFamily.searchCommand.title},primaryAction:function(){var a=r.CardItemActions.OpenPageAction("general-settings",{showSection:"ui-font"});a()}}),H=function(a){a=a||v.get();var b=E(a,C);return g.uiTheme.themeNames[b]},I=r.create(e.THEME,{props:{title:g.uiTheme.cardItem.title,value:H()},attributes:{type:t.LabelValue,card:d},primaryAction:function(){var a=r.CardItemActions.OpenPageAction("general-settings",{showSection:"ui-theme"});a()}}),J=function(a){a=a||w.get();var b=_zm.getProperty(zmText.languageConfig,a);return b?b.displayText:"English"},K=r.create(e.DISPLAY_LANGUAGE,{props:{title:g.displayLanguage.cardItem.title,value:J()},attributes:{type:t.LabelValue,card:d},primaryAction:function(){var a=r.CardItemActions.OpenPageAction("general-settings",{showSection:"display-language"});a()}}),L=function(a){return a=a||x.get(),a?zmComponent.soundNotifier.soundCodesMap[a]:g.soundNotifier.options.none},M=r.create(e.SOUND_NOTIFIER,{props:{title:g.soundNotifier.cardItem.title,value:L()},attributes:{type:t.LabelValue,card:d},primaryAction:function(){var a=r.CardItemActions.OpenPageAction("general-settings",{showSection:"sound-alerts"});a()}}),N=function(a){a=a||y.get();var b=E(a,D),c=g.startupAction.modes[b];return"new-session-with-target"===a&&(c=zmText.applyArgs(c,{appName:g.startupAction.appName[z.get()]})),c},O=r.create(e.STARTUP_ACTION,{props:{title:g.startupAction.cardItem.title,value:N()},attributes:{type:t.LabelValue,card:d},primaryAction:function(){var a=r.CardItemActions.OpenPageAction("general-settings",{showSection:"startup-action"});a()}});zmail.isInternalOrgUser&&navigator.registerProtocolHandler&&(c=function(a){return""},b=r.create(e.MAILTO_HANDLER,{props:{title:g.MailToHandler.cardItem.title,value:c()},attributes:{type:t.LabelValue,card:d},primaryAction:function(){var a=r.CardItemActions.OpenPageAction("general-settings",{showSection:"mailto-handler"});a()}}));var P=function(){u.on("props.change",function(a){a=a||{},a.changed.hasOwnProperty("value")&&G.setProp({value:F(a.changed.value)})}),v.on("props.change",function(a){a=a||{},a.changed.hasOwnProperty("value")&&I.setProp({value:H(a.changed.value)})}),y.on("props.change",function(a){a=a||{},a.changed.hasOwnProperty("value")&&O.setProp({value:N()})}),z.on("props.change",function(a){a=a||{},a.changed.hasOwnProperty("value")&&O.setProp({value:N()})}),zmail.Settings.Events.on("initialized",function(){O.setProp({value:N()})}),w.on("props.change",function(a){a=a||{},a.changed.hasOwnProperty("value")&&K.setProp({value:J(a.changed.value)})}),x.on("props.change",function(a){a=a||{},a.changed.hasOwnProperty("value")&&M.setProp({value:L(a.changed.value)})}),zmail.isInternalOrgUser&&navigator.registerProtocolHandler&&A.on("props.change",function(a){a=a||{},a.changed.hasOwnProperty("value")&&b.setProp({value:c("Disable")})})};P()}(zmail.Settings.Modules["import"]),function(a){var b="general-settings",c={ON_STARTUP:"startup-action",FONT:"ui-display-font",THEME:"ui-theme"},d=zmText.get("zm-settings-core","generalSettings"),e=d.pageItems,f=a("Platform.Components"),g=a("Platform.Entities"),h=g.SettingPageSection,i=h.Types,j=f.SettingPageSectionManager;j.create(c.ON_STARTUP,{props:{title:e.startupAction.sectionTitle},attributes:{page:b,type:i.Title}}),j.create(c.FONT,{props:{title:e.font.sectionTitle},attributes:{page:b,type:i.Title}}),j.create(c.THEME,{props:{title:e.theme.sectionTitle},attributes:{page:b,type:i.Title}})}(zmail.Settings.Modules["import"]),_defineSettingsModule("GeneralSettings",function(a,b){var c,d=b("Platform.Components"),e=d.SettingAppManager,f=b("Platform.System.Utils"),g="general-settings",h="general-settings",i="zm-settings-app-generalsettings",j="MailSuite.Apps.GeneralSettings.AppCore",k=function(){return zmAppLoader.load(i)},l=function(){return b(j)},m=function(){var a=f.makeDeferred();return k().done(function(){l().initialize({process:a})}).fail(function(){f.debugLog("Module load failed !!!"),a.reject()}),a.promise()},n=function(){var a=f.makeDeferred();return k().done(function(){l().uninitialize({process:a})}),a.promise()},o=function(){var a=l();return a.getSettingsAppView()},p=function(){var a=l(),b=Array.prototype.slice.call(arguments);return a?a.handleContainerEvent.apply(this,b):null},q=function(){c=e.create(g,{attributes:{page:h,isReactApp:!0},initialize:m,uninitialize:n,getView:o,handleContainerEvent:p})},r=function(){q(),a.App=c};r()},"MailSuite.Apps"),function(a){var b="general-settings",c={FONT_FAMILY:"font-family",THEMES:"ui-theme",STARTUP_ACTION:"startup-action"},d=zmText.get("zm-settings-core","generalSettings"),e=d.quickNavigatorItems,f="general-settings",g={ON_STARTUP:"startup-action",FONT:"ui-font",THEME:"ui-theme"},h=a("Platform.Components"),i=h.QuickNavigatorSectionManager,j=h.QuickNavigatorItemManager;i.create(b,{props:{title:e.sectionTitle},state:{selected:!1}}),j.create(c.FONT_FAMILY,{props:{title:e.fontFamilyTitle,linkedPage:f,linkedPageSection:g.FONT,selectable:!0},attributes:{section:b}}),j.create(c.THEMES,{props:{title:e.uiThemeTitle,linkedPage:f,linkedPageSection:g.THEME,selectable:!0},attributes:{section:b}})}(zmail.Settings.Modules["import"]),_defineSettingsModule("keyboardshortcuts",function(a,b){var c,d,e,f,g=b("Platform.Components"),h=b("Platform.Entities"),i=b("Platform.System.Utils"),j=g.SettingManager,k=g.SettingCardManager,l=g.SettingCardItemManager,m=g.SettingPageManager,n=g.SettingAppManager,o=h.SettingPage,p=h.SettingCardItem,q=o.Types,r=p.Types,s=zmText.get("zm-settings-core","keyboardShortcuts"),t=s,u={CARD_ID:"keyboardshortcuts",PAGE_ID:"keyboardshortcuts",APP_ID:"sa-keyboardshortcuts",CATEGORY_ID:"general",APPCORE_MODULE_ID:"zm-settings-app-keyboardshortcuts",SHORTCUT_TOGGLESTATUS_SETTING_ID:"keyboardshorctus-toggle",ROLLING_SHORTCUT_CARDITEM:"keyboardshortctus-rollingtext"},v=function(a){d.getProp("toggleSwitchActive")!==a&&(d.setProp({toggleSwitchActive:a}),zmail.mailOpt.isKey=a?1:0)},w=function(){var a=zmshCut["default"].length,b=_.random(a-1),c=zmshCut["default"][b],d=zmshCut.getKeyString("default",c.uid),e=zmshCut.getReadableText(d).join("$$");return{title:c.displayName,displayText:e}},x={errors:function(a){return"Error occured ! Error Code = "+a},fetch:function(a){var b=i.makeDeferred();return i.debugLog("fetching mail-setting "+u.SHORTCUT_TOGGLESTATUS_SETTING_ID,a),b.resolve(zmail.mailOpt.isKey),b.promise()},save:function(a,b){var c=i.makeDeferred();i.debugLog("saving mail-setting "+u.SHORTCUT_TOGGLESTATUS_SETTING_ID,a,b);var d={},e={};return e.status=a?1:0,d.mode="enable",d.status=a?"enable":"disable",zmAjq.XHR({u:"/zm/zmShortcuts.do",t:"POST",fn:function(a,b){c.resolve(b.status)},p:d,csr:"s",ep:e}),c.promise()}},y=function(){k.create(u.CARD_ID,{props:{title:t.title,openable:!0},attributes:{category:u.CATEGORY_ID},openAction:k.CardActions.OpenPageAction(u.PAGE_ID)})},z=function(){d=m.create(u.PAGE_ID,{props:{title:t.title,showTitle:!0,toggleSwitchOnText:t.toggleSwitchText.ON,toggleSwitchOffText:t.toggleSwitchText.OFF,toggleSwitchActive:zmail.mailOpt.isKey},attributes:{type:q.TitleToggleSwitch,card:u.PAGE_ID,category:"general",appContainer:!0,pageCSSClass:"kb-shortcuts-setting-app"}})},A=function(){return zmAppLoader.load(u.APPCORE_MODULE_ID)},B=function(){var a=i.makeDeferred();return A().done(function(){zmail.Settings.Apps.keyboardshortcuts.initializeData(),a.resolve()}).fail(function(){a.reject()}),a.promise()},C=function(){var a=i.makeDeferred();return A().done(function(){zmail.Settings.Apps.keyboardshortcuts.clearTrace(),a.resolve()}),a.promise()},D=function(){var a=null;return a=zmail.Settings.Apps.keyboardshortcuts.getView()},E=function(){n.create(u.APP_ID,{attributes:{page:u.PAGE_ID,isReactApp:!0},initialize:B,uninitialize:C,getView:D,handleContainerEvent:function(a,c){var d=b("Apps.keyboardshortcuts");d&&d.handleContainerEvent(a,c)}})},F=function(){var a=w();f=l.create(u.ROLLING_SHORTCUT_CARDITEM,{props:{addToSearch:!1,title:a.title,value:a.displayText},attributes:{type:r.RollingText,card:u.CARD_ID},primaryAction:l.CardItemActions.OpenPageAction(u.PAGE_ID)})},G=function(){var a=function(){var a=j.get(u.SHORTCUT_TOGGLESTATUS_SETTING_ID),b=a.get()!==!0;a.set(b)};c=j.create(u.SHORTCUT_TOGGLESTATUS_SETTING_ID,{props:{defaultValue:!1},category:u.CATEGORY_ID,type:"boolean",persister:x,cardItem:{props:{title:t.title},attributes:{type:r.LabelAction,card:u.CARD_ID},transformer:function(a,b){return b=b||{},"props"===a&&b.hasOwnProperty("value")&&(b.value=b.value===!0?t.enabled:t.disabled),b},primaryAction:l.CardItemActions.OpenPageAction(u.PAGE_ID),secondaryAction:a,searchCommand:{title:t.searchCommandTitle,callback:function(){a()}}}}),c.initialize()},H=function(){clearTimeout(e)},I=function(){H(),e=setInterval(function(){var a=w();a.title&&a.displayText&&(f.setProp({title:a.title}),f.setProp({value:a.displayText}))},5e3)},J=function(){c.props.on("change",function(a){d.setProp({toggleSwitchActive:a.changed.value})}),d.props.on("change:toggleSwitchActive",function(a){var b=a.changed.toggleSwitchActive;c.set(b)}),$.subscribe("/zm-settings/mailsuite-app/opened",function(){I()}),$.subscribe("/zm-settings/mailsuite-app/closed",function(){H()})},K=function(){y(),G(),F(),z(),E(),J(),a.pageRef=d,a.toggleActiveStatus=v};K()},"Apps"),_defineSettingsModule("Pages",function(a,b){var c="mail-view-options",d=b("Platform.Components"),e=b("Platform.Entities"),f=zmText.get("zm-settings-core","mailViewOptions"),g=f.page,h=d.SettingPageManager,i=e.SettingPage,j=i.Types,k=h.create(c,{props:{title:g.title},attributes:{type:j.Title,card:c,category:"mail",pageCSSClass:"mail-view-options-page",appContainer:!0}});a.MailViewOptions=k},"MailSuite"),_defineSettingsModule("Pages",function(a,b){var c="event-mail-action",d=b("Platform.Components"),e=b("Platform.Entities"),f=zmText.get("zm-settings-core","eventMailAction"),g=f.page,h=d.SettingPageManager,i=e.SettingPage,j=i.Types,k=h.create(c,{props:{title:g.title},attributes:{type:j.Title,pageCSSClass:"event-mail-action-page",appContainer:!0}});a.EventMailAction=k},"MailSuite"),_defineSettingsModule("Cards",function(a,b){var c="mail-view-options",d="mail",e="mail-view-options",f=zmText.get("zm-settings-core","mailViewOptions"),g=f.card,h=b("Platform.Components"),i=h.SettingCardManager,j=i.create(c,{props:{openable:!0,title:g.title},state:{hidden:!1},attributes:{category:d},openAction:i.CardActions.OpenPageAction(e)});a.MailViewOptions=j},"MailSuite"),_defineSettingsModule("Persister",function(a,b){var c=b("Platform.System.Utils"),d=b("Platform.Components"),e=b("MailSuite.Settings.Mail"),f=d.SettingManager,g={SettingID:{MailReadingPane:"mail-reading-pane",ReadReceipt:"mail-read-receipt",LoadExternalImage:"load-external-image",TimeFormat:"display-time-format",FolderListSortMode:"folder-list-sort-mode",TagListSortMode:"tag-list-sort-mode",summarySubjectMode:"subject-and-summary"}},h=function(a){a=a||{};var b=c.makeDeferred();return zmAjq.XHR({u:a.url,p:a.data,t:"post",fn:function(a){b.resolve({success:!0,response:a})},efn:function(a){b.reject({success:!1,response:a})}}),b.promise()},i=function(){return zmail.conPath+"/userSettings.do"},j=function(a){var b=null,c=e.ReadingPane.Constants.MODES;switch(a){case c.PREVIEW:b=0;break;case c.TAB:b=2;break;case c.WINDOW:b=1}return b},k=function(a){var b=null,c=e.ReadReceipt.Constants.MODES;switch(a){case c.ALWAYS:b=0;break;case c.ASK_USER:b=1;break;case c.NEVER:b=2}return b},l=function(a){var b=null,c=e.LoadExternalImage.Constants.MODES;switch(a){case c.ALWAYS:b=0;break;case c.CONTACTS:b=1;break;case c.ASK_USER:b=2}return b},m=function(a){var b=null,c=e.DisplayTimeFormat.Constants.MODES;switch(a){case c.TWELVE_HOUR:b=!1;break;case c.TWENTY_FOUR_HOUR:b=!0}return b},n=function(a){var b=null,c=e.FolderListSortMode.Constants.MODES;switch(a){case c.ALPHABETICAL:b=1;break;case c.USER_PREFERENCE:b=0}return b},o=function(a){var b=null,c=e.TagListSortMode.Constants.MODES;switch(a){case c.ALPHABETICAL:b=1;break;case c.USER_PREFERENCE:b=0}return b},p=function(a){var b=null,c=e.SubjectAndSummary.Constants.MODES;switch(a){case c.SUBSUM:b=1;break;case c.SUBONLY:b=0}return b},q=function(a){var b=a.getAttribute("id"),c=g.SettingID,d=a.get(),e={mode:"viewVO",settings:{}};switch(b){case c.MailReadingPane:e.settings.mailView=j(d);break;case c.ReadReceipt:e.settings.askReceiptOnRead=k(d);break;case c.LoadExternalImage:e.settings.loadExternalImages=l(d);break;case c.TimeFormat:e.settings.isRailTime=m(d);break;case c.FolderListSortMode:e.settings.sortFolders=n(d);break;case c.TagListSortMode:e.settings.sortTags=o(d);break;case c.summarySubjectMode:e.settings.showSummary=p(d)}return e.settings=JSON.stringify(e.settings),e},r=function(a){var b=c.makeDeferred();if(a=a||this,"string"==typeof a&&(a=f.get(a)),!a)return b.reject(),b.promise();var d=i(a),e=q(a);return h({url:d,data:e}).done(function(a){b.resolve(a.response)}).fail(function(a){b.reject(a.response)}),b.promise()};a.save=r},"MailSuite.Settings.Mail"),_defineSettingsModule("ReadReceipt",function(a,b){var c=b("Platform.Components"),d=b("MailSuite.Settings.Mail.Persister"),e=b("Platform.System.Utils"),f=c.SettingManager,g="mail-read-receipt",h="always",i="never",j="ask",k=function(){return[h,i,j]},l=function(){return{ALWAYS:h,NEVER:i,ASK_USER:j}},m={MODES:l(),VALUE_MAP:{always:0,never:2,ask:1},VALUE_REVERSE_MAP:{0:h,1:j,2:i}},n=f.create(g,{props:{defaultValue:j,options:k()},persister:{errors:function(a){return"Error occurred ( E"+a+")"},fetch:function(){var a=e.makeDeferred(),b=m.VALUE_REVERSE_MAP[zmail.mailOpt.askReceipt];return a.resolve(b),a.promise()},save:function(){var a=e.makeDeferred();return d.save(g).done(a.resolve).fail(a.fail),a.resolve(),a.promise()}},type:"option",category:"mail"}),o=function(){n.on("props.change",function(a){if(a=a||{},a.changed.hasOwnProperty("value")){var b=m.VALUE_MAP[a.changed.value];zmail.mailOpt=zmail.mailOpt||{},zmail.mailOpt.askReceipt=m.VALUE_MAP[a.changed.value],$.publish("SETTINGS_ASK_RECEIPT_ON_READ",b)}})};o(),a.Setting=n,a.Constants=m},"MailSuite.Settings.Mail"),_defineSettingsModule("ReadingPane",function(a,b){var c=b("Platform.Components"),d=b("Platform.System.Utils"),e=b("MailSuite.Settings.Mail.Persister"),f=c.SettingManager,g="mail-reading-pane",h="preview",i="tab",j="window",k=function(){return[h,i,j]},l=function(){return{PREVIEW:h,TAB:i,WINDOW:j}},m={MODES:l(),VALUE_MAP:{0:h,1:j,2:i},VALUE_REVERSE_MAP:{preview:0,window:1,tab:2}},n=f.create(g,{props:{defaultValue:h,options:k()},persister:{errors:function(a){return"Error occurred ( E"+a+")"},fetch:function(){var a=d.makeDeferred(),b=m.VALUE_MAP[zmail.userOptions.mailView];return a.resolve(b),a.promise()},save:function(){var a=d.makeDeferred();return e.save(g).done(a.resolve).fail(a.fail),a.resolve(),a.promise()}},type:"option",category:"mail"}),o=function(){n.on("props.change",function(a){if(a=a||{},a.changed.hasOwnProperty("value")){var b=m.VALUE_REVERSE_MAP[a.changed.value];zmail.userOptions=zmail.userOptions||{},
zmail.userOptions.mailView=b,$.publish("SETTINGS_MAIL_VIEW",b)}})};o(),a.Setting=n,a.Constants=m},"MailSuite.Settings.Mail"),_defineSettingsModule("SubjectAndSummary",function(a,b){var c=b("Platform.Components"),d=b("MailSuite.Settings.Mail.Persister"),e=b("Platform.System.Utils"),f=c.SettingManager,g="subject-and-summary",h="Subject and Summary",i="Subject Only",j=function(){return[h,i]},k=function(){return{SUBSUM:h,SUBONLY:i}},l={MODES:k(),VALUE_MAP:{0:h,1:i},VALUE_REVERSE_MAP:{"Subject and Summary":0,"Subject Only":1}},m=f.create(g,{props:{defaultValue:h,options:j()},persister:{errors:function(a){return"Error Occured + Erroe Code = "+a},fetch:function(a){var b=e.makeDeferred();e.debugLog("fetching Mail Setting"+g,a);var c,d=zmail.mailOpt.isshowSummary;c=d?0:1;var f=l.VALUE_MAP[c];return b.resolve(f),b.promise()},save:function(){var a=e.makeDeferred();return d.save(g).done(a.resolve).fail(a.fail),a.promise()}}}),n=function(){m.on("props.change",function(a){if(a=a||{},a.changed.hasOwnProperty("value")){var b=l.VALUE_REVERSE_MAP[a.changed.value],c=!1;0===b&&(c=!0),zmail.mailOpt.isshowSummary=c}})};n(),a.Setting=m,a.Constants=l},"MailSuite.Settings.Mail"),_defineSettingsModule("LoadExternalImage",function(a,b){var c=b("Platform.Components"),d=b("MailSuite.Settings.Mail.Persister"),e=b("Platform.System.Utils"),f=c.SettingManager,g="load-external-image",h="always",i="contacts",j="ask",k=function(){return[h,i,j]},l=function(){return{ALWAYS:h,CONTACTS:i,ASK_USER:j}},m={MODES:l(),VALUE_MAP:{0:h,1:i,2:j},VALUE_REVERSE_MAP:{always:0,contacts:1,ask:2}},n=f.create(g,{props:{defaultValue:j,options:k()},persister:{errors:function(a){return"Error occurred ( E"+a+")"},fetch:function(){var a=e.makeDeferred(),b=m.VALUE_MAP[zmail.userOptions.loadExternalImages];return a.resolve(b),a.promise()},save:function(){var a=e.makeDeferred();return d.save(g).done(a.resolve).fail(a.fail),a.resolve(),a.promise()}},type:"option",category:"mail"}),o=function(){n.on("props.change",function(a){if(a=a||{},a.changed.hasOwnProperty("value")){var b=m.VALUE_REVERSE_MAP[a.changed.value];zmail.userOptions=zmail.userOptions||{},zmail.userOptions.loadExternalImages=b,$.publish("SETTINGS_LOAD_EXTERNAL_IMAGES",b)}})};o(),a.Setting=n,a.Constants=m},"MailSuite.Settings.Mail"),_defineSettingsModule("DisplayTimeFormat",function(a,b){var c=b("Platform.Components"),d=b("MailSuite.Settings.Mail.Persister"),e=b("Platform.System.Utils"),f=c.SettingManager,g="display-time-format",h="12",i="24",j=function(){return[h,i]},k=function(){return{TWELVE_HOUR:h,TWENTY_FOUR_HOUR:i}},l={MODES:k(),VALUE_MAP:{"false":h,"true":i},VALUE_REVERSE_MAP:{12:!1,24:!0}},m=f.create(g,{props:{defaultValue:h,options:j()},persister:{errors:function(a){return"Error occurred ( E"+a+")"},fetch:function(){var a=e.makeDeferred(),b=l.VALUE_MAP[zmail.userOptions.isRailTime];return a.resolve(b),a.promise()},save:function(){var a=e.makeDeferred();return d.save(g).done(a.resolve).fail(a.fail),a.resolve(),a.promise()}},type:"option",category:"mail"}),n=function(){m.on("props.change",function(a){if(a=a||{},a.changed.hasOwnProperty("value")){var b=l.VALUE_REVERSE_MAP[a.changed.value];zmail.userOptions=zmail.userOptions||{},zmail.userOptions.isRailTime=b,$.publish("SETTINGS_TIME_FORMAT",b)}})};n(),a.Setting=m,a.Constants=l},"MailSuite.Settings.Mail"),_defineSettingsModule("FolderListSortMode",function(a,b){var c=b("Platform.Components"),d=b("MailSuite.Settings.Mail.Persister"),e=b("Platform.System.Utils"),f=c.SettingManager,g="folder-list-sort-mode",h="alphabetical",i="user-preference",j=function(){return[h,i]},k=function(){return{ALPHABETICAL:h,USER_PREFERENCE:i}},l={MODES:k(),VALUE_MAP:{"user-preference":0,alphabetical:1},VALUE_REVERSE_MAP:{0:i,1:h}},m=f.create(g,{props:{defaultValue:h,options:j()},persister:{errors:function(a){return"Error occurred ( E"+a+")"},fetch:function(){var a=e.makeDeferred(),b=l.VALUE_REVERSE_MAP[zmail.mailOpt.folSort];return a.resolve(b),a.promise()},save:function(){var a=e.makeDeferred();return d.save(g).done(a.resolve).fail(a.fail),a.resolve(),a.promise()}},type:"option",category:"mail"}),n=function(){m.on("props.change",function(a){a=a||{},a.changed.hasOwnProperty("value")&&(zmail.mailOpt=zmail.mailOpt||{},zmail.mailOpt.folSort=l.VALUE_MAP[a.changed.value])})};n(),a.Setting=m,a.Constants=l},"MailSuite.Settings.Mail"),_defineSettingsModule("TagListSortMode",function(a,b){var c=b("Platform.Components"),d=b("MailSuite.Settings.Mail.Persister"),e=b("Platform.System.Utils"),f=c.SettingManager,g="tag-list-sort-mode",h="alphabetical",i="user-preference",j=function(){return[h,i]},k=function(){return{ALPHABETICAL:h,USER_PREFERENCE:i}},l={MODES:k(),VALUE_MAP:{"user-preference":0,alphabetical:1},VALUE_REVERSE_MAP:{0:i,1:h}},m=f.create(g,{props:{defaultValue:h,options:j()},persister:{errors:function(a){return"Error occurred ( E"+a+")"},fetch:function(){var a=e.makeDeferred(),b=l.VALUE_REVERSE_MAP[zmail.mailOpt.labSort];return a.resolve(b),a.promise()},save:function(){var a=e.makeDeferred();return d.save(g).done(a.resolve).fail(a.fail),a.resolve(),a.promise()}},type:"option",category:"mail"}),n=function(){m.on("props.change",function(a){a=a||{},a.changed.hasOwnProperty("value")&&(zmail.mailOpt=zmail.mailOpt||{},zmail.mailOpt.labSort=l.VALUE_MAP[a.changed.value])})};n(),a.Setting=m,a.Constants=l},"MailSuite.Settings.Mail"),_defineSettingsModule("CalendarServiceSetting",function(a,b){var c=b("Platform.Components"),d=b("Platform.System.Utils"),e=c.SettingManager,f="calendar-service-setting",g="zcal",h="zcrm",i=function(){return[g,h]},j=function(){return{ZCAL:g,ZCRM:h}},k={MODES:j(),VALUE_MAP:{zcal:g,zcrm:h},VALUE_REVERSE_MAP:{zcal:"zcal",zcrm:"zcrm"}},l=e.create(f,{props:{defaultValue:g,options:i()},persister:{errors:function(a){return"Error occurred ( E"+a+")"},fetch:function(){var a=d.makeDeferred(),b=k.VALUE_MAP[zmAdHocSettings.getCalServiceName()];return a.resolve(b),a.promise()},save:function(){var a=d.makeDeferred();return zmAdHocSettings.setCalServiceName(l.get()),a.resolve(),a.promise()}},type:"option",category:"mail"});a.Setting=l,a.Constants=k},"MailSuite.Settings.Mail"),_defineSettingsModule("Cards",function(a,b){var c="event-mail-action",d="mail",e="event-mail-action",f=zmText.get("zm-settings-core","eventMailAction"),g=f.card,h=b("MailSuite.App"),i=b("Platform.Events.Base"),j=b("Platform.Components"),k=j.SettingCardManager,l=j.SettingCardItemManager,m=j.SettingManager,n=b("Platform.Entities"),o=n.SettingCardItem,p=o.Types,q=k.create(c,{props:{openable:!0,title:g.title,addToSearch:!1},state:{hidden:!1},attributes:{category:d},openAction:k.CardActions.OpenPageAction(e)}),r=f.cardItems.mailEventSaveTarget,s=l.create("calendar-service-setting",{props:{title:r.cardItem.title,value:"...",addToSearch:!1},attributes:{type:p.LabelValue,card:c},primaryAction:function(){var a=l.CardItemActions.OpenPageAction("event-mail-action",{showSection:"calendar-service-setting"});a()}}),t=function(){var a=m.get("calendar-service-setting");return zmText.applyArgs(r.cardItem.values[a.get()],{companyName:zmail.globalI18N.companyName})},u=function(){_zm.checkForCRMMailAddonUser().done(function(){window.zmail.isCRMMailAddonUser||q.setState({hidden:!0})}),m.get("calendar-service-setting").on("props.change",function(a){a=a||{},a.changed.hasOwnProperty("value")&&s.setProp({value:t()})}),i.subscribeEvent(h,h.Events.OPEN,function(){s.setProp({value:t()})})};u(),a.EventMailAction=q},"MailSuite"),_defineSettingsModule("MailViewOptions",function(a,b){var c,d=b("Platform.Components"),e=d.SettingAppManager,f=b("Platform.System.Utils"),g="mail-view-options",h="mail-view-options",i="zm-settings-app-mailviewoptions",j="MailSuite.Apps.MailViewOptions.AppCore",k=function(){return zmAppLoader.load(i)},l=function(){return b(j)},m=function(){var a=f.makeDeferred();return k().done(function(){l().initialize({process:a})}).fail(function(){f.debugLog("Module load failed !!!"),a.reject()}),a.promise()},n=function(){var a=f.makeDeferred();return k().done(function(){l().uninitialize({process:a})}),a.promise()},o=function(){var a=l();return a.getSettingsAppView()},p=function(){var a=l(),b=Array.prototype.slice.call(arguments);return a?a.handleContainerEvent.apply(this,b):null},q=function(){c=e.create(g,{attributes:{page:h,isReactApp:!0},initialize:m,uninitialize:n,getView:o,handleContainerEvent:p})},r=function(){q(),a.App=c};r()},"MailSuite.Apps"),_defineSettingsModule("EventMailAction",function(a,b){var c,d=b("Platform.Components"),e=d.SettingAppManager,f=b("Platform.System.Utils"),g="event-mail-action",h="event-mail-action",i="zm-settings-app-eventmailaction",j="MailSuite.Apps.EventMailAction.AppCore",k=function(){return zmAppLoader.load(i)},l=function(){return b(j)},m=function(){var a=f.makeDeferred();return k().done(function(){l().initialize({process:a})}).fail(function(){f.debugLog("Module load failed !!!"),a.reject()}),a.promise()},n=function(){var a=f.makeDeferred();return k().done(function(){l().uninitialize({process:a})}),a.promise()},o=function(){var a=l();return a.getSettingsAppView()},p=function(){var a=l(),b=Array.prototype.slice.call(arguments);return a?a.handleContainerEvent.apply(this,b):null},q=function(){c=e.create(g,{attributes:{page:h,isReactApp:!0},initialize:m,uninitialize:n,getView:o,handleContainerEvent:p})},r=function(){q(),a.App=c};r()},"MailSuite.Apps"),function(a){var b="mail-view-options",c={READING_PANE:"mail-reading-pane",READ_RECEIPT:"read-receipt",LOAD_EXTERNAL_IMAGES:"load-external-images",TIME_FORMAT:"display-time-format",FOLDER_LIST_SORT_MODE:"folder-list-sort-mode",TAG_LIST_SORT_MODE:"tag-list-sort-mode",SUBJECT_AND_SUMMARY_MODE:"sub-sum-mode"},d=zmText.get("zm-settings-core","mailViewOptions"),e=d.cardItems,f=a("Platform.Components"),g=a("Platform.Entities"),h=a("MailSuite.Settings.Mail"),i=h.ReadingPane,j=h.ReadReceipt,k=h.LoadExternalImage,l=h.DisplayTimeFormat,m=h.FolderListSortMode,n=h.TagListSortMode,o=h.SubjectAndSummary,p=f.SettingCardItemManager,q=g.SettingCardItem,r=q.Types,s=function(a,b){for(var c in b)if(b[c]===a)return c},t=function(a){a=a||i.Setting.get();var b=s(a,i.Constants.MODES);return e.readingPane.modes[b]},u=p.create(c.READING_PANE,{props:{title:e.readingPane.cardItem.title,value:t()},attributes:{type:r.LabelValue,card:b},primaryAction:function(){var a=p.CardItemActions.OpenPageAction("mail-view-options",{showSection:"reading-pane"});a()}}),v=function(a){a=a||j.Setting.get();var b=s(a,j.Constants.MODES);return e.readReceipt.modes[b]},w=p.create(c.READ_RECEIPT,{props:{title:e.readReceipt.cardItem.title,value:v()},attributes:{type:r.LabelValue,card:b},primaryAction:function(){var a=p.CardItemActions.OpenPageAction("mail-view-options",{showSection:"read-receipt"});a()}}),x=function(a){a=a||k.Setting.get();var b=s(a,k.Constants.MODES);return e.loadExternalImages.modes[b]},y=p.create(c.LOAD_EXTERNAL_IMAGES,{props:{title:e.loadExternalImages.cardItem.title,value:x()},attributes:{type:r.LabelValue,card:b},primaryAction:function(){var a=p.CardItemActions.OpenPageAction("mail-view-options",{showSection:"load-external-images"});a()}}),z=function(a){a=a||l.Setting.get();var b=s(a,l.Constants.MODES);return e.displayTimeFormat.modes[b]},A=p.create(c.TIME_FORMAT,{props:{title:e.displayTimeFormat.cardItem.title,value:z()},attributes:{type:r.LabelValue,card:b},primaryAction:function(){var a=p.CardItemActions.OpenPageAction("mail-view-options",{showSection:"time-format"});a()}}),B=function(a){a=a||m.Setting.get();var b=s(a,m.Constants.MODES);return e.folderListSortMode.modes[b]},C=p.create(c.FOLDER_LIST_SORT_MODE,{props:{title:e.folderListSortMode.cardItem.title,value:B()},attributes:{type:r.LabelValue,card:b},primaryAction:function(){var a=p.CardItemActions.OpenPageAction("mail-view-options",{showSection:"folder-list-sort-mode"});a()}}),D=function(a){a=a||n.Setting.get();var b=s(a,n.Constants.MODES);return e.tagListSortMode.modes[b]},E=p.create(c.TAG_LIST_SORT_MODE,{props:{title:e.tagListSortMode.cardItem.title,value:D()},attributes:{type:r.LabelValue,card:b},primaryAction:function(){var a=p.CardItemActions.OpenPageAction("mail-view-options",{showSection:"tag-list-sort-mode"});a()}}),F=function(a){a=a||o.Setting.get();var b=s(a,o.Constants.MODES);return e.subjectAndSummaryMode.modes[b]},G=p.create(c.SUBJECT_AND_SUMMARY_MODE,{props:{title:e.subjectAndSummaryMode.cardItem.title,value:F()},attributes:{type:r.LabelValue,card:b},primaryAction:function(){var a=p.CardItemActions.OpenPageAction("mail-view-options",{showSection:"sub-sum-mode"});a()}}),H=function(){i.Setting.on("props.change",function(a){a=a||{},a.changed.hasOwnProperty("value")&&u.setProp({value:t(a.changed.value)})}),j.Setting.on("props.change",function(a){a=a||{},a.changed.hasOwnProperty("value")&&w.setProp({value:v(a.changed.value)})}),k.Setting.on("props.change",function(a){a=a||{},a.changed.hasOwnProperty("value")&&y.setProp({value:x(a.changed.value)})}),l.Setting.on("props.change",function(a){a=a||{},a.changed.hasOwnProperty("value")&&A.setProp({value:z(a.changed.value)})}),m.Setting.on("props.change",function(a){a=a||{},a.changed.hasOwnProperty("value")&&C.setProp({value:B(a.changed.value)})}),o.Setting.on("props.change",function(a){a=a||{},a.changed.hasOwnProperty("value")&&G.setProp({value:F(a.changed.value)})}),n.Setting.on("props.change",function(a){a=a||{},a.changed.hasOwnProperty("value")&&E.setProp({value:D(a.changed.value)})})};H()}(zmail.Settings.Modules["import"]),function(a){var b="mail-view-options",c={READING_PANE:"mail-reading-pane",READ_RECEIPT:"read-receipt",LOAD_EXTERNAL_IMAGES:"load-external-images",TIME_FORMAT:"display-time-format"},d=zmText.get("zm-settings-core","mailViewOptions.quickNavigatorItems"),e=d,f="mail-view-options",g={READING_PANE:"reading-pane",READ_RECEIPT:"read-receipt",LOAD_EXTERNAL_IMAGES:"load-external-images",TIME_FORMAT:"time-format"},h=a("Platform.Components"),i=h.QuickNavigatorSectionManager,j=h.QuickNavigatorItemManager;i.create(b,{props:{title:e.sectionTitle},state:{selected:!1}}),j.create(c.READING_PANE,{props:{title:e.readingPane,linkedPage:f,linkedPageSection:g.READING_PANE,selectable:!0},attributes:{section:b}}),j.create(c.READ_RECEIPT,{props:{title:e.readReceipt,linkedPage:f,linkedPageSection:g.READ_RECEIPT,selectable:!0},attributes:{section:b}}),j.create(c.LOAD_EXTERNAL_IMAGES,{props:{title:e.loadExternalImages,linkedPage:f,linkedPageSection:g.LOAD_EXTERNAL_IMAGES,selectable:!0},attributes:{section:b}}),j.create(c.TIME_FORMAT,{props:{title:e.displayTimeFormat,linkedPage:f,linkedPageSection:g.TIME_FORMAT,selectable:!0},attributes:{section:b}})}(zmail.Settings.Modules["import"]),_defineSettingsModule("Pages",function(a,b){var c="compose-settings",d=b("Platform.Components"),e=b("Platform.Entities"),f=zmText.get("zm-settings-core","compose"),g=f.page,h=d.SettingPageManager,i=e.SettingPage,j=i.Types,k=h.create(c,{props:{title:g.title},attributes:{type:j.Title,card:c,category:"mail",pageCSSClass:"compose-settings-page"}});a.Compose=k},"MailSuite"),_defineSettingsModule("Cards",function(a,b){var c="compose-settings",d="mail",e="compose-settings",f=zmText.get("zm-settings-core","compose"),g={cardTitle:f.card.title},h=b("Platform.Components"),i=h.SettingCardManager,j=i.create(c,{props:{openable:!0,title:g.cardTitle},attributes:{category:d},openAction:i.CardActions.OpenPageAction(e)});a.Compose=j},"MailSuite"),_defineSettingsModule("ComposeTarget",function(a,b){var c=b("Platform.Components"),d=b("Platform.System.Utils"),e=c.SettingManager,f="compose-target",g="inline",h="tab",i="window",j=function(){return[0,1,2]},k=function(){return{0:i,1:h,2:g}},l={ALLOWED_VALUES:j(),TARGET_MODE:k()},m={errors:function(a){return"Error occured ! Error Code = "+a},fetch:function(a){var b=d.makeDeferred();return d.debugLog("fetching mail-setting "+f,a),b.resolve(zmail.userOptions.composeView),b.promise()},save:function(a,b){var c=d.makeDeferred();d.debugLog("saving "+f,a,b);var e={settings:JSON.stringify({composeView:a}),mode:"composeVO"},g={value:a};return zmAjq.XHR({u:zmail.conPath+"/userSettings.do",t:"POST",fn:function(a,b){zmail.userOptions.composeView=b.value,c.resolve(b.value)},p:e,csr:"s",ep:g}),c.promise()}},n=e.create(f,{props:{defaultValue:zmail.userOptions.composeView,options:j()},persister:m,type:"option",category:"compose"});n.initialize(),a.Setting=n,a.Constants=l},"MailSuite.Settings.Compose"),_defineSettingsModule("ContentEncoding",function(a,b){var c=b("Platform.Components"),d=c.SettingManager,e=b("Platform.System.Utils"),f="compose-content-encoding",g=function(){return zmail.userOptions.encodings},h={errors:function(a){return"Error occured ! Error Code = "+a},fetch:function(a){var b=e.makeDeferred();return e.debugLog("fetching mail-setting "+f,a),b.resolve(zmail.userOptions.encoding),b.promise()},save:function(a,b){var c=e.makeDeferred();e.debugLog("saving "+f,a,b);var d={settings:JSON.stringify({encoding:a}),mode:"composeVO"},g={value:a};return zmAjq.XHR({u:zmail.conPath+"/userSettings.do",t:"POST",fn:function(a,b){zmail.userOptions.encoding=b.value,c.resolve(b.value)},p:d,csr:"s",ep:g}),c.promise()}},i={allowedValues:g()},j=d.create(f,{props:{defaultValue:"UTF-8",options:g()},persister:h,type:"option",category:"compose"});j.initialize(),a.Setting=j,a.Constants=i},"MailSuite.Settings.Compose"),_defineSettingsModule("ComposeFontFamily",function(a,b){var c=b("Platform.Components"),d=c.SettingManager,e=b("Platform.System.Utils"),f="compose-font-family",g=function(){return zmail.userOptions.composeFonts},h={allowedValues:g()},i={errors:function(a){return"Error occured ! Error Code = "+a},fetch:function(a){var b=e.makeDeferred();return e.debugLog("fetching mail-setting "+f,a),"Default"===zmail.userOptions.fontFamily&&(zmail.userOptions.fontFamily="Arial"),b.resolve(zmail.userOptions.fontFamily),b.promise()},save:function(a,b){var c=e.makeDeferred();e.debugLog("saving "+f,a,b);var d={settings:JSON.stringify({fontFamily:a}),mode:"composeVO"},g={value:a};return zmAjq.XHR({u:zmail.conPath+"/userSettings.do",t:"POST",fn:function(a,b){zmail.userOptions.encoding=b.value,c.resolve(b.value)},p:d,csr:"s",ep:g}),c.promise()}},j=d.create(f,{props:{defaultValue:zmail.userOptions.fontFamily,options:g()},persister:i,type:"option",category:"compose"});j.initialize(),a.Setting=j,a.Constants=h},"MailSuite.Settings.Compose"),_defineSettingsModule("ComposeFontSize",function(a,b){var c=b("Platform.Components"),d=b("Platform.System.Utils"),e=c.SettingManager,f="compose-font-size",g=function(){return[8,10,12,14,18,24,36]},h={allowedValues:g()},i={errors:function(a){return"Error occured ! Error Code = "+a},fetch:function(a){var b=d.makeDeferred();return d.debugLog("fetching mail-setting "+f,a),b.resolve(zmail.userOptions.fontSize),b.promise()},save:function(a,b){var c=d.makeDeferred();d.debugLog("saving "+f,a,b);var e={settings:JSON.stringify({fontSize:a}),mode:"composeVO"},g={value:a};return zmAjq.XHR({u:zmail.conPath+"/userSettings.do",t:"POST",fn:function(a,b){zmail.userOptions.fontSize=b.value,c.resolve(b.value)},p:e,csr:"s",ep:g}),c.promise()}},j=e.create(f,{props:{defaultValue:zmail.userOptions.fontSize,options:g()},persister:i,type:"option",category:"compose"});j.initialize(),a.Setting=j,a.Constants=h},"MailSuite.Settings.Compose"),_defineSettingsModule("AutoAddContacts",function(a,b){var c=b("Platform.Components"),d=c.SettingManager,e=b("Platform.System.Utils"),f="compose-auto-add-contacts",g={errors:function(a){return"Error occured ! Error Code = "+a},fetch:function(a){var b=e.makeDeferred();return e.debugLog("fetching mail-setting "+f,a),b.resolve(Boolean(zmail.userOptions.autoAddContacts)),b.promise()},save:function(a,b){var c=e.makeDeferred();e.debugLog("saving "+f,a,b),a=a?1:0;var d={settings:JSON.stringify({autoAddContacts:a}),mode:"composeVO"},g={value:a};return zmAjq.XHR({u:zmail.conPath+"/userSettings.do",t:"POST",fn:function(a,b){zmail.userOptions.composeView=b.value,c.resolve(b.value)},p:d,csr:"s",ep:g}),c.promise()}},h=d.create(f,{props:{defaultValue:!0},persister:g,type:"boolean",category:"compose"});h.initialize(),a.Setting=h},"MailSuite.Settings.Compose"),_defineSettingsModule("OutboxDelayDuration",function(a,b){var c=b("Platform.Components"),d=b("Platform.Validators.Basic"),e=b("Platform.System.Utils"),f=c.SettingManager,g={range:{max:120,min:-1}},h="compose-outbox-delay-duration",i={errors:function(a){return"Error occured ! Error Code = "+a},fetch:function(a){var b=e.makeDeferred();return e.debugLog("fetching mail-setting "+h,a),b.resolve(zmail.userOptions.outboxInterval),b.promise()},save:function(a,b){var c=e.makeDeferred();e.debugLog("saving "+h,a,b);var d={settings:JSON.stringify({outboxInterval:a}),mode:"composeVO"},f={value:a};return zmAjq.XHR({u:zmail.conPath+"/userSettings.do",t:"POST",fn:function(a,b){zmail.userOptions.outboxInterval=b.value,c.resolve(b.value)},p:d,csr:"s",ep:f}),c.promise()}},j=f.create(h,{props:{defaultValue:-1},persister:i,validations:[{validator:d.RangeValidator,opts:g.range}],type:"default",category:"compose"});j.initialize(),a.Setting=j,a.Constants=g},"MailSuite.Settings.Compose"),_defineSettingsModule("OutboxDelayState",function(a,b){var c=b("Platform.Components"),d=b("MailSuite.Settings.Compose"),e=d.OutboxDelayDuration.Setting,f=c.SettingManager,g="compose-outbox-delay-state",h=f.create(g,{props:{defaultValue:!1},type:"boolean",category:"compose"});h.initialize({value:e.get()>0}),a.Setting=h;var i=function(){e.on("props.change",function(a){h.set(a.changed.value>0)}),h.on("props.change",function(a){var b=e.get("value");a.changed.value&&b>0||e.set(a.changed.value?1:-1)})};i()},"MailSuite.Settings.Compose"),_defineSettingsModule("AskReceipt",function(a,b){var c=b("Platform.Components"),d=c.SettingManager,e=b("Platform.System.Utils"),f="compose-ask-receipt",g={errors:function(a){return"Error occured ! Error Code = "+a},fetch:function(a){var b=e.makeDeferred();return e.debugLog("fetching mail-setting "+f,a),b.resolve(Boolean(zmail.cmpdata.ASKRECEIPT)),b.promise()},save:function(a,b){var c=e.makeDeferred();e.debugLog("saving "+f,a,b),a=a?1:0;var d={settings:JSON.stringify({askReceipt:a}),mode:"composeVO"},g={value:a};return zmAjq.XHR({u:zmail.conPath+"/userSettings.do",t:"POST",fn:function(a,b){zmail.userOptions.askReceipt=b.value,c.resolve(b.value)},p:d,csr:"s",ep:g}),c.promise()}},h=d.create(f,{props:{defaultValue:Boolean(zmail.cmpdata.ASKRECEIPT)},persister:g,type:"boolean",category:"compose"});h.initialize(),a.Setting=h},"MailSuite.Settings.Compose"),_defineSettingsModule("ShowBCC",function(a,b){var c=b("Platform.Components"),d=c.SettingManager,e=b("Platform.System.Utils"),f="compose-show-bcc",g={errors:function(a){return"Error occured ! Error Code = "+a},fetch:function(a){var b=e.makeDeferred();return e.debugLog("fetching mail-setting "+f,a),b.resolve(Boolean(zmail.cmpdata.SHOWBCC)),b.promise()},save:function(a,b){var c=e.makeDeferred();e.debugLog("saving "+f,a,b),a=a?1:0;var d={settings:JSON.stringify({showBcc:a}),mode:"composeVO"},g={value:a};return zmAjq.XHR({u:zmail.conPath+"/userSettings.do",t:"POST",fn:function(a,b){zmail.userOptions.showBCC=b.value,zmail.cmpdata.SHOWBCC=b.value,c.resolve(b.value)},p:d,csr:"s",ep:g}),c.promise()}},h=d.create(f,{props:{defaultValue:Boolean(zmail.cmpdata.SHOWBCC)},persister:g,type:"boolean",category:"compose"});h.initialize(),a.Setting=h},"MailSuite.Settings.Compose"),_defineSettingsModule("ComposeFontColor",function(a,b){var c,d=b("Platform.Components"),e=b("Platform.System.Utils"),f=d.SettingManager,g="compose-font-color",h=function(){return["#e5e5e5","#f9baab","#f9d3a2","#fef86a","#d7f3b0","#c8e5fb","#e0ceef","#f6d0e6","#c4c4c4","#e07861","#ecb772","#f6e565","#badf88","#96ccf5","#b99fce","#e099c2","#808080","#ce232c","#dd902f","#d0c04b","#90ca40","#70abec","#a97ac6","#c26a9d","#000000","#9d1812","#a56016","#a69646","#5b8828","#4c76a2","#8343a0","#ba3682","Default"]},i={allowedValues:h()},j={errors:function(a){return"Error occured ! Error Code = "+a},fetch:function(a){var b=e.makeDeferred();return e.debugLog("fetching mail-setting "+g,a),b.resolve(zmail.userOptions.fontColor),b.promise()},save:function(a,b){var c=e.makeDeferred();e.debugLog("saving "+g,a,b);var d={settings:JSON.stringify({fontColor:a}),mode:"composeVO"},f={value:a};return zmAjq.XHR({u:zmail.conPath+"/userSettings.do",t:"POST",fn:function(a,b){zmail.userOptions.fontColor=b.value,c.resolve(b.value)},p:d,csr:"s",ep:f}),c.promise()}};c=f.create(g,{props:{defaultValue:zmail.userOptions.fontColor,options:h()},persister:j,type:"option",category:"compose"}),c.initialize(),a.Setting=c,a.Constants=i},"MailSuite.Settings.Compose"),function(a){var b=a("MailSuite.Settings.Compose"),c=b.AutoAddContacts.Setting,d=b.OutboxDelayDuration.Setting,e=b.ComposeFontSize.Setting,f=b.ComposeFontFamily.Setting,g=b.ContentEncoding.Setting,h=b.ComposeTarget.Setting,i=b.AskReceipt.Setting,j=b.ShowBCC.Setting,k={autoAddContacts:"CS_ADD_RECIPIENTS_CHANGED",composeView:"CS_EDITOR_TYPE_CHANGED",encoding:"CS_ENCODING_CHANGED",fontFamily:"CS_FONT_FAMILY_CHANGED",fontSize:"CS_FONT_SIZE_CHANGED",outboxInterval:"CS_SENDING_DELAY_CHANGED",askReceipt:"CS_ASK_RECEIPT_CHANGED",showBcc:"CS_SHOW_BCC_CHANGED"},l=function(a){return function(b){b=b||{},b.changed.hasOwnProperty("value")&&$.publish(a,b.changed.value)}};d.props.on("change",l(k.outboxInterval)),c.props.on("change",l(k.autoAddContacts)),e.props.on("change",l(k.fontSize)),f.props.on("change",l(k.fontFamily)),g.props.on("change",l(k.encoding)),h.props.on("change",l(k.composeView)),i.props.on("change",l(k.askReceipt)),j.props.on("change",l(k.askReceipt))}(zmail.Settings.Modules["import"]),function(a){var b="compose-settings",c="compose-settings",d={COMPOSE_TARGET:"compose-target",CONTENT_ENCODING:"compose-encoding",AUTO_ADD_CONTACTS:"auto-add-contacts",COMPOSE_FONT_FAMILY:"compose-font-family",COMPOSE_FONT_SIZE:"compose-font-size",OUTBOX_INTERVAL:"compose-outbox-delay-duration",SHOW_BCC:"compose-show-bcc",COMPOSE_FONT_COLOR:"compose-font-color"},e=zmText.get("zm-settings-core","compose.cardItems"),f=a("Platform.Components"),g=a("Platform.Entities"),h=a("MailSuite.Settings.Compose"),i=h.ComposeTarget,j=h.ContentEncoding,k=h.AutoAddContacts,l=h.ComposeFontFamily,m=h.ComposeFontSize,n=h.OutboxDelayDuration,o=h.ShowBCC,p=f.SettingCardItemManager,q=g.SettingCardItem,r=q.Types,s=i.Setting,t=j.Setting,u=k.Setting,v=l.Setting,w=m.Setting,x=n.Setting,y=o.Setting,z=i.Constants.TARGET_MODE,A=function(a){a=a||s.get();var b=z[a];return e.composeTarget.targetModes[b]},B=function(a){return"undefined"==typeof a&&(a=x.get()),a<=0?e.outboxDelayDuration.valueNotSet:a+" "+e.outboxDelayDuration.minutes},C=p.create(d.COMPOSE_TARGET,{props:{title:e.composeTarget.cardItem.title,value:A()},attributes:{type:r.LabelValue,card:b},primaryAction:p.CardItemActions.OpenPageAction(c,{showSection:d.COMPOSE_TARGET})}),D=p.create(d.CONTENT_ENCODING,{props:{title:e.contentEncoding.cardItem.title,value:t.get()},attributes:{type:r.LabelValue,card:b},primaryAction:p.CardItemActions.OpenPageAction(c,{showSection:d.CONTENT_ENCODING})}),E=p.create(d.COMPOSE_FONT_FAMILY,{props:{title:e.composeFontFamily.cardItem.title,value:v.get()},attributes:{type:r.LabelValue,card:b},searchCommand:{title:e.composeFontFamily.searchCommand.title},primaryAction:p.CardItemActions.OpenPageAction(c,{showSection:d.COMPOSE_FONT_FAMILY})}),F=p.create(d.COMPOSE_FONT_SIZE,{props:{title:e.composeFontSize.cardItem.title,value:w.get()},attributes:{type:r.LabelValue,card:b},searchCommand:{title:e.composeFontSize.searchCommand.title},primaryAction:p.CardItemActions.OpenPageAction(c,{showSection:d.COMPOSE_FONT_SIZE})}),G=p.create(d.OUTBOX_INTERVAL,{props:{title:e.outboxDelayDuration.cardItem.title,value:B()},attributes:{type:r.LabelValue,card:b},transformer:function(a,b){b=b||{},"props"===a&&b.hasOwnProperty("value")&&(b.value=B(b.value))},primaryAction:p.CardItemActions.OpenPageAction(c,{showSection:d.COMPOSE_FONT_SIZE})}),H=p.create(d.AUTO_ADD_CONTACTS,{props:{title:e.autoAddContacts.cardItem.title},attributes:{type:r.LabelAction,card:b},transformer:function(a,b){return b=b||{},"props"===a&&b.hasOwnProperty("value")&&(b.value=b.value===!0?e.autoAddContacts.enabled:e.autoAddContacts.disabled),b},primaryAction:p.CardItemActions.OpenPageAction(c,{showSection:d.AUTO_ADD_CONTACTS}),secondaryAction:function(){var a=u,b=a.get()!==!0;a.set(b)}}),I=p.create(d.SHOW_BCC,{props:{title:e.showBcc.cardItem.title},attributes:{type:r.LabelAction,card:b},transformer:function(a,b){return b=b||{},"props"===a&&b.hasOwnProperty("value")&&(b.value=b.value===!0?e.showBcc.disabled:e.showBcc.enabled),b},primaryAction:p.CardItemActions.OpenPageAction(c,{showSection:d.AUTO_ADD_CONTACTS}),secondaryAction:function(){var a=y,b=a.get()!==!0;a.set(b)}}),J=function(){s.on("props.change",function(a){a=a||{},a.changed.hasOwnProperty("value")&&C.setProp({value:A(a.changed.value)})}),t.on("props.change",function(a){a=a||{},a.changed.hasOwnProperty("value")&&D.setProp({value:a.changed.value})}),v.on("props.change",function(a){a=a||{},a.changed.hasOwnProperty("value")&&E.setProp({value:a.changed.value})}),w.on("props.change",function(a){a=a||{},a.changed.hasOwnProperty("value")&&F.setProp({value:a.changed.value})}),x.on("props.change",function(a){a=a||{},a.changed.hasOwnProperty("value")&&G.setProp({value:B(a.changed.value)})}),p.bindSetting(H,u),p.bindSetting(I,y)};J()}(zmail.Settings.Modules["import"]),function(a){var b="compose-settings",c={COMPOSE_TARGET:"compose-target",CONTENT_ENCODING:"compose-encoding",AUTO_ADD_CONTACTS:"auto-add-contacts",COMPOSE_FONT:"compose-font",OUTBOX_INTERVAL:"outbox-inteval",ASK_RECEIPT:"compose-ask-receipt",SHOW_BCC:"compose-show-bcc",COMPOSE_FONT_COLOR:"compose-font-color"},d={COMPOSE_TARGET:"sa-compose-target",CONTENT_ENCODING:"sa-compose-encoding",AUTO_ADD_CONTACTS:"sa-auto-add-contacts",COMPOSE_FONT:"compose-font",OUTBOX_INTERVAL:"outbox-interval",ASK_RECEIPT:"compose-ask-receipt",SHOW_BCC:"compose-show-bcc",COMPOSE_FONT_COLOR:"compose-font-color"},e={APPCORE_MODULE_ID:"zm-settings-app-composesettings"},f=zmText.get("zm-settings-core","compose.page"),g=a("Platform.Components"),h=a("Platform.Entities"),i=h.SettingPageSection,j=g.SettingAppManager,k=i.Types,l=g.SettingPageSectionManager,m=a("MailSuite.Settings.Compose"),n=m.AutoAddContacts.Setting,o=m.OutboxDelayDuration.Setting,p=m.OutboxDelayState.Setting,q=m.AskReceipt.Setting,r=m.ShowBCC.Setting,s=function(){return zmAppLoader.load(e.APPCORE_MODULE_ID)};l.create(c.COMPOSE_TARGET,{props:{title:f.section.composeTarget.title},attributes:{page:b,type:k.Title,appContainer:!0},quickNavigation:{props:{title:f.section.composeTarget.quickLink,linkedPage:b,linkedPageSection:c.COMPOSE_TARGET,selectable:!0},attributes:{section:"compose-settings"}}}),l.create(c.CONTENT_ENCODING,{props:{title:f.section.defaultEncoding.title},attributes:{page:b,type:k.Title,appContainer:!0},quickNavigation:{props:{title:f.section.defaultEncoding.quickLink,linkedPage:b,linkedPageSection:c.CONTENT_ENCODING,selectable:!0},attributes:{section:"compose-settings"}}}),l.create(c.COMPOSE_FONT,{props:{title:f.section.fontOptions.title},attributes:{page:b,type:k.Title,appContainer:!0},quickNavigation:{props:{title:f.section.fontOptions.quickLink,linkedPage:b,linkedPageSection:c.COMPOSE_FONT,selectable:!0},attributes:{section:"compose-settings"}}});var t=l.create(c.OUTBOX_INTERVAL,{props:{title:f.section.outboxDelay.title,toggleSwitchOnText:"ON",toggleSwitchOffText:"OFF",toggleSwitchActive:o.get()>0},attributes:{page:b,type:k.TitleToggleSwitch,appContainer:!0},quickNavigation:{props:{title:f.section.outboxDelay.quickLink,linkedPage:b,linkedPageSection:c.OUTBOX_INTERVAL,selectable:!0},attributes:{section:"compose-settings"}}}),u=l.create(c.AUTO_ADD_CONTACTS,{props:{title:f.section.autoAddContacts.title,toggleSwitchOnText:"ON",toggleSwitchOffText:"OFF",toggleSwitchActive:n.get()},attributes:{page:b,type:k.TitleToggleSwitch,appContainer:!0},quickNavigation:{props:{title:f.section.autoAddContacts.quickLink,linkedPage:b,linkedPageSection:c.AUTO_ADD_CONTACTS,selectable:!0
},attributes:{section:"compose-settings"}}}),v=l.create(c.ASK_RECEIPT,{props:{title:f.section.askReceipt.title,toggleSwitchOnText:"ON",toggleSwitchOffText:"OFF",toggleSwitchActive:!q.get()},attributes:{page:b,type:k.TitleToggleSwitch,appContainer:!0},quickNavigation:{props:{title:f.section.askReceipt.quickLink,linkedPage:b,linkedPageSection:c.ASK_RECEIPT,selectable:!0},attributes:{section:"compose-settings"}}}),w=l.create(c.SHOW_BCC,{props:{title:f.section.showBcc.title,toggleSwitchOnText:"ON",toggleSwitchOffText:"OFF",toggleSwitchActive:!r.get()},attributes:{page:b,type:k.TitleToggleSwitch,appContainer:!0},quickNavigation:{props:{title:f.section.showBcc.quickLink,linkedPage:b,linkedPageSection:c.SHOW_BCC,selectable:!0},attributes:{section:"compose-settings"}}}),x=function(){return s()},y=function(){return s()},z=function(){var b=a("MailSuite.Settings.Compose.Views");return b.getComposeTargetComponent()},A=function(){j.create(d.COMPOSE_TARGET,{attributes:{pageSection:c.COMPOSE_TARGET,isReactApp:!0},initialize:x,uninitialize:y,getView:z,handleContainerEvent:function(){}}),j.create(d.CONTENT_ENCODING,{attributes:{pageSection:c.CONTENT_ENCODING,isReactApp:!0},initialize:function(){return s()},uninitialize:function(){return s()},getView:function(){var b=a("MailSuite.Settings.Compose.Views");return b.getContentEncodingComponent()},handleContainerEvent:function(){}}),j.create(d.COMPOSE_FONT,{attributes:{pageSection:c.COMPOSE_FONT,isReactApp:!0},initialize:function(){return s()},uninitialize:function(){return s()},getView:function(){var b=a("MailSuite.Settings.Compose.Views");return b.getComposeFontComponent()},handleContainerEvent:function(){}}),j.create(d.OUTBOX_INTERVAL,{attributes:{pageSection:c.OUTBOX_INTERVAL,isReactApp:!0},initialize:function(){return s()},uninitialize:function(){return s()},getView:function(){var b=a("MailSuite.Settings.Compose.Views");return b.getOutboxDelayDurationComponent()},handleContainerEvent:function(){}}),j.create(d.AUTO_ADD_CONTACTS,{attributes:{pageSection:c.AUTO_ADD_CONTACTS},initialize:function(){return s()},uninitialize:function(){return s()},getView:function(){var b=a("MailSuite.Settings.Compose.Views");return b.getAutoAddContactDOM()},handleContainerEvent:function(){}}),j.create(d.ASK_RECEIPT,{attributes:{pageSection:c.ASK_RECEIPT},initialize:function(){return s()},uninitialize:function(){return s()},getView:function(){var b=a("MailSuite.Settings.Compose.Views");return b.getAskReceiptDOM()},handleContainerEvent:function(){}}),j.create(d.SHOW_BCC,{attributes:{pageSection:c.SHOW_BCC},initialize:function(){return s()},uninitialize:function(){return s()},getView:function(){var b=a("MailSuite.Settings.Compose.Views");return b.getShowBccDOM()},handleContainerEvent:function(){}})},B=function(){u.props.on("change:toggleSwitchActive",function(a){var b=a.changed.toggleSwitchActive;n.set(b)}),n.props.on("change",function(a){a.changed.hasOwnProperty("value")&&u.setProp({toggleSwitchActive:a.changed.value})}),v.props.on("change:toggleSwitchActive",function(a){var b=a.changed.toggleSwitchActive;q.set(!b)}),q.props.on("change",function(a){a.changed.hasOwnProperty("value")&&v.setProp({toggleSwitchActive:!a.changed.value})}),r.props.on("change",function(a){a.changed.hasOwnProperty("value")&&w.setProp({toggleSwitchActive:!a.changed.value})}),w.props.on("change:toggleSwitchActive",function(a){var b=a.changed.toggleSwitchActive;r.set(!b)}),t.props.on("change:toggleSwitchActive",function(a){a=a||{},a.changed.hasOwnProperty("toggleSwitchActive")&&p.set(a.changed.toggleSwitchActive)}),p.props.on("change",function(a){a=a||{},a.changed.hasOwnProperty("value")&&t.setProp({toggleSwitchActive:a.changed.value})})};A(),B()}(zmail.Settings.Modules["import"]),function(a){var b="compose-settings",c=zmText.get("zm-settings-core","compose.quickNavigatorItems"),d=a("Platform.Components"),e=d.QuickNavigatorSectionManager;e.create(b,{props:{title:c.sectionTitle},state:{selected:!1}})}(zmail.Settings.Modules["import"]),_defineSettingsModule("Pages",function(a,b){var c="conversation-settings",d=b("Platform.Components"),e=b("Platform.Entities"),f=zmText.get("zm-settings-core","conversation.page"),g=d.SettingPageManager,h=e.SettingPage,i=h.Types,j=g.create(c,{props:{title:f.title},attributes:{type:i.Title,card:c,category:"mail",pageCSSClass:"conversation-settings-page"}});a.Conversation=j},"MailSuite"),_defineSettingsModule("Cards",function(a,b){var c="conversation-settings",d="mail",e="conversation-settings",f={cardTitle:zmText.get("zm-settings-core","conversation.card.title")},g=b("Platform.Components"),h=g.SettingCardManager,i=h.create(c,{props:{openable:!0,title:f.cardTitle},attributes:{category:d},openAction:h.CardActions.OpenPageAction(e)});a.Conversation=i},"MailSuite"),function(a){var b="conversation-settings",c="conversation-settings",d={CONVERSATION_VIEW:"converation-view",CONVERSATION_SORT:"conversation-sort"},e=zmText.get("zm-settings-core","conversation.cardItems"),f=a("Platform.Components"),g=a("Platform.Entities"),h=a("MailSuite.Settings.Conversation"),i=h.ViewState,j=h.SortOrder,k=f.SettingCardItemManager,l=g.SettingCardItem,m=l.Types,n=i.Setting,o=j.Setting,p=i.Constants.MODE_MAP,q=j.Constants.MODE_MAP,r=function(a){a="undefined"!=typeof a?a:n.get();var b=p[a];return e.conversationView.viewModes[b]},s=function(a){a="undefined"!=typeof a?a:o.get();var b=q[a];return e.conversationSort.sortModes[b]},t=k.create(d.CONVERSATION_VIEW,{props:{title:e.conversationView.cardItem.title,value:r()},attributes:{type:m.LabelValue,card:b},primaryAction:k.CardItemActions.OpenPageAction(c,{showSection:d.CONVERSATION_VIEW}),searchCommand:{title:e.quickActionTitle.state}}),u=k.create(d.CONVERSATION_SORT,{props:{title:e.conversationSort.cardItem.title,value:s()},attributes:{type:m.LabelValue,card:b},primaryAction:k.CardItemActions.OpenPageAction(c,{showSection:d.CONVERSATION_SORT}),searchCommand:{title:e.quickActionTitle.sortOrder}}),v=function(){n.on("props.change",function(a){a=a||{},a.changed.hasOwnProperty("value")&&t.setProp({value:r(a.changed.value)})}),o.on("props.change",function(a){a=a||{},a.changed.hasOwnProperty("value")&&u.setProp({value:s(a.changed.value)})})};v()}(zmail.Settings.Modules["import"]),function(a){var b="conversation-settings",c={CONVERSATION_VIEW:"conversation-view",CONVERSATION_SORT:"converstion-sort",CONVERSATION_ACTION:"conversation-action"},d={CONVERSATION_VIEW:"sa-conversation-view",CONVERSATION_SORT:"sa-conversation-sort",CONVERSATION_ACTION:"sa-conversation-action"},e={APPCORE_MODULE_ID:"zm-settings-app-conversationsettings"},f=zmText.get("zm-settings-core","conversation.pageItems"),g=a("Platform.Components"),h=a("Platform.Entities"),i=h.SettingPageSection,j=g.SettingAppManager,k=i.Types,l=g.SettingPageSectionManager,m=a("MailSuite.Settings.Conversation"),n=m.ViewState,o=n.Setting,p=function(){return zmAppLoader.load(e.APPCORE_MODULE_ID)},q=l.create(c.CONVERSATION_VIEW,{props:{title:f.conversationView.sectionTitle,toggleSwitchOnText:f.toggleSwitch.onText,toggleSwitchOffText:f.toggleSwitch.offText,toggleSwitchActive:0!==n.Setting.get()},attributes:{page:b,type:k.TitleToggleSwitch,appContainer:!0},quickNavigation:{props:{title:f.conversationView.quickLinkTitle,linkedPage:b,linkedPageSection:c.CONVERSATION_VIEW,selectable:!0},attributes:{section:"mail-conversation-settings"}}});l.create(c.CONVERSATION_SORT,{props:{title:f.conversationSort.sectionTitle},attributes:{page:b,type:k.Title,appContainer:!0},quickNavigation:{props:{title:f.conversationSort.quickLinkTitle,linkedPage:b,linkedPageSection:c.CONVERSATION_SORT,selectable:!0},attributes:{section:"mail-conversation-settings"}}});var r=function(){return p()},s=function(){return p()},t=function(){var b=a("MailSuite.Settings.Conversation.Views");return b.getConversationViewComponent()},u=function(){j.create(d.CONVERSATION_VIEW,{attributes:{pageSection:c.CONVERSATION_VIEW,isReactApp:!0},initialize:r,uninitialize:s,getView:t,handleContainerEvent:function(){}}),j.create(d.CONVERSATION_SORT,{attributes:{pageSection:c.CONVERSATION_SORT,isReactApp:!0},initialize:function(){return p()},uninitialize:function(){return p()},getView:function(){var b=a("MailSuite.Settings.Conversation.Views");return b.getConversationSortComponent()},handleContainerEvent:function(){}})},v=function(){q.props.on("change:toggleSwitchActive",function(a){var b=a.changed.toggleSwitchActive;b=b?1:0,o.set(b)}),o.props.on("change",function(a){q.setProp({toggleSwitchActive:Boolean(a.changed.value)})})};u(),v()}(zmail.Settings.Modules["import"]),function(a){var b="mail-conversation-settings",c=zmText.get("zm-settings-core","conversation.quickNavigatorItems"),d=a("Platform.Components"),e=d.QuickNavigatorSectionManager;e.create(b,{props:{title:c.sectionTitle},state:{selected:!1}})}(zmail.Settings.Modules["import"]),_defineSettingsModule("Integrations",function(a){a.DNOTIFY_SETTING_ID="desktop-notification-toggle",a.TWITTER_SETTING_ID="twitter-integration",a.SMARTMENU_SETTING_ID="smart-menu-toggle",a.CARD_ID="integrations-settings",a.PAGE_ID="integrations-settings",a.APP_ID="sa-integrations-settings",a.CATEGORY_ID="general",a.APPCORE_MODULE_ID="zm-settings-app-integrationsettings"},"MailSuite.Constants"),_defineSettingsModule("Pages",function(a,b){var c=b("Platform.Components"),d=b("Platform.Entities"),e=b("MailSuite.Constants.Integrations"),f=zmText.get("zm-settings-core","integrations.page"),g=c.SettingPageManager,h=d.SettingPage,i=c.SettingAppManager,j=h.Types,k=function(){return zmAppLoader.load(e.APPCORE_MODULE_ID)},l=g.create(e.PAGE_ID,{props:{title:f.title},attributes:{type:j.Title,card:e.PAGE_ID,category:"general",appContainer:!0,pageCSSClass:"integrations-settings-page"}}),m=function(){return k()},n=function(){return k()},o=function(){l.setProp("selectedSection",null)},p=function(){var a=b("MailSuite.Settings.Integration.Views");return a.init()},q=function(a,c){var d,e;"active"===a&&(d=b("MailSuite.Settings.Integration.Views"),e=l.getProp("selectedSection"),d.highlightSection(e)),o()},r=function(){i.create(e.APP_ID,{attributes:{page:e.PAGE_ID,isReactApp:!0},initialize:m,uninitialize:n,getView:p,handleContainerEvent:q})};r(),a.Integrations=l},"MailSuite"),_defineSettingsModule("Cards",function(a,b){var c=zmText.get("zm-settings-core","integrations"),d=b("Platform.Components"),e=b("MailSuite.Constants.Integrations"),f=b("Platform.Entities"),g=b("MailSuite.Pages.Integrations"),h=d.SettingCardManager,i=d.SettingCardItemManager,j=f.SettingCardItem,k=j.Types,l=i.CardItemActions.OpenPageAction(e.PAGE_ID),m=h.create(e.CARD_ID,{props:{openable:!0,title:c.card.title},attributes:{category:e.CATEGORY_ID},openAction:h.CardActions.OpenPageAction(e.PAGE_ID)});i.create("zohoprojects-integ",{props:{title:zmText.applyArgs(c.cardItems.projects.title,{companyName:zmail.globalI18N.companyName}),displayOrder:3,value:zmAdHocSettings.getProjectInteg().enabled&&zmAdHocSettings.getProjectInteg().id?c.cardItems.projects.enabled:c.cardItems.projects.disabled},attributes:{type:k.LabelAction,card:e.CARD_ID},primaryAction:function(){g.setProp({selectedSection:"PRJ"}),l()},secondaryAction:function(){var a=this,b=i.get("zohoprojects-integ"),d=!(b.props.attributes.value===c.cardItems.projects.enabled),e=zmail.projectsInteg.settings.util,f=function(){var b;$.isEmptyObject(zmail.projectsInteg.portalsList)||zmail.projectsInteg.portalsList.every(function(a){return a["default"]&&(b=a,e.updateIntegrationStatus(a.id_string,d)),!a["default"]}),b||a._primaryAction()};zmAdHocSettings.getProjectInteg().id?e.updateIntegrationStatus(zmAdHocSettings.getProjectInteg().id,d):$.isEmptyObject(zmail.projectsInteg.portalsList)?e.fetchPortalsList().done(function(){f()}):f()}}),a.Integrations=m},"MailSuite"),_defineSettingsModule("DesktopNotification",function(a,b){var c,d=b("Platform.Components"),e=b("Platform.Entities"),f=b("MailSuite.Constants.Integrations"),g=b("Platform.System.Utils"),h=b("MailSuite.Pages.Integrations"),i=e.SettingCardItem,j=d.SettingManager,k=i.Types,l=d.SettingCardItemManager,m=zmText.get("zm-settings-core","integrations.desktopNotification"),n={errors:function(a){return"Error occured ! Error Code = "+a},fetch:function(a){var b=g.makeDeferred();return g.debugLog("fetching mail-setting "+f.DNOTIFY_SETTING_ID,a),b.resolve(Boolean(zmail.mailOpt.dtNotify)),b.promise()},save:function(a,b){var c=g.makeDeferred();g.debugLog("saving "+f.DNOTIFY_SETTING_ID,a,b);var d=a?1:0,e={settings:JSON.stringify({notifyDesktop:d}),mode:"viewVO"},h={value:a};return zmAjq.XHR({u:zmail.conPath+"/userSettings.do",t:"POST",fn:function(a,b){c.resolve(b.value)},p:e,csr:"s",ep:h}),c.promise()}},o=l.CardItemActions.OpenPageAction(f.PAGE_ID),p=function(){c=j.create(f.DNOTIFY_SETTING_ID,{props:{defaultValue:!1},type:"boolean",category:f.CATEGORY_ID,persister:n,cardItem:{props:{title:m.title,displayOrder:1},attributes:{type:k.LabelAction,card:f.CARD_ID},transformer:function(a,b){return b=b||{},"props"===a&&b.hasOwnProperty("value")&&(b.value=b.value===!0?m.enabled:m.disabled),b},primaryAction:function(){h.setProp({selectedSection:"DN"}),o()},secondaryAction:function(){var a=j.get(f.DNOTIFY_SETTING_ID),b=a.get()!==!0;a.set(b)}}}),c.initialize()},q=function(){p(),a.Setting=c};q()},"MailSuite.Settings.Integration"),_defineSettingsModule("SmartMenu",function(a,b){var c,d=b("Platform.Components"),e=b("Platform.Entities"),f=b("MailSuite.Constants.Integrations"),g=b("Platform.System.Utils"),h=b("MailSuite.Pages.Integrations"),i=d.SettingManager,j=e.SettingCardItem,k=j.Types,l=d.SettingCardItemManager,m=zmText.get("zm-settings-core","integrations.smartMenu"),n={errors:function(a){return"Error occured ! Error Code = "+a},fetch:function(a){var b=g.makeDeferred();return g.debugLog("fetching mail-setting "+f.SMARTMENU_SETTING_ID,a),b.resolve(zmAdHocSettings.getHelperBlockVisibility()),b.promise()},save:function(a,b){var c=g.makeDeferred();return g.debugLog("saving "+f.SMARTMENU_SETTING_ID,a,b),zmAdHocSettings.setHelperBlockVisibility(a)?c.resolve(a):c.reject(),c.promise()}},o=l.CardItemActions.OpenPageAction(f.PAGE_ID),p=function(){c=i.create(f.SMARTMENU_SETTING_ID,{props:{defaultValue:"0",options:["0","1"]},type:"option",category:f.CATEGORY_ID,persister:n,cardItem:{props:{title:m.title,displayOrder:2},attributes:{type:k.LabelAction,card:f.CARD_ID},transformer:function(a,b){return b=b||{},"props"===a&&b.hasOwnProperty("value")&&(b.value="1"===b.value?m.enabled:m.disabled),b},primaryAction:function(){h.setProp({selectedSection:"SM"}),o()},secondaryAction:function(){var a=i.get(f.SMARTMENU_SETTING_ID),b="0"===a.get()?"1":"0";a.set(b)}}}),c.initialize()},q=function(){p(),a.Setting=c};q()},"MailSuite.Settings.Integration"),_defineSettingsModule("TwitterIntegration",function(a,b){var c,d=b("Platform.Components"),e=b("Platform.Entities"),f=b("MailSuite.Constants.Integrations"),g=b("Platform.System.Utils"),h=b("MailSuite.Pages.Integrations"),i=e.SettingCardItem,j=d.SettingManager,k=i.Types,l=d.SettingCardItemManager,m=zmail.Core.Namespaces.create("zmail.Integrations.twitter"),n=zmText.get("zm-settings-core","integrations.twitter"),o={errors:function(a){return"Error occured ! Error Code = "+a},fetch:function(a){var b,c=g.makeDeferred(),d=function(a){if(a=a||{},b=!1,"success"===a.status){var d=a.data[0];m.twitterData=d,b=1===d.status}else m.twitterData={};c.resolve(b)},e=function(){m.twitterData={error:!0},b=!1,c.resolve(b)};return zmAjq.XHR({u:"/integPlatform/integAction.do",t:"GET",fn:d,p:{action:"GET_CONFIGURED_ACCS",appType:"twitter"},onnetfailure:e,onerror:e}),c.promise()},save:function(a,b){var c=g.makeDeferred();g.debugLog("saving "+f.TWITTER_SETTING_ID,a,b);var d=a?1:2,e=m.twitterData.integId,h={action:"CHANGE_STATUS",integId:e,status:d,appType:"twitter"};return zmAjq.XHR({u:"/integPlatform/integAction.do",t:"POST",fn:function(a){var b=!1;"success"===a.status&&(b=1===a.data.status),c.resolve(b)},onnetfailure:function(){c.reject(400)},onerror:function(){c.reject(404)},p:h}),c.promise()}},p=l.CardItemActions.OpenPageAction(f.PAGE_ID),q=function(){c=j.create(f.TWITTER_SETTING_ID,{props:{defaultValue:!1},type:"boolean",category:f.CATEGORY_ID,persister:o,cardItem:{props:{title:n.title,displayOrder:4},attributes:{type:k.LabelAction,card:f.CARD_ID},transformer:function(a,b){return b=b||{},"props"===a&&b.hasOwnProperty("value")&&(b.value=b.value===!0?n.enabled:n.disabled),b},primaryAction:function(){h.setProp({selectedSection:"TWITTER"}),p()},secondaryAction:function(){h.setProp({selectedSection:"TWITTER"}),p()}}}),m.fetchDeferred=c.initialize()},r=function(){q(),a.Setting=c};_zm.isTwitterIntegrationEnabled()&&r()},"MailSuite.Settings.Integration"),function(a){var b="integration-settings",c={DESKTOP_NOTIFICATIONS:"desktop-notifications",SMART_CREATE_MENU:"smart-create-menu"},d=zmText.get("zm-settings-core","integrations.quickNavigatorItems"),e=a("Platform.Components"),f=a("MailSuite.Constants.Integrations"),g=e.QuickNavigatorSectionManager,h=e.QuickNavigatorItemManager;g.create(b,{props:{title:d.sectionTitle},state:{selected:!1}}),h.create(c.DESKTOP_NOTIFICATIONS,{props:{title:d.desktopNotificationsTitle,linkedPage:f.PAGE_ID,selectable:!0},attributes:{section:b}}),h.create(c.SMART_CREATE_MENU,{props:{title:d.smartCreateMenuTitle,linkedPage:f.PAGE_ID,selectable:!0},attributes:{section:b}})}(zmail.Settings.Modules["import"]),function(){window.zmail=window.zmail||{},window.zmail.integConfigSettings=function(a,b){b=b||"",b=JSON.parse(b),$.publish("integration/configure",{type:a,data:b})}}(),_defineSettingsModule("FolderSettings",function(a,b){var c,d,e=b("Platform.Components"),f=b("Platform.Entities"),g=b("Platform.System.Utils"),h=e.SettingCardManager,i=e.SettingCardItemManager,j=e.SettingPageManager,k=e.SettingAppManager,l=f.SettingPage,m=f.SettingCardItem,n=l.Types,o=m.Types,p=zmText.get("zm-settings-core","folders.labels"),q={CARD_ID:"folders",PAGE_ID:"folders",APP_ID:"sa-folders",CATEGORY_ID:"mail",FOLDER_PROP_CARD_ITEM_ID:"folder-props",NEW_FOLDER_CARD_ITEM_ID:"new-folder",ARCHIVE_POLICY_CARD_ITEM_ID:"archive-policy",APPCORE_MODULE_ID:"zm-settings-app-foldersettings",APPCORE_MODULE_NAMESPACE:"MailSuite.Apps.FolderSettings.AppCore"},r=function(){h.create(q.CARD_ID,{props:{title:p.title,openable:!0},attributes:{category:q.CATEGORY_ID},openAction:h.CardActions.OpenPageAction(q.PAGE_ID)})},s=function(){i.create(q.NEW_FOLDER_CARD_ITEM_ID,{props:{title:p.createFolder,loadFrameworkOnCommandExecution:!1},attributes:{type:o.Action,card:q.CARD_ID},primaryAction:function(){zmfolAction.showCreateFolderPopUp({noMask:!1,noAnchor:!0,mode:"new"})}}),i.create(q.FOLDER_PROP_CARD_ITEM_ID,{props:{title:p.manageNotifications},attributes:{type:o.Action,card:q.CARD_ID},primaryAction:i.CardItemActions.OpenPageAction(q.PAGE_ID)})},t=function(){d=j.create(q.PAGE_ID,{props:{title:p.title},attributes:{type:n.TitleChoiceMenu,card:q.PAGE_ID,category:"mail",appContainer:!0,pageCSSClass:"folder-settings"}})},u=function(){return zmAppLoader.load(q.APPCORE_MODULE_ID)},v=function(){return b(q.APPCORE_MODULE_NAMESPACE)},w=function(){var a=g.makeDeferred();return u().done(function(){v().initialize({progress:a})}).fail(function(){g.debugLog("Module load failed !!!"),a.reject()}),a.promise()},x=function(){var a=g.makeDeferred();return u().done(function(){v().uninitialize({progress:a})}),a.promise()},y=function(){return v().getAppView()},z=function(a,b){var c=v();c&&c.handleContainerEvent(a,b)},A=function(){c=k.create(q.APP_ID,{attributes:{page:q.PAGE_ID,isReactApp:!0},initialize:w,uninitialize:x,getView:y,handleContainerEvent:z})},B=function(){r(),s(),t(),A(),a.Constants=q,a.App=c,a.Page=d};B()},"MailSuite.Apps"),_defineSettingsModule("ArchivePolicy",function(a,b){var c,d,e=b("Platform.Components"),f=b("Platform.Entities"),g=b("Platform.System.Utils"),h=e.SettingPageManager,i=e.SettingAppManager,j=f.SettingPage,k=e.SettingCardManager,l=e.SettingCardItemManager,m=f.SettingCardItem,n=j.Types,o=m.Types,p=zmText.get("zm-settings-core","archivePolicy"),q={CARD_ID:"archivepolicy",PAGE_ID:"archivepolicy",APP_ID:"sa-archivepolicy",CATEGORY_ID:"mail",APPCORE_MODULE_ID:"zm-settings-app-archivepolicy",ARCHIVE_POLICY_CARD_ITEM_ID:"archive-policy",APPCORE_MODULE_NAMESPACE:"MailSuite.Apps.ArchivePolicy.AppCore"},r=null,s=function(){return zmAppLoader.load(q.APPCORE_MODULE_ID)},t=function(){return b(q.APPCORE_MODULE_NAMESPACE)},u=function(){k.create(q.CARD_ID,{props:{title:p.labels.title,openable:!0},attributes:{category:q.CATEGORY_ID},openAction:k.CardActions.OpenPageAction(q.PAGE_ID)})},v=function(){l.create(q.ARCHIVE_POLICY_CARD_ITEM_ID,{props:{title:p.labels.title},attributes:{type:o.Action,card:q.CARD_ID},primaryAction:l.CardItemActions.OpenPageAction("archivepolicy")})},w=function(){d=h.create(q.PAGE_ID,{props:{title:p.labels.title},attributes:{type:n.TitleChoiceMenu,appContainer:!0,card:q.PAGE_ID,category:"mail",pageCSSClass:"archive-policy"},onComponentCreate:function(a){r=a}})},x=function(){var a=g.makeDeferred();return s().done(function(){t().initialize({settingPageComponent:r,progress:a})}).fail(function(){g.debugLog("Module load failed !!!"),a.reject()}),a.promise()},y=function(){var a=g.makeDeferred();return s().done(function(){t().uninitialize({progress:a}),c=null,d=null,r=null}),a.promise()},z=function(){return t().getAppView()},A=function(a,b){t().handleAppContainerEvent(a,b)},B=function(){c=i.create(q.APP_ID,{attributes:{page:q.PAGE_ID,isReactApp:!0},initialize:x,uninitialize:y,getView:z,handleContainerEvent:A})},C=function(){u(),v(),w(),B(),a.Constants=q,a.App=c,a.Page=d};C()},"MailSuite.Apps"),_defineSettingsModule("Filter",function(a,b){var c,d,e,f=b("Platform.Components"),g=b("Platform.Entities"),h=b("Platform.System.Utils"),i=f.SettingCardManager,j=f.SettingCardItemManager,k=f.SettingPageManager,l=f.SettingAppManager,m=g.SettingPage,n=g.SettingCardItem,o=m.Types,p=n.Types,q=zmText.get("zm-settings-core","filters"),r={title:q.title,createFilter:q.createNew,importFilter:q.importFilter,exportFilter:q.exportFilter,smartFilters:q.smartFilters,enabled:q.enabled,disabled:q.disabled},s={CARD_ID:"filters",PAGE_ID:"filters",APP_ID:"sa-filters",CATEGORY_ID:"mail",CREATE_FILTER_CARD_ITEM_ID:"create-filter",IMPORT_FILTER_CARD_ITEM_ID:"import-filter",EXPORT_FILTER_CARD_ITEM_ID:"export-filter",SMART_FILTER_CARD_ITEM_ID:"smart-filters",APPCORE_MODULE_ID:"zm-settings-app-filters"},t=f.SettingManager,u="smart-filter",v={errors:function(a){return"Error occured ! Error Code = "+a},fetch:function(a){var b=h.makeDeferred();return h.debugLog("fetching mail-setting "+u,a),Backbone.ajax({url:zmail.conPath+"/filter.do",data:{accId:zmail.accId,mode:"getSmartFilterStatus"}}).done(function(a){1===a[0]&&b.resolve(Boolean(a[1].SmartFilterStatus))}),b.promise()},save:function(b,c){var d=h.makeDeferred();return h.debugLog("saving "+u,b,c),Backbone.ajax({url:zmail.conPath+"/filter.do",data:{mode:b?"enableSmartFilter":"disableSmartFilter",accId:zmail.accId}}).done(function(c){if(a.Models&&a.Models.FilterCollection.resetAndFetchCollectionOf(0,!0),b){var e,f=q.longDesc,g={title:r.smartFilters,$content:f,right:[],buttons:[{name:zmText.get("dialog","ok"),selected:!0}]};g.buttons[0].callback=function(){e.remove()},e=Dialog["new"](g),d.resolve(!b)}}),d.promise()}},w=t.create(u,{props:{defaultValue:!1},persister:v,type:"boolean",category:"filter"});w.initialize();var x=function(){i.create(s.CARD_ID,{props:{addToSearch:!1,title:r.title,openable:!0},attributes:{category:s.CATEGORY_ID},openAction:function(){i.CardActions.OpenPageAction(s.PAGE_ID)()}})},y=function(){return zmAppLoader.load(s.APPCORE_MODULE_ID)},z=function(){j.create(s.CREATE_FILTER_CARD_ITEM_ID,{props:{title:r.createFilter},attributes:{type:p.Action,card:s.CARD_ID},primaryAction:function(){d.setProp({showNewFilter:!0}),j.CardItemActions.OpenPageAction(s.PAGE_ID)()}}),j.create(s.IMPORT_FILTER_CARD_ITEM_ID,{props:{title:r.importFilter},attributes:{type:p.Action,card:s.CARD_ID},primaryAction:function(){y().then(function(){b("Apps.Filter.Views.Utils").importFilters()})}}),j.create(s.EXPORT_FILTER_CARD_ITEM_ID,{props:{title:r.exportFilter},attributes:{type:p.Action,card:s.CARD_ID},primaryAction:function(){y().then(function(){b("Apps.Filter.Views.Utils").exportFilters()})}}),e=j.create(s.SMART_FILTER_CARD_ITEM_ID,{props:{title:r.smartFilters},attributes:{type:p.LabelAction,card:s.CARD_ID},transformer:function(a,b){return b=b||{},"props"===a&&b.hasOwnProperty("value")&&(b.value=b.value===!0?r.enabled:r.disabled),b},primaryAction:function(){d.setProp({showNewFilter:!0}),j.CardItemActions.OpenPageAction(s.PAGE_ID)()},secondaryAction:function(){var a=w.get()!==!0;w.set(a)}})},A=function(){var a=b("Apps.Filter.Views.UIComponents");ReactDOM.render(React.createElement(a.AccountsBand),c.getHeaderComponentWrapper())},B=function(){ReactDOM.unmountComponentAtNode(c.getHeaderComponentWrapper())},C=function(){k.create(s.PAGE_ID,{props:{title:r.title,showTitle:!0},attributes:{type:o.Title,card:s.PAGE_ID,category:"mail",appContainer:!0,pageCSSClass:"filters-setting-app"},onComponentCreate:function(a){c=a}})},D=function(){return y().done(function(){A()})},E=function(){B(),b("Apps.Filter.Views.Utils")._reset()},F=function(){d.getProp().showNewFilter&&(b("Apps.Filter.Events").trigger("create-new-filter"),d.setProp({showNewFilter:!1}))},G=function(){b("Apps.Filter.Views.Utils")._reset()},H=function(){d=l.create(s.APP_ID,{attributes:{page:s.PAGE_ID,isReactApp:!0},initialize:D,uninitialize:E,getView:function(){var a=zmail.Settings.Apps.Filter.Views.UIComponents;return React.createElement(a.FilterRowContainerWrapper)},handleContainerEvent:function(a,b){h.debugLog("Container event",a,b),"active"===a?F():(G(),zmail.Settings.Apps.Filter.Views.Utils.removeSmartFilterBand())}})},I=function(){x(),z(),C(),H(),j.bindSetting(e,w)};return I(),a.smartFilterSetting=w,a},"Apps"),function(){var a=zmail.Settings.Platform.Commands,b=zmail.Settings.SearchCommandIntegrator,c=zmText.get("zm-settings-core","filters.commands");a.register([{command:"filters",title:c.labels.filters,on:"goto",executeDependentCommands:!1,callback:function(){var a=this;b.showAutoFill(a.getDependentCommands())}},{command:"goto-filter-app",title:c.labels.gotoPage+" ...",on:"filters",base:"filters",isSearchable:!1,callback:function(){a.execute("load-filters")}},{command:"import-filter",title:c.labels.importFilters,on:"filters",base:"filters",callback:function(){a.execute("load-filters").done(function(){zmail.Settings.Apps.Filter.Views.Utils.importFilters()})}},{command:"export-filter",title:c.labels.exportFilters,on:"filters",base:"filters",callback:function(){a.execute("load-filters").done(function(){zmail.Settings.Apps.Filter.Views.Utils.exportFilters()})}},{command:"create-new-filter",title:c.labels.createFilter,on:"filters",base:"filters",callback:function(){a.execute("load-filters").done(function(){zmail.Settings.Apps.Filter.Events.trigger("show-filter-bottom-band"),zmail.Settings.Apps.Filter.Events.trigger("create-new-filter")})}},{command:"edit-filters",title:c.labels.editFilters,on:"filters",base:"filters",callback:function(){a.execute("load-filters").done(function(){var a=_(zmail.Settings.Apps.Filter.Models.getFilterNamesAndId()).map(function(a){return{command:a.id,title:a.name,base:"filters edit-filters"}});zmail.Settings.Apps.Filter.Events.trigger("show-filter-bottom-band"),a&&a.length>0&&b.showAutoFill(a,{callback:function(a){a&&a.command&&zmail.Settings.Apps.Filter.Events.trigger("edit-filter"+a.command)}})})}},{command:"recommand-filters",title:c.labels.createFilterFrom,on:"filters",base:"filters",callback:function(){a.execute("load-filters").done(function(){var a=_(zmail.Settings.Apps.Filter.Models.getRecommendationNamesAndId()).map(function(a){return{command:a.id,title:a.name,base:"filters recommand-filters"}});zmail.Settings.Apps.Filter.Events.trigger("show-recommendation-bottom-band"),a&&a.length>0&&b.showAutoFill(a,{callback:function(a){a&&a.command&&zmail.Settings.Apps.Filter.Events.trigger("edit-filter"+a.command)}})})}}])}(),_defineSettingsModule("Signature",function(a,b){var c,d=b("Platform.Components"),e=b("Platform.Entities"),f=b("Platform.System.Utils"),g=d.SettingCardManager,h=d.SettingCardItemManager,i=d.SettingPageManager,j=d.SettingAppManager,k=e.SettingPage,l=e.SettingCardItem,m=k.Types,n=l.Types,o=zmText.get("zm-settings-core","signature.labels"),p={CARD_ID:"signatures",PAGE_ID:"signatures",APP_ID:"sa-signatures",SIGNATURE_NEW_CARD_ITEM_ID:"signature-new",CATEGORY_ID:"mail",APPCORE_MODULE_ID:"zm-settings-app-signature"},q=h.CardItemActions.OpenPageAction(p.PAGE_ID),r=function(){g.create(p.CARD_ID,{props:{title:o.title,openable:!0},attributes:{category:p.CATEGORY_ID},openAction:g.CardActions.OpenPageAction(p.PAGE_ID)})},s=function(){i.create(p.PAGE_ID,{props:{title:o.title},attributes:{type:m.Title,card:p.PAGE_ID,category:"mail",appContainer:!0,pageCSSClass:"signature-setting-app"}})},t=function(){return zmAppLoader.load(p.APPCORE_MODULE_ID)},u=function(){var a=f.makeDeferred();return t().done(function(){zmail.Settings.Apps.Signature.initRequest().done(function(){a.resolve()})}).fail(function(){a.reject()}),a.promise()},v=function(){var a=f.makeDeferred();return t().done(function(){a.resolve()}),a.promise()},w=function(){var a=null;return a=zmail.Settings.Apps.Signature.init()},x=function(a,c){var d=b("Apps.Signature");d&&d.handleContainerEvent(a,c)},y=function(){c=j.create(p.APP_ID,{attributes:{page:p.PAGE_ID,isReactApp:!0},initialize:u,uninitialize:v,getView:w,handleContainerEvent:x})},z=function(){h.create(p.SIGNATURE_NEW_CARD_ITEM_ID,{props:{title:o.addNewSignature},attributes:{type:n.Action,card:p.CARD_ID},primaryAction:function(){c.setProp({openNew:!0}),q()}})},A=function(){r(),z(),s(),y(),a.App=c};A()},"Apps"),function(){var a=zmail.Settings.Modules,b=a["import"]("Apps.Signature"),c=function(a,b,c,d,e){var f;a.dataURI&&(a.file=zmCUtil.dataURItoBlob(a.dataURI)),zmAttachComponent.imageEditTool.init({file:a.file,onAttach:function(b){a.file=b.blob,f()},onClose:function(){},handBckObj:function(){}}),f=function(){if(a.file){var b,f="pastImg",g=(new Date).getTime()+".png",h=0;if(a&&a.file){if(a.file&&(b=a.file,a.file.name&&(g=a.file.name)),g.lastIndexOf(".")!==-1){var i=g.substr(g.lastIndexOf("."));"png"!==i&&(g+=".png")}else g+=".png";a.file.size&&(h=a.file.size)}var j=3145728;if(h>j){var k=zmText.get("zm-settings-app-signature"),l=k.imageupload_size_exceeds;Dialog.alert(l)}var m=new XMLHttpRequest;m.upload.addEventListener("loadstart",function(){c(f)},!1);var n=new FormData,o=zmAjq.getCookie("zmcsr");n.append("aId",zmail.accId),n.append("frm","c"),n.append("uploadMode","drop"),n.append("mode","composeSet"),n.append("context","zm"),n.append("zmrcsr",o),n.append("img_file",b,g),m.onreadystatechange=function(){if(4===m.readyState)if(200===m.status){var a,b=$.parseJSON(m.responseText),c=b.fileName,g=b.aId,h=b.storeName,i=b.frm;c&&g&&h&&i?(a="/mail/ImageSignature?fileName="+c,a+="&accountId="+g+"&storeName="+h,"c"===i&&(a+="&frm=c"),d(a,f)):e(f)}else e(500===m.status||400===m.status?f:f)},m.open("POST",zmail.conPath+"/zeUploadImage.do",!0),m.send(n)}}};b.inlineImage=c}(),_defineSettingsModule("VacationReply",function(a,b){var c,d=b("Platform.Components"),e=b("Platform.Entities"),f=b("Platform.System.Utils"),g=d.SettingCardManager,h=d.SettingCardItemManager,i=d.SettingPageManager,j=d.SettingAppManager,k=e.SettingPage,l=e.SettingCardItem,m=k.Types,n=l.Types,o=zmText.get("zm-settings-core","vacationreply"),p={CARD_ID:"vacationreply",PAGE_ID:"vacationreply",APP_ID:"sa-vacationreply",CATEGORY_ID:"mail",APPCORE_MODULE_ID:"zm-settings-app-vacationreply",VACATIONREPLY_NEW_CARD_ITEM_ID:"vacationreply-new"},q=g.CardActions.OpenPageAction(p.PAGE_ID),r=function(){g.create(p.CARD_ID,{props:{title:o.title,openable:!0},attributes:{category:p.CATEGORY_ID},openAction:g.CardActions.OpenPageAction(p.PAGE_ID)})},s=function(){i.create(p.PAGE_ID,{props:{title:o.title},attributes:{type:m.TitleChoiceMenu,card:p.PAGE_ID,category:"mail",appContainer:!0,pageCSSClass:"vacationreply-setting-app"}})},t=function(){return zmAppLoader.load(p.APPCORE_MODULE_ID);
},u=function(){var a=f.makeDeferred();return t().done(function(){zmail.Settings.Apps.VacationReply.initRequest(),a.resolve()}).fail(function(){a.reject()}),a.promise()},v=function(){var a=f.makeDeferred();return t().done(function(){zmail.Settings.Apps.VacationReply.clearTrace(),a.resolve()}),a.promise()},w=function(){var a=null;return a=zmail.Settings.Apps.VacationReply.init()},x=function(a,c){var d=b("Apps.VacationReply");d&&d.handleContainerEvent(a,c)},y=function(){c=j.create(p.APP_ID,{attributes:{page:p.PAGE_ID,isReactApp:!0},initialize:u,uninitialize:v,getView:w,handleContainerEvent:x})},z=function(){h.create(p.VACATIONREPLY_NEW_CARD_ITEM_ID,{props:{title:o.createNew},attributes:{type:n.Action,card:p.CARD_ID},primaryAction:function(){c.setProp({openNew:!0}),q()}})},A=function(){r(),z(),s(),y(),a.App=c};A()},"Apps"),_defineSettingsModule("AntiSpam",function(a,b){var c,d=b("Platform.Components"),e=b("Platform.Entities"),f=b("Platform.System.Utils"),g=d.SettingCardManager,h=d.SettingCardItemManager,i=d.SettingPageManager,j=d.SettingAppManager,k=e.SettingPage,l=e.SettingCardItem,m=k.Types,n=l.Types,o=zmText.get("zm-settings-core","antispam"),p={title:o.title,blackListDomain:o.blkListDomainCardTitle,whiteListDomain:o.whtListDomainCardTitle,blackListEmail:o.blkListEmailCardTitle,whiteListEmail:o.whtListEmailCardTitle},q={CARD_ID:"antispam",PAGE_ID:"antispam",APP_ID:"antispam",CATEGORY_ID:"mail",APPCORE_MODULE_ID:"zm-settings-app-antispam",BLACK_LIST_DOMAIN_ID:"domain-black-list",WHITE_LIST_DOMAIN_ID:"domain-white-list",BLACK_LIST_EMAIL_ID:"email-black-list",WHITE_LIST_EMAIL_ID:"email-white-list"},r=function(){g.CardActions.OpenPageAction(q.PAGE_ID)()},s=function(){g.create(q.CARD_ID,{props:{title:p.title,openable:!0},attributes:{category:q.CATEGORY_ID},openAction:r})},t=function(){var a=b("Apps.AntiSpam.Views.UIComponents");ReactDOM.render(React.createElement(a.StatusBand),c.getHeaderComponentWrapper())},u=function(){ReactDOM.unmountComponentAtNode(c.getHeaderComponentWrapper())},v=function(){return zmAppLoader.load(q.APPCORE_MODULE_ID)},w=function(){h.create(q.WHITE_LIST_DOMAIN_ID,{props:{title:p.whiteListDomain},attributes:{type:n.Action,card:q.CARD_ID},primaryAction:r}),h.create(q.BLACK_LIST_DOMAIN_ID,{props:{title:p.blackListDomain},attributes:{type:n.Action,card:q.CARD_ID},primaryAction:r}),h.create(q.WHITE_LIST_EMAIL_ID,{props:{title:p.whiteListEmail},attributes:{type:n.Action,card:q.CARD_ID},primaryAction:r}),h.create(q.BLACK_LIST_EMAIL_ID,{props:{title:p.blackListEmail},attributes:{type:n.Action,card:q.CARD_ID},primaryAction:r})},x=function(){i.create(q.PAGE_ID,{props:{title:o.pageTitle},attributes:{type:m.Title,card:q.PAGE_ID,category:"mail",appContainer:!0,pageClassNames:["SC_oHide"],pageCSSClass:"antispam-setting-app"},onComponentCreate:function(a){c=a}})},y=function(){return v().done(function(){t()})},z=function(){var a=b("Apps.AntiSpam.Models");a&&_.isFunction(a.clearModels)&&a.clearModels(),u()},A=function(){j.create(q.APP_ID,{attributes:{page:q.PAGE_ID,isReactApp:!0},initialize:y,uninitialize:z,getView:function(){var a=zmail.Settings.Apps.AntiSpam.Views.UIComponents;return React.createElement(a.Wrapper,{displayName:"AntiSpamWrapper"})},handleContainerEvent:function(a,b){f.debugLog("Container event",a,b)}})},B=function(){s(),w(),x(),A()};B()},"MailSuite.Apps"),_defineSettingsModule("ImportExport",function(a,b){var c,d=b("Platform.Components"),e=b("Platform.Entities"),f=b("Platform.System.Utils"),g=d.SettingCardManager,h=d.SettingCardItemManager,i=d.SettingPageManager,j=d.SettingAppManager,k=e.SettingPage,l=e.SettingCardItem,m=k.Types,n=l.Types,o=zmText.get("zm-settings-core","importexport"),p={title:o.title,importLog:o.importLog,exportLog:o.exportLog},q={CARD_ID:"importexport",PAGE_ID:"importexport",APP_ID:"sa-importexport",CATEGORY_ID:"mail",APPCORE_MODULE_ID:"zm-settings-app-importexport",IMPORT_LOG_CARD_ITEM_ID:"import-log",EXPORT_LOG_CARD_ITEM_ID:"export-log"},r=function(){g.create(q.CARD_ID,{props:{addToSearch:!1,title:p.title,openable:!0},attributes:{category:q.CATEGORY_ID},openAction:function(){g.CardActions.OpenPageAction(q.PAGE_ID)()}})},s=function(){var a=b("Apps.ImportExport.Views.UIComponents");ReactDOM.render(React.createElement(a.AccountsBand),c.getHeaderComponentWrapper())},t=function(){ReactDOM.unmountComponentAtNode(c.getHeaderComponentWrapper())},u=function(){return zmAppLoader.load(q.APPCORE_MODULE_ID)},v=function(){h.create(q.IMPORT_LOG_CARD_ITEM_ID,{props:{title:p.importLog},attributes:{type:n.Action,card:q.CARD_ID},primaryAction:function(){u().then(function(){h.CardItemActions.OpenPageAction(q.PAGE_ID)(),b("Apps.ImportExport.Views.Utils").showImportList()})}}),h.create(q.EXPORT_LOG_CARD_ITEM_ID,{props:{title:p.exportLog},attributes:{type:n.Action,card:q.CARD_ID},primaryAction:function(){u().then(function(){h.CardItemActions.OpenPageAction(q.PAGE_ID)(),b("Apps.ImportExport.Views.Utils").showExportList()})}})},w=function(){i.create(q.PAGE_ID,{props:{title:p.title,showTitle:!0},attributes:{type:m.Title,card:q.PAGE_ID,category:"mail",appContainer:!0,pageCSSClass:"importexport-setting-app"},onComponentCreate:function(a){c=a}})},x=function(){return u().done(function(){s()})},y=function(){var a=b("Apps.ImportExport.Models");a.ImportList.getCollection().uninitialize(),a.ExportList.getCollection().uninitialize(),t()},z=function(){j.create(q.APP_ID,{attributes:{page:q.PAGE_ID,isReactApp:!0},initialize:x,uninitialize:y,getView:function(){var a=b("Apps.ImportExport.Views.UIComponents");return React.createElement(a.ImportExportWrapper,{displayName:"ImportexportWrapper"})},handleContainerEvent:function(a,b){f.debugLog("Container event",a,b)}})},A=function(){r(),v(),w(),z()};A()},"MailSuite.Apps"),function(){var a=zmail.Settings.Platform.Commands,b=zmail.Settings.SearchCommandIntegrator,c=zmText.get("zm-settings-core","importexport.commands");a.register([{command:"importexport",title:c.importExport,on:"goto",executeDependentCommands:!1,callback:function(){var c=this;a.execute("load-importexport").then(function(){b.showAutoFill(c.getDependentCommands())})}},{command:"show-export-log",title:c.showExportLog,on:"importexport",base:"importexport",callback:function(){a.execute("load-importexport").done(function(){zmail.Settings.Apps.ImportExport.Views.Utils.showExportList()})}},{command:"show-import-log",title:c.showImportLog,on:"importexport",base:"importexport",callback:function(){a.execute("load-importexport").done(function(){zmail.Settings.Apps.ImportExport.Views.Utils.showImportList()})}}])}(),function(){var a=zmail.Settings.Modules,b=a.create("Apps.SendMailAs.models");b.accountInfo=Zmail.Model.extend({defaults:{},initialize:function(){},idAttribute:"accId",validate:function(){},parse:function(a){var b={};return b.accId=a.accId||a.acId,b.sendId=a.sendId,b.emailId=a.eMail,b},url:zmail.conPath+"/jsp/sendMailAs.jsp",serialized:function(a,b){var c=this,d=null;return"delete"===a&&(d={mode:"delete",accId:c.id}),d},fetchContent:function(a){return this.sync("get",this,a).done(function(a){})}},{})}(),function(){var a=zmail.Settings.Modules,b=a.create("Apps.SendMailAs.models"),c={GET_LIST:"getList"};b.accIdCollection=Zmail.Collection.extend({initialize:function(){},model:b.accountInfo,url:zmail.conPath+"/jsp/sendMailAs.jsp",serialized:function(a,b){var d=null;return"read"===a&&(d={mode:c.GET_LIST}),d},fetchCompleted:!1,fetchList:function(){return this.fetch()},parse:function(a,b){var c=[];return"object"==typeof a?(a.acId||a.accId)&&(c=[a]):Array.isArray(c)&&(c=_(a).each(function(a){(a.acId||a.accId)&&c.push(a)})),c},resetAndSetAll:function(a){}},{getCollection:function(){}})}(),function(){var a=zmail.Settings.Modules,b=a.create("Apps.SendMailAs.models"),c={SERVERDETAIL_FETCH_STARTED:"FETCH_STARTED",SERVERDETAIL_FETCH_COMPLETED:"FETCH_COMPLETED"};b.SendMailAs=Zmail.Model.extend({defaults:{isDefault:!1,dispName:"",isGroup:!1,isEnabled:!1,isAliasOrGroup:!1,serverDetails:{}},initialize:function(){},serverDataFetched:!1,idAttribute:"sendId",validate:function(){},parse:function(a){var b={};return b.sendId=a.sendId,b.isEnabled=a.isAlias&&"true"===a.isAlias,b.isGroup=a.group&&"true"===a.group,b.isAliasOrGroup=a.isZoho&&"true"===a.isZoho,b.isDefault=a.defaut&&"true"===a.defaut,b.dispName=a.dispName||"",b.fromAddr=a.fromAddr||"",b},url:zmail.conPath+"/sendMailAs.do",serialized:function(a,b){var c,d=this,e=null,f=d.get("isAliasOrGroup");return"delete"===a?e={mode:"frmDelete",smId:d.id}:"frmEdit"===a?e={mode:"frmEdit",smId:d.id,isDef:d.get("isDefault")}:"addNew"===a?(e={mode:"frmSave",dispName:b.dispName,emailId:b.emailId},b.isZoho?e.isZ=!0:(e.smtpServer=b.smtpServer,e.smtpPort=b.smtpPort,e.sslMode=b.sslMode,b.auth&&(e.uName=b.uName,e.pass=b.pass))):"update"===a?(e={smId:d.id,dispName:b.dispName,emailId:b.emailId},f?c="frmZacc":(c="frmUpdate",e.otMode=b.accMode,b.isZoho?e.isZ=!0:(e.smtpServer=b.smtpServer,e.smtpPort=b.smtpPort,e.sslMode=b.sslMode,b.auth&&(e.uName=b.uName,e.pass=b.pass))),e.mode=c):"resendCode"===a?e={smId:d.id,emailId:d.get("fromAddr"),mode:"frmResend"}:"verify"===a&&(e={smId:d.id,emailId:d.get("fromAddr"),mode:"frmVerify",vCode:b.code}),e},fetchContent:function(a){return this.sync("get",this,a).done(function(a){})},updateServerDetails:function(a){var b=this,c={mode:a[0],name:a[1]};a[2]&&(c.server=a[2]),b.set({serverDetails:c})},fetchServerDetails:function(a){var b=this;return b.serverDataFetched=!1,b.trigger(c.FETCH_STARTED),this.sync("frmEdit",this,a).done(function(a){var d;b.serverDataFetched=!0,1===a[0]&&(d=a[1],b.updateServerDetails(d)),b.trigger(c.FETCH_STARTED)})},persistData:function(a,b){var c=this,d=$.Deferred();switch(a){case"addNew":c.sync(a,c,b).done(function(a){var b,e,f,g,h,i,j={};if(1===a[0]){if(b=a[1],b=b[0],"Success"===b.oth.st){for(f=Object.keys(b.fact),g=f.length,h=0;h<g;h++)if(b.fact[f[h]].fromAddr===b.semId.emId){e=b.fact[f[h]].sendId;break}c.set({sendId:e}),i=!0,"undefined"!=typeof b.vfyst&&"false"===b.vfyst&&(i=!1),c.set({isEnabled:i}),j.stat="s"}else j.stat="e",j.msg=b.oth.msg;d.resolve(j)}d.reject()}).fail(function(){d.reject()});break;case"update":c.sync(a,c,b).done(function(a){var e,f={};1===a[0]&&(e=a[1],e=e[0],"Success"===e.oth.st?(c.set({dispName:b.dispName,serverDetails:{}}),f.stat="s"):"Error"===e.oth.st&&(f.stat="e",f.msg=e.oth.msg),d.resolve(f)),d.reject()}).fail(function(a){d.reject()});break;case"delete":c.sync(a,c,b).done(function(a){1===a[0]&&d.resolve(),d.resolve()});break;case"resendCode":c.sync(a,c,b).done(function(a){var b,c={};1===a[0]&&(b=a[1],b=b[0],"Error"===b.oth.st?c.status="e":c.status="s",c.msg=b.oth.msg,d.resolve(c)),d.reject()}).fail(function(){d.reject()});break;case"verify":c.sync(a,c,b).done(function(a){var b,e={};1===a[0]?(b=a[1],b=b[0],"Error"===b.oth.st?e.status="e":(e.status="s",c.set({isEnabled:!0})),e.msg=b.oth.msg,d.resolve(e)):(e.status="e",d.reject(e))}).fail(function(){d.reject()});break;default:d.reject()}return d.promise()}},{})}(),function(){var a=zmail.Settings.Modules,b=a.create("Apps.SendMailAs.models"),c={GET_LIST:"frmList"};b.SendMailAsCollection=Zmail.Collection.extend({initialize:function(){},model:b.SendMailAs,url:zmail.conPath+"/sendMailAs.do",serialized:function(a,b){var d=null;return"read"===a&&(d={mode:c.GET_LIST}),d},fetchCompleted:!1,fetchList:function(){var a=this;return a.fetchCompleted=!1,this.fetch().done(function(){a.fetchCompleted=!0})},parse:function(a,b){a=a[0];var c=a.fact,d=[];return _(c).forEach(function(a){a.sendId&&d.push(a)}),d},resetAndSetAll:function(a){var b=this;b.reset()}},{getCollection:function(){}})}(),function(){var a=zmail.Settings.Modules,b=a["import"]("Apps.SendMailAs.models"),c=zmText.get("zm-settings-core","sendmailas"),d={FETCH_STARTED:"FETCH_STARTED",FETCH_COMPLETED:"FETCH_COMPLETED"},e=b.SendMailAsCollection,f=b.accIdCollection,g=null,h=null,i=$.Deferred(),j=function(){g.trigger(d.FETCH_STARTED),g.fetchList().done(function(a){i.resolve(),1===a[0]&&(a=a[1]);var b=a[0].acLst;_(b).forEach(function(a){h.add(a,{parse:!0})}),g.trigger(d.FETCH_COMPLETED)})},k=function(a){$.publish("FROM_ADDRESS/CHANGE",{attr:a.attributes,dispName:a.get("dispName"),emailId:a.get("fromAddr")})},l=function(a){$.publish("FROM_ADDRESS/ADD",{id:a.id,dispName:a.get("dispName"),emailId:a.get("fromAddr"),attr:a.attributes})},m=function(a){$.publish("FROM_ADDRESS/REMOVE",{id:a.id,emailId:a.get("fromAddr")})},n=function(){g.on("change:dispName",k),g.on("change:isEnabled",k),g.on("add",l),g.on("remove",m)},o=function(){g=new e,h=new f,j(),n()},p=function(){return i=$.Deferred(),g.reset(),h.reset(),j()},q=function(){return h},r=function(){return g},s=function(a,b){return a.persistData("addNew",b).done(function(b){"s"===b.stat?(g.add(a),zmUtil.succErrMsg("s",c.succMsg.added)):zmUtil.succErrMsg("e",b.msg)})},t=function(a){var b=g.get(a);return b.persistData("delete",{}).done(function(){g.remove(a),zmUtil.succErrMsg("s",c.succMsg.deleted)})},u=function(a){var b=g.get(a);return b.persistData("resendCode",{})},v=function(a,b){var c=g.get(a);return c.persistData("verify",{code:b})};o(),b.resetAndFetch=p,b.getSendMailAsCollection=r,b.getAccInfoCollection=q,b.deleteModel=t,b.addNewModel=s,b.resendConfirmation=u,b.verifyFromAddress=v,b.sendMailCollectionDeferred=i}(),_defineSettingsModule("models",function(a,b,c){var d={},e=function(a){return{id:a.id,dispName:a.get("dispName"),emailId:a.get("fromAddr"),isEnabled:a.get("isEnabled")}},f=function(){var a,b=c.getSendMailAsCollection(),d=[];return b.forEach(function(b){a=b.get("isEnabled"),a&&d.push(e(b))}),d},g=function(){var a=c.getSendMailAsCollection(),b=[];return a.forEach(function(a){b.push(e(a))}),b},h=function(a){var b,d=c.getSendMailAsCollection();if(a&&(b=d.get(a)))return e(b)},i=function(){var a=0,b=c.getSendMailAsCollection();return b.forEach(function(b){b.get("isEnabled")||a++}),a},j=function(){var a=0,b=c.getSendMailAsCollection();return b.forEach(function(b){!b.get("isAliasOrGroup")||b.get("isGroup")||b.get("isDefault")||a++}),a};d.getConfirmedList=f,d.getFromAddressList=g,d.getFromAddrDetails=h,d.getUnverifiedListCount=i,d.getAliasListCount=j,a.API=d},"Apps.SendMailAs"),_defineSettingsModule("Validators",function(a,b){var c=zmail.Utils.EmailValidator,d=zmText.get("zm-settings-core","sendmailas"),e=d.errMsg,f=function(a){if(!a)return{valid:!1,errMsg:e.emptyEmail};var b=c.validate(a),d={};return d.valid=b.status,b.status||(d.errMsg=e.validEmail),d},g=function(a){var b=!0,c="";return a||(b=!1,c=e.emptyName),b&&(b=!zmUtil.hasSpecialChars(a,"dispName"),b||(c=e.nameHasSpecialChar)),{valid:b,errMsg:c}},h=function(a){var b=!0,c="";return a||(b=!1,c=e.emptyServerDetails),b&&(b=!zmUtil.hasSpecialChars(a,"dispName"),b||(c=e.serverDetailsHasSpecialChar)),{valid:b,errMsg:c}},i=function(a){var b=!0,c="",d=a.uName,f=a.pass;return d?f||(b=!1,c=e.emptyPass):(b=!1,c=e.emptyUname),{valid:b,errMsg:c}};a.validateUserCred=i,a.validateServerName=h,a.validateDispName=g,a.validateEmailId=f},"Apps.SendMailAs"),_defineSettingsModule("SendMailAs",function(a,b){var c,d,e,f,g=b("Platform.Components"),h=b("Platform.Entities"),i=b("Platform.System.Utils"),j=g.SettingCardManager,k=g.SettingCardItemManager,l=g.SettingPageManager,m=g.SettingAppManager,n=h.SettingPage,o=h.SettingCardItem,p=n.Types,q=o.Types,r=b("Apps.SendMailAs.models"),s=zmText.get("zm-settings-core","sendmailas"),t={CARD_ID:"sendmailas",PAGE_ID:"sendmailas",APP_ID:"sa-sendmailas",CATEGORY_ID:"mail",APPCORE_MODULE_ID:"zm-settings-app-sendmailas",SENDMAILAS_NEW_CARD_ITEM_ID:"sendmailas-new",SENDMAILAS_MANAGE_CARD_ITEM_ID:"sendmailas-manage",SENDMAILAS_UNVERIFIED_CARD_ITEM_ID:"sendmailas-unverified",SENDMAILAS_ALIAS_CARD_ITEM_ID:"sendmailas-alias"},u={REMOVE:"remove",ADD:"add",VERIFY_STATUS_CHANGE:"change:isEnabled"},v="Apps.SendMailAs.AppCore",w=j.CardActions.OpenPageAction(t.PAGE_ID),x=function(){j.create(t.CARD_ID,{props:{title:s.title,openable:!0},attributes:{category:t.CATEGORY_ID},openAction:j.CardActions.OpenPageAction(t.PAGE_ID)})},y=function(){l.create(t.PAGE_ID,{props:{title:s.title,showTitle:!0},attributes:{type:p.TitleChoiceMenu,card:t.PAGE_ID,category:"mail",appContainer:!0,pageCSSClass:"sendmailas-setting-app"},onComponentCreate:function(a){c=a}})},z=function(){return zmAppLoader.load(t.APPCORE_MODULE_ID)},A=function(){var a=i.makeDeferred();return z().done(function(){b(v).initialize({_settingPageComponent:c}),a.resolve()}).fail(function(){a.reject()}),a.promise()},B=function(){var a=i.makeDeferred();return z().done(function(){b(v).uninitialize({_settingPageComponent:c}),a.resolve()}),a.promise()},C=function(){var a=b(v);return a.getAppView()},D=function(a,c){var d=b(v);d&&d.handleContainerEvent(a,c)},E=function(){f=m.create(t.APP_ID,{attributes:{page:t.PAGE_ID,isReactApp:!0},initialize:A,uninitialize:B,getView:C,handleContainerEvent:D})},F=function(){k.create(t.SENDMAILAS_NEW_CARD_ITEM_ID,{props:{title:s.createNew},attributes:{type:q.Action,card:t.CARD_ID},primaryAction:function(){f.setProp({openNew:!0}),w()}}),k.create(t.SENDMAILAS_MANAGE_CARD_ITEM_ID,{props:{title:s.manageFromAddress},attributes:{type:q.Action,card:t.CARD_ID},primaryAction:function(){w()}})},G=function(){var a=r.API;d=k.create(t.SENDMAILAS_UNVERIFIED_CARD_ITEM_ID,{props:{title:s.unverifiedList,value:a.getUnverifiedListCount()},attributes:{type:q.LabelValue,card:t.CARD_ID},primaryAction:function(){w()}}),e=k.create(t.SENDMAILAS_ALIAS_CARD_ITEM_ID,{props:{title:s.aliasAddress,value:a.getAliasListCount()},attributes:{type:q.LabelValue,card:t.CARD_ID},primaryAction:function(){w()}})},H=function(){var a=r.API;d.setProp({value:a.getUnverifiedListCount()})},I=function(){var a=r.API;e.setProp({value:a.getAliasListCount()})},J=function(){var a=r.getSendMailAsCollection();a.on(u.REMOVE,H),a.on(u.ADD,H),a.on(u.VERIFY_STATUS_CHANGE,H),a.on(u.ADD,I)},K=function(){r.sendMailCollectionDeferred.done(function(){G(),J()})},L=function(){f.setProp({openNew:!0}),w()},M=function(){x(),F(),y(),E(),K(),a.App=f,a.createNew=L};M()},"Apps"),_defineSettingsModule("MailAccounts",function(a,b){var c,d,e=b("Platform.Components"),f=b("Platform.Entities"),g=b("Platform.System.Utils"),h=e.SettingCardManager,i=e.SettingCardItemManager,j=e.SettingPageManager,k=e.SettingAppManager,l=f.SettingPage,m=f.SettingCardItem,n=l.Types,o=m.Types,p=zmText.get("zm-settings-core","mailAccounts"),q={CARD_ID:"mailaccounts",PAGE_ID:"mailaccounts",APP_ID:"sa-mailaccounts",CATEGORY_ID:"mail",ADD_MAIL_ACCOUNT_CARD_ITEM_ID:"sci-add-mail-account",MANAGE_MAIL_ACCOUNTS_CARD_ITEM_ID:"sci-manage-mail-accounts",MANAGE_POP_CARD_ITEM_ID:"sci-manage-pop",MANAGE_IMAP_CARD_ITEM_ID:"sci-manage-imap",MANAGE_FORWARDS_CARD_ITEM_ID:"sci-manage-forwards",MANAGE_FETCH_CARD_ITEM_ID:"sci-manage-fetch",APPCORE_MODULE_ID:"zm-settings-app-mailaccounts",APPCORE_MODULE_NAMESPACE:"MailSuite.Apps.MailAccounts.AppCore"},r=null,s=function(){h.create(q.CARD_ID,{props:{title:p.labels.title,openable:!0},attributes:{category:q.CATEGORY_ID},openAction:h.CardActions.OpenPageAction(q.PAGE_ID)})},t=h.CardActions.OpenPageAction(q.PAGE_ID),u=function(){i.create(q.ADD_MAIL_ACCOUNT_CARD_ITEM_ID,{props:{title:p.cardItems.title.addAccount},attributes:{type:o.Action,card:q.CARD_ID},primaryAction:function(){k.get(q.APP_ID).setProp({initialAction:"add-new"}),t()}}),i.create(q.MANAGE_POP_CARD_ITEM_ID,{props:{title:p.cardItems.title.managePop},attributes:{type:o.Action,card:q.CARD_ID},primaryAction:function(){k.get(q.APP_ID).setProp({initialAction:"manage-pop"}),t()}}),i.create(q.MANAGE_IMAP_CARD_ITEM_ID,{props:{title:p.cardItems.title.manageImap},attributes:{type:o.Action,card:q.CARD_ID},primaryAction:function(){k.get(q.APP_ID).setProp({initialAction:"manage-imap"}),t()}}),i.create(q.MANAGE_FORWARDS_CARD_ITEM_ID,{props:{title:p.cardItems.title.manageForwards},attributes:{type:o.Action,card:q.CARD_ID},primaryAction:function(){k.get(q.APP_ID).setProp({initialAction:"manage-forwards"}),t()}}),i.create(q.MANAGE_FETCH_CARD_ITEM_ID,{props:{title:p.cardItems.title.manageFetch},attributes:{type:o.Action,card:q.CARD_ID},primaryAction:function(){k.get(q.APP_ID).setProp({initialAction:"manage-pop-fetch"}),t()}})},v=function(){return zmAppLoader.load(q.APPCORE_MODULE_ID)},w=function(){return b(q.APPCORE_MODULE_NAMESPACE)},x=function(){d=j.create(q.PAGE_ID,{props:{title:p.labels.title,showTitle:!0},attributes:{type:n.TitleChoiceMenu,card:q.PAGE_ID,category:"mail",appContainer:!0,pageCSSClass:"account-settings"},onComponentCreate:function(a){r=a}})},y=function(){var a=g.makeDeferred();return v().done(function(){w().initialize({settingPageComponent:r}),a.resolve()}).fail(function(){g.debugLog("Module load failed !!!"),a.reject()}),a.promise()},z=function(){var a=g.makeDeferred();return v().done(function(){w().uninitialize(),a.resolve(),c=null,d=null,r=null}),a.promise()},A=function(){return w().getAppView()},B=function(a,b){w().handleAppContainerEvent(a,b)},C=function(){c=k.create(q.APP_ID,{attributes:{page:q.PAGE_ID,isReactApp:!0},initialize:y,uninitialize:z,getView:A,handleContainerEvent:B})},D=function(){s(),u(),x(),C(),a.Constants=q,a.App=c,a.Page=d};D()},"MailSuite.Apps"),_defineSettingsModule("Cards",function(a,b){var c="group-settings",d="groups",e={cardTitle:zmText.get("zm-settings-core","groups.cardTitle")},f=b("Platform.Components"),g=f.SettingCardManager,h=g.create(c,{props:{title:e.cardTitle},state:{hidden:!1},attributes:{category:d}});a.MailAccountSettings=h},"MailSuite"),function(a){var b="group-settings",c={GROUP_SETTINGS:"group-settings"},d={cardItem:{title:{groupSettings:zmText.get("zm-settings-core","groups.cardItems.manageGroups")}}},e=a("Platform.Components"),f=a("Platform.Entities"),g=e.SettingCardItemManager,h=f.SettingCardItem,i=h.Types,j=function(a){setTimeout(function(){window.open(a)},0)},k={openGroupSettingsPage:function(){zmUtil.isNewGroupUser()?zmAppLoader.load("streamsGroupManagement").done(function(){zmStreamsApp.GroupManageApp.init({groupManage:!0})}):j("/biz/groups.do")}},l=function(a,b){b=b||{},g.create(a,b)};l(c.GROUP_SETTINGS,{props:{loadFrameworkOnCommandExecution:!1,title:d.cardItem.title.groupSettings},attributes:{type:i.Action,card:b},primaryAction:function(){k.openGroupSettingsPage()}})}(zmail.Settings.Modules["import"]),_defineSettingsModule("AccountData",function(a,b){var c=b("Platform.System.Utils"),d={},e=zmail.Utils.DeferredCollection.create({keepDeferreds:!1}),f=function(a){var b=c.makeDeferred();return zmAjq.XHR({u:[zmail.conPath,"swAcc.do"].join("/"),p:{accId:a,mode:"json"},t:"post",fn:function(a){b.resolve({data:a})},efn:function(){b.reject()}}),b.promise()},g=function(a,b){b=b||{},b.refresh===!0&&(e.clear(a),d[a]=void 0,delete d[a]);var g=!e.has(a),h=e.get(a);return d[a]?h.resolve(c.copyProperties(d[a],{},!0)).promise():(g&&f(a).done(function(b){d[a]=b.data,h.resolve(c.copyProperties(d[a],{},!0))}).fail(function(){h.reject()}),h.promise())},h=function(a){return d[a]};a.getAccountData=g,a.getAccountDataSync=h},"MailSuite.Common"),_defineSettingsModule("External",function(a,b){var c=b("Platform.System.Utils"),d=function(){var a=$.Deferred(),b=function(){"resolved"!==a.state()&&a.resolve()};return setTimeout(b,3e3),zmApp.loadCalendarSettingsResources().done(b).fail(b),a.promise()},e=function(){var a=$.Deferred(),b=d();return $.when(b).done(function(){a.resolve()}).fail(function(){c.debugLog("_initializeExternalIntegrations - failed"),a.resolve()}),a.promise()};a.loadSettingsCore=function(){return e()}},"Platform");