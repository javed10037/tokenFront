!function(){"use strict";var a,b,c=zmail.Core.Namespaces.create("zmMarkup"),d=zmText.get("markup").markup,e=function(a,b){var c,d,e,f,g=864e5,h=36e5;return a=new Date(a),b=new Date(b),isNaN(a)||isNaN(b)?"":(c=b.getTime()-a.getTime(),d=Math.floor(c/g),e=Math.floor((c-d*g)/h),f=Math.round((c-d*g-e*h)/6e4),60===f&&(e++,f=0),24===e&&(d++,e=0),{day:d,hour:e,min:f})},f=function(){var a,c,e=d.order,f="",g={},h={SHIPPED:e.OrderInTransit,orderConfirmed:e.OrderProcessing},i=function(){var a,b;return b=c.ITEMDETAILS.length,a=b&&b>1?c.ITEMDETAILS[0].ITEMNAME+zmText.applyArgs(e.moreItems,{count:b-1}):c.ITEMDETAILS[0].ITEMNAME},j=function(){return'<h3 class="zm_schmTit">'+i()+"</h3>"},k=function(){var a=c.ITEMDETAILS[0].IMAGE;return a||(a=zmail.imgPath+"schema/defaultOrderImage.png"),'<div class="zm_schProImg"><img src='+a+"></img></div>"},l=function(){var a,b="",d=c.ITEMDETAILS;for(a in d)b=b+d[a].ITEMNAME+", ";return b=b.substring(0,b.length-2),"<div> "+e.items+" <br><b>"+b+"</b></br></div>"},m=function(){return""},n=function(){var b,d,g;return"ORDER"===a?(b=c.DATE,d=c.TIME,g=e.odate):(b=c.EXPECTEDARRIVALFROM||c.EXPECTEDARRIVALUNTIL,g=e.edate),f="",b&&(f=['<div><i class="msi-clock SC_thm zm_defIcon"></i>'+g+"<br><b>"+b,"&nbsp;",d?d:"","</b></br><br>"+m()+"</br></div>"].join("")),f},o=function(){f="";var a=c.ORDERSTATUS,b=e[a]||h[a];return a&&b&&(f='<div class="zm_schInfoTbl"><div><div><i class="msi-tickRound zmDoubleIcon SC_thm zm_defIcon"></i><label>'+e.status+"</label><br><b>"+b+"</b></br></div></div></div>"),f},p=function(){var b=c.CARRIERNAME||c.MERCHANTNAME;return"PARCELDELIVERY"===a&&b?'<div class="zm_schInfoTbl"><div><div><i class="msi-delivery SC_thm zm_defIcon"></i><label>'+e.sName+"</label><br><b>"+b+"</b></br></div></div></div>":'<div class="zm_schInfoTbl"><div><div>&nbsp;</div></div></div>'},q=function(){return"ORDER"!==a?"":(f="",f=['<div class="zm_schInfoTbl"><div><div><i class="msi-dollar SC_thm zm_defIcon"></i>',"<label>"+e.price+"</label><br><b>",c.PRICECURRENCY?c.PRICECURRENCY:"","&nbsp;"+c.PRICE+"</b></br></div></div></div>"].join(""))},r=function(){var b,d;return"ORDER"===a?(b=c.VIEWORDERURL,d=e.vOrder):(b=c.TRACKINGURL,d=e.tOrder),f="",b&&(f='<div class="zm_schMail_tbl"><div class="zm_tbl_row nopadding_row"><div><div class="zm_tblSep"></div></div></div><div class="zm_tbl_row"><div><div class="zm_schBtns"><div class="zm_schBtn"><a href='+b+' target="_blank" tabindex="0" class="SC_lnk"><span>'+d+"</span></a></div></div></div></div></div></div>"),f},s=function(){var b=c.ORDERSTATUS?['<div class="zm_schMail_tbl">','<div class="zm_tbl_row nopadding_row"><div><div class="zmmre"></div></div></div>','<div class="zm_tbl_row"><div class="zm_schInfoTd">'+o(),"ORDER"!==a?'<div class="zm_schInfoTbl"><div><div>&nbsp;</div></div></div>':"",p()+q()+"</div></div></div>"].join(""):"";return['<div class="zm_schMail">'+j(),'<div class="zm_schmCont zm_schEcom"><div><div class="zm_schInfoTd">','<div class="zm_schMail_tbl"><div class="zm_tbl_row zm_tblHdr"><div><div class="zm_schPro">',"<div>"+k()+l()+"</div></div></div>"+n()+"</div></div>",b?b:"",r(),"</div></div></div>"].join("")};return g.summary=function(d){a=d,c="ORDER"===a?b.ORDEROBJ:b.PARCLDLVRYOBJ;var f=c.PRICECURRENCY&&c.PRICE?' - <font class="SC_red">'+c.PRICECURRENCY+"&nbsp;"+c.PRICE+"</font>":"";return"<span>"+i()+f+" - "+e.from+"&nbsp;"+c.MERCHANTNAME+'<span class="sum SC_ndot"></span>'},g.build=function(d){return a=d,c="ORDER"===a?b.ORDEROBJ:b.PARCLDLVRYOBJ,s()},g}(),g=function(){var a,c=d.flight,f={},g="",h=function(){var d=b.FLYTTKTOBJ[0].DEPARTUREDETAILS.AIRPORTCODE+"&nbsp;"+c.to+"&nbsp;"+b.FLYTTKTOBJ[0].ARRIVALDETAILS.AIRPORTCODE;return g='<h3 class="zm_schmTit">'+c.from+"&nbsp;"+d+" - <span>"+a.DEPARTUREDETAILS.DATE+"</span></h3>"},i=function(){if(a.AIRLINENAME){var b='<div class="zm_tbl_row nopadding_row"><div><div class="zm_hdrSep"></div></div><div><div class="zm_hdrSep"></div></div><div><div class="zm_hdrSep"></div></div></div>',c='<div><i class="msi-flight zmDoubleIcon SC_thm zm_defIcon"></i><b>'+a.AIRLINENAME+"</b></div></div>";g='<div class="zm_tbl_row zm_tblHdr"><div><b>'+a.DEPARTUREDETAILS.AIRPORTCODE+"</b><br>"+a.DEPARTUREDETAILS.AIRPORTNAME+"</div><div><b>"+a.ARRIVALDETAILS.AIRPORTCODE+"</b><br>"+a.ARRIVALDETAILS.AIRPORTNAME+"</div>"+c+b}return g},j=function(){g="";var b=a.DEPARTUREDETAILS.TERMINAL?c.term+"&nbsp;&nbsp;<b>"+a.DEPARTUREDETAILS.TERMINAL+"</b><br>":"",d=a.ARRIVALDETAILS.TERMINAL?c.term+"&nbsp;&nbsp;<b>"+a.ARRIVALDETAILS.TERMINAL+"</b><br>":"",e=a.DEPARTUREDETAILS.GATE?c.gate+"&nbsp;&nbsp;<b>"+a.DEPARTUREDETAILS.GATE+"</b><br>":"",f=a.ARRIVALDETAILS.GATE?c.gate+"&nbsp;&nbsp;<b>"+a.ARRIVALDETAILS.GATE+"</b><br>":"";return a.DEPARTUREDETAILS.DATE&&a.ARRIVALDETAILS.DATE&&(g=["<div title="+c.departDate+">"+b+e+a.DEPARTUREDETAILS.DATE,a.DEPARTUREDETAILS.TIME?", "+a.DEPARTUREDETAILS.TIME:"","</div><div title="+c.arrivalDate+">"+d+f,a.ARRIVALDETAILS.DATE,a.ARRIVALDETAILS.TIME?", "+a.ARRIVALDETAILS.TIME:"","</div>"].join("")),g},k=function(){var b=a.DEPARTUREDETAILS.DATE+" "+a.DEPARTUREDETAILS.TIME,d=a.ARRIVALDETAILS.DATE+" "+a.ARRIVALDETAILS.TIME,f=e(b,d);return g="",f&&(g=['<div><i class="msi-clock SC_thm zm_defIcon"></i>',c.duration+"<br><b>",f.day?f.day+"&nbsp"+c.days+"&nbsp":"",f.hour?f.hour+"&nbsp"+c.hour+"&nbsp":"",f.min?f.min+"&nbsp"+c.min:"","</b></div>"].join("")),g},l=function(){var b,d,e,f;g="";for(b in a.PASSENGERDETAILS)f=b>0?'style="display: none;"':"",d=a.PASSENGERDETAILS[b],e=d.AIRPLANESEAT?"<div><label>"+c.seat+"</label><br><b>"+d.AIRPLANESEAT+"</b></div>":"",g+='<div class="zm_schInfoTbl" '+f+'><div><div><i class="msi-invitee SC_thm zm_defIcon"></i><label>'+c.pName+"</label><br><b>"+d.RESERVATIONMADEUNDER+"</b></div>"+e+"</div></div>";return g},m=function(){return g="",a.RESERVATIONNUMBER&&(g='<div class="zm_schInfoTbl zm_schCInfo"><div><div><i class="msi-ticket SC_thm zm_defIcon"></i><label>'+c.confNo+"</label><br><b>"+a.RESERVATIONNUMBER+"</b></div></div></div>"),g},n=function(){return g="",a.PASSENGERDETAILS.length>1&&(g='<div morePassenger = "mulPassenger" class="zm_schInfoTbl zm_schMInfo"><div><div><big class="SC_lnk">'+c.more+"</big></div></div></div>"),g},o=function(b){try{a=b||a;var d=["CHECKINURL","MODIFYRESERVATIONURL","VIEWRESERVATIONURL"],e=[c.checkin,c.modify,c.vTicket];return e[d.indexOf(a.URLACTTYPE)]}catch(f){zmUtil.debugLog(f)}},p=function(){var b=a.url;return g="",b&&(g='<div class="zm_tbl_row"><div><div class="zm_schBtns"><div class="zm_schBtn"><a href='+b+' target="_blank" tabindex="0" class="SC_lnk"><span>'+o()+"</span></a></div></div></div></div>"),g};return f.build=function(){var c,d=b.FLYTTKTOBJ,e="";e='<div class="zm_schMail">'+h()+'<div class="zm_schmCont zm_schTrip">';for(c in d)a=d[c],e+=['<div><div><div class="zm_schMail_tbl">'+i(),'<div class="zm_tbl_row">'+j()+k()+"</div></div><div class=",'"zm_schMail_tbl"><div class="zm_tbl_row nopadding_row"><div><div class="zmmre">','</div></div></div><div class="zm_tbl_row"><div class="zm_schInfoTd zm_schPsgTbl">'+l()+m()+n()+'</div></div></div><div class="zm_schMail_tbl">','<div class="zm_tbl_row nopadding_row"><div><div class="zm_tblSep"></div></div></div>',p()+"</div></div></div>"].join("");return e+="</div></div>"},f.urlType=o,f.summary=function(){a=b.FLYTTKTOBJ[0];var c=a.DEPARTUREDETAILS.AIRPORTCODE+" to "+a.ARRIVALDETAILS.AIRPORTCODE;return"<span>"+a.AIRLINENAME+' - <font class="SC_red">'+c+'&nbsp;</font><span class="sum SC_ndot">&nbsp;-&nbsp;'+a.DEPARTUREDETAILS.DATE+"&nbsp;-&nbsp;"+a.DEPARTUREDETAILS.TIME+"</span>"},f}(),h=function(a){$(".zm_schMInfo").off("click").on("click",function(a){this.innerHTML="",$(this).siblings().each(function(){this.style.display=""})})},i=function(c){try{var d,e;a=c,b=c.schemaObj,"ORDER"===b.SCATYPE||"PARCELDELIVERY"===b.SCATYPE?d=$(f.build(b.SCATYPE)):"FLIGHTRESERVATION"===b.SCATYPE&&(d=$(g.build())),e=$(a.selector).find("#zmCon"+c.prefix+a.msgId),e.find("div.zmPCnt td:first").prepend(d),h(d)}catch(i){zmUtil.debugLog(i)}},j=function(a){try{var c="";return b=a.schemaObj,"ORDER"===b.SCATYPE||"PARCELDELIVERY"===b.SCATYPE?c=f.summary(b.SCATYPE):"FLIGHTRESERVATION"===b.SCATYPE&&(c=g.summary()),c}catch(d){zmUtil.debugLog(d)}};c.load=i,c.getSummary=j,c.flightReserv=g,c.shipping=f}();