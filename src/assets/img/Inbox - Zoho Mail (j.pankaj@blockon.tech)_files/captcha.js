define([],function(a){"use strict";var b=a("zmText"),c=b.get("captcha"),d={};return d.getCaptchaDialog=function(a){var b="";return b+="<table width='100%' cellspacing='0' cellpadding='5' border='0' align='center'><tbody><tr><td colspan='2'></td></tr><tr><td>&nbsp;</td><td>"+c.captcha.enterTextInfo+"</td></tr>",b+="<tr><td>&nbsp;</td><td>"+c.captcha.caseSensitiveInfo+"</td></tr>",b+="<tr><td>&nbsp;</td><td><div><img class='SC_captcha' align='absmiddle' height ='72px' alt='HIP Image' title='"+c.captcha.imageTitle+"' name='ze_hipImg'><i class='msi-refresh'></i></div></td></tr>",a.incorrectCaptcha&&(b+="<tr><td>&nbsp;</td><td class='SC_Fred'>"+c.captcha.incorrectCaptcha+"</td></tr>"),b+="<tr><td>&nbsp;</td><td><input type='text' style='width: 202px;'></td></tr>",b+="</tbody></table>"},window.zmscaptcha=window.zmscaptcha||{},window.zmscaptcha.views=d,d}),define([],function(a){"use strict";var b,c,d=a("$"),e=a("zmText"),f=a("zmsDialog"),g=window.zmscaptcha||{},h="",i=g.views,j=function(){var a=d("#captchapopup").find(".msi-refresh").eq(0),c=d("#captchapopup").find("input").eq(0);setTimeout(function(){c.focus()},550),a.on("click",function(){d.ajax(b)})},k=function(a,g,k){h=a;var l,m,n,o=Boolean(g.prevCaptchaError);d("#captchapopup").length||d("body").append('<div id="captchapopup"></div>'),l=i.getCaptchaDialog({incorrectCaptcha:o}),d("#captchapopup").html(l),m=d("#captchapopup").find("img"),m.eq(0).attr("src",zmail.conPath+"/showcaptcha?digest="+h),n={title:"Captcha Verification",style:{width:"300px"},buttons:[{txt:e.get("captcha","common.go"),callback:function(){c()}},{isCancel:!0,txt:e.get("captcha","common.cancel"),callback:function(){f.remove()}}],drag:!0,mask:!0,pos:"center",isCancel:!0,forceShow:!0,closeaction:k},f.create("captchapopup",n),j(),b=g};return c=function(){var a=d("#captchapopup").find("input").eq(0),c=h+"="+a.val();f.remove(!0),h="",b.data+="&"+c,b.prevCaptchaError=!0,setTimeout(function(){d.ajax(b)},500)},g.createCaptchaDialog=k,g.resendRequest=c,g});