"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();define([],function(a){var b=zmail.Core.Namespaces,c=b.create("zmail.Utils.IntervalManager"),d=null,e=function(){function a(){_classCallCheck(this,a);var b=this;b.activeIntervalMap={}}return _createClass(a,[{key:"init",value:function(){var a=this;a.defaultSetInterval=window.setInterval,a.defaultClearInterval=window.clearInterval,window.setInterval=a.setInterval.bind(a),window.clearInterval=a.clearInterval.bind(a)}},{key:"setInterval",value:function(a,b){var c=this,d=c.defaultSetInterval.apply(window,arguments);return d&&(c.activeIntervalMap[d]={start:Date.now(),interval:b,callback:a}),d}},{key:"clearInterval",value:function(a){var b=this;return delete b.activeIntervalMap[a],b.defaultClearInterval.apply(window,arguments)}},{key:"getActiveIntervals",value:function(){var a=this;return Object.keys(a.activeIntervalMap).map(function(b){return{id:b,runningFor:Date.now()-a.activeIntervalMap[b].start+" ms",runsEvery:a.activeIntervalMap[b].interval+" ms",callback:a.activeIntervalMap[b].callback}})}},{key:"getActiveIntervalCount",value:function(){var a=this;return Object.keys(a.activeIntervalMap).length}}]),a}();c.getActiveIntervalCount=function(){return d.getActiveIntervalCount()},c.getActiveIntervals=function(){return d.getActiveIntervals()};var f=function(){d=new e,d.init()};return f(),c}),define([],function(a){var b=a("$"),c=a("zmComponent"),d={theme1:"zmThmDBlue",theme2:"zmThmDGreen",theme3:"zmThmLGreen",theme4:"zmThmLBlue",theme5:"zmThmDRed",theme6:"zmThmLRed",theme7:"zmThmDYellow",theme8:"zmThmLYellow",theme9:"zmThmLBlack"},e=document,f=navigator.userAgent.toLowerCase(),g=[],h=function(a,b,c){var d="#"!==a&&c?c:e;switch(a){case"#":return d.getElementById(b);case".":return d.getElementsByClassName(b);case"<":return d.getElementsByTagName(b)}};h.is_mac=f.indexOf("mac")!==-1,h.is_ie11=/Trident\/7.0;/.test(navigator.userAgent)&&/rv:11.0/i.test(navigator.userAgent),h.is_ie=f.indexOf("msie")!==-1,h.is_opera=f.indexOf("opera")!==-1,h.is_typesafari=f.indexOf("safari")!==-1,h.findParentWithClass=function(a,b){for(;a&&a.parentNode;)if(a=a.parentNode,h.hasClass(a,b))return a},h.remove=function(a){if(a instanceof HTMLCollection||a instanceof NodeList)for(var b=h.nodeList2Array(a),c=b.length,d=0;d<c;d++)h.removeElement(b[d]);else h.removeElement(a)},h.removeElement=function(a){(a instanceof HTMLElement||a instanceof Node)&&e.body.contains(a)&&a.parentNode.removeChild(a)},h.blindRemoveElement=function(a){a&&a.parentNode&&a.parentNode.removeChild(a)},h.addClass=function(a,b){if(a){if(a instanceof NodeList||a instanceof HTMLCollection)return void Array.prototype.forEach.apply(a,[function(a){h.addClass(a,b)}]);if(a.classList)a.classList.add(b);else{var c=h.attr(a,"class");c&&(b=c+" "+b),h.setAttr(a,{"class":b})}}},h.removeClass=function(a,b){if(a){if(a instanceof NodeList||a instanceof HTMLCollection)return void Array.prototype.forEach.apply(a,[function(a){h.removeClass(a,b)}]);a.classList?a.classList.remove(b):h.setAttr(a,{"class":b})}},h.hasClass=function(a,b){return a&&a.classList&&a.classList.contains(b)||!1},h.show=function(a,b){b===!0?a.style.visibility="visible":a.style.display=""},h.hide=function(a,b){b?a.style.visibility="hidden":a.style.display="none"},h.bindkeys=function(a,b){var c=function(a){var c=this||window,d=a.keyCode||a.which,e=b[d];e&&(e.length>1?e[0].apply(c,e[1]):e[0].apply(c))};a.addEventListener?a.addEventListener("keyup",c,!1):a.attachEvent&&a.attachEvent("keyup",c)},h.bind=function(a,b,d,e,f){c.bind({elm:a,ev:b,fn:d,args:e,capture:f})},h.unbind=function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c)},h.bindReset=function(a,b,c,d,e){h.unbind(a,b,c),h.bind(a,b,c,d,e)};var i=function(a,b){var c;return a&&a.elm===!0&&(a.args?(c=h.copyOf(a.args),c.unshift(b)):c=[b]),c};h.bind2Nodes=function(a,b,c,d){var e;if(a instanceof NodeList||a instanceof HTMLCollection)for(var f=0;f<a.length;f++)e=i(d,a[f]),h.bind(a[f],b,c,e);else e=i(d,a),h.bind(a,b,c,e)};var j=function(a,b,c){var d=b.parentNode;a?d.lastChild===b?d.appendChild(c):d.insertBefore(c,b.nextSibling):d.insertBefore(c,b)};h.before=function(a,b){j(!1,a,b)},h.after=function(a,b){j(!0,a,b)},h.append=function(a,b){a.appendChild(b)},h.attr=function(a,b){return a.getAttribute(b)},h.setAttr=function(a,b){for(var c in b){var d=b[c];a.setAttribute(c,d)}},h.concatJSON=function(a,b,c){c=void 0===c||c;for(var d in a)c?b[d]=a[d]:void 0===b[d]&&(b[d]=a[d])},h.clearField=function(a){a&&(a.value="")},h.clearHTML=function(a){a&&(a.innerHTML="")},h.emptyString=function(a){return null===a||void 0===a||0===a.trim().length},h.copyOf=function(a){for(var b=a instanceof Array==!1?{}:[],c=Object.keys(a),d=0,e=c.length;d<e;d++){var f=c[d];b[f]=a[f]}return b};var k=new Image;h.preloadimg=function(a){k.src=a},h.indexOf=function(a,b){var c,d;if(Array.prototype.indexOf)return a.indexOf(b);for(d=a.length,c=0;c<d;c++)if(a[c]===b)return c;return-1},h.pluck=function(a,b){var c,d,e=[];for(d=a.length,c=0;c<d;c++)a[c]!==b&&e.push(a[c]);return e},h.bindFn=function(a,b){return Function.prototype.bind.apply(a,Array.prototype.slice.call(arguments,1))},h.stopEvents=function(a,b){try{a||(a=window.event),a.stopPropagation?(b||a.preventDefault(),a.stopPropagation()):(a.cancelBubble=!0,a.returnValue=!1)}catch(c){}},h.nodeList2Array=function(a){var b,c=[],d=a.length;for(b=d-1;b>=0;b--)c.push(a.item(b));return c.reverse()},h.isVisible=function(a){if(!a)return!1;if(a.style){if("none"===a.style.display)return!1;if("hidden"===a.style.visibility)return!1}return!0},h.setCookie=function(a,b){var c=new Date;c.setTime(c.getTime()+31536e6),e.cookie=a+"="+b+";expires="+c.toGMTString()},h.getCookie=function(a){var b,c,d,f,g;return b=e.cookie.indexOf(a),b!==-1?(g=a.length,d=e.cookie.indexOf(a)+g,f=e.cookie.indexOf(";",d),f===-1&&(f=e.cookie.length),c=e.cookie.substring(d+1,f)):null},h.removeCookie=function(a){e.cookie=a+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;"},h.getDOM=function(){return function(a){return c.htmlizer(a)}}(),h.setTextContent=function(a,b,c){c&&(a.innerHTML=""),a.appendChild(e.createTextNode(b))},h.topBarHamburgerReference=function(){return b(".zmHamburger")},h.escapeTags=function(a){return a=a.replace(/"/gi,"&quot;").replace(/'/gi,"&#39;").replace(/</gi,"&lt;").replace(/>/gi,"&gt;")},h.unescapeTags=function(a){return a=a.replace(/&lt;/gi,"<").replace(/&gt;/gi,">").replace(/&#39;/gi,"'").replace(/&quot;/gi,'"').replace(/&apos;/gi,"'")},h.getProperty=function(a,b){for(var c,d=b.split("."),e=a,f=d.length,g=0;g<f;g++)if(e=c=e[d[g]],void 0===c)return c;return c},h.registerLeftClickHandlers=function(a){g.push(a)},h.getLeftClickHandlers=function(){return g},h.getDOMReferenceMap=function(a,c,d){d=d||"ref",a=b(a);var e,f,g,h=b("["+d+"]",a),i={};for(h=h||[],b(a).attr(d)&&h.push(b(a)[0]),e=0,f=h.length;e<f;e++)g=h[e],i[b(g).attr(d)]=b(g)[0],c&&b(g).removeAttr(d);return i};var l=function(a){var b=!1;return b=zmail.ContactBook.isGroup(a)};return h._isPrivilegedUser=function(){var a,b=!1,c=["36902612"];zmail.zohoUrl.indexOf("localzoho")!==-1&&c.push("11160417");var d=c.length;for(a=0;a<d&&!(b=l(c[a]));a++);return b},h.checkForCRMMailAddonUser=function(){window.zmail.isCRMMailAddonUser=null;var a=null;return function(){if(null!==a)return a.promise();if(a=b.Deferred(),null!==window.zmail.isCRMMailAddonUser)return a.resolve(window.zmail.isCRMMailAddonUser).promise();try{var c=JSON.parse(zmail.userService)||[];c=c[0]||{},c=c.Service||"",c=c.toLowerCase(),c=c.split(","),c.indexOf("zohocrm")!==-1?(window.zmail.isCRMMailAddonUser=!0,a.resolve(window.zmail.isCRMMailAddonUser)):(window.zmail.isCRMMailAddonUser=!1,a.resolve(!1))}catch(d){window.zmail.isCRMMailAddonUser=!1,a.resolve(!1)}return a.promise()}}(),h.checkForCRMUser=function(){window.zmail.isCRMServiceUser=null;var a=null;return function(){if(null!==a)return a.promise();if(a=b.Deferred(),null!==window.zmail.isCRMServiceUser)return a.resolve(window.zmail.isCRMServiceUser).promise();var c=zmAdHocSettings.getWhatsNewVersion();if(c.hasOwnProperty("isCRMUser")&&c.hasOwnProperty("crmUserLastCheck")){var d=c.crmUserLastCheck||0,e=Date.now(),f=6048e5;if(e-d<=f)return window.zmail.isCRMServiceUser=c.isCRMUser,a.resolve(window.zmail.isCRMServiceUser),a.promise()}return c.crmUserLastCheck=Date.now(),zmAjq.XHR({u:zmail.conPath+"/isCRMAccountExists.do",p:{},t:"get",fn:function(b){window.zmail.isCRMServiceUser=b.isCRMAccountExists||!1,c.isCRMUser=window.zmail.isCRMServiceUser,zmAdHocSettings.setWhatsNewVersion(c),a.resolve(window.zmail.isCRMServiceUser)},efn:function(b){window.zmail.isCRMServiceUser=!1,c.isCRMUser=window.zmail.isCRMServiceUser,zmAdHocSettings.setWhatsNewVersion(c),a.resolve(!1)}}),a.promise()}}(),h.checkAndSetDarkMode=function(){var a="zmDefaultMode";"1"===zmAdHocSettings.getNightMode()&&(a="zmNightMode"),b("body").addClass(a)},h.getOnBoardingState=function(){return zmAdHocSettings.getOnBoardingPage()},h.getFeaturesListOrder=function(){var a=["f1-streams","f2-integrations","f3-folsharing","f4-crminteg","f5-schedulemail"];return a},h.getUnseenCardsToShow=function(){if(!zmail.Utils.FeatureUtil.isHidden("FeatureCards")){var a=zmAdHocSettings.getWhatsNewVersion();return"object"!=typeof a&&(a={}),a=(a||{}).featureCardStats||[],_.difference(h.getFeaturesListOrder(),a)}},h.toggleNightModeTheme=function(a,c){a=a||{};var d,e,f,g=a.set,h=document.body,i="zmNightMode",j="zmDefaultMode";d="undefined"!=typeof g?String(g):b(h).hasClass(i)?"0":"1","1"===d?(e=i,f=j):(e=j,f=i),b(h).removeClass(f),b(h).addClass(e),zmAdHocSettings.setNightMode(d,c)},h.isTwitterIntegrationEnabled=function(){return h._isPrivilegedUser()},h.isSmartComposeEnabled=function(){return h._isPrivilegedUser()||zmail.isSmartComposeEnabled},h.getClassNameForTheme=function(a){return d[a]},h.windowOpen=function(a){var b=window.open(a);b.opener=null},h.openZohoOneSearch=function(){var b=a("zgssearch");b&&b.toggleGlobalsearch({origin:"ZMDL",service:"ZM"})},h.isAllUnreadEnabled=function(){return zmail.showFeature&&zmail.streamsHbaseReadEnabled},window._zm=h,h}),define([],function(a){var b=a("_zm"),c=document,d=function(d,e,f){if(e){var g,h,i,j,k=[];if(i={s:"SC_smsg",e:"SC_emsg",i:"SC_imsg"},j=i[d]||i.i,f=f||{},"html"!==f.type&&k.push(["text",e]),f.noHide&&k.push(["I",{attrs:{"class":"msi-close"}}]),g=b.getDOM(["DIV",{attrs:{"class":"SC_msg"},child:[["SPAN",{child:k}]]}]),b.bind(g,"click",function(a){var c=a.target||a.srcElement;"msi-close"===c.className&&b.remove(c.parentNode.parentNode)},[]),"html"===f.type&&$(g).find("span").prepend(e),h=f.appId?a("zmsuite").getCenter(f.appId)[0].$el[0].parentNode:f.parElem?f.parElem:c.body,h.appendChild(g),b.show(g),b.addClass(g,j),!f.noHide){var l=3e3;f.hideAfter=f.hideAfter||"auto","auto"===f.hideAfter&&"html"!==f.type&&(l=zmail.Utils.TextUtil.calculateReadTime(e),l<3e3&&(l=3e3),f.hideAfter=l),setTimeout(function(){b.removeClass(g,j),setTimeout(function(){b.remove(g)},1e3)},f.hideAfter)}}};return b.succErrMsg=d,b}),define([],function(a){var b,c=a("_zm"),d=function(d,e){d=d||{};var f,g,h,i={s:"SC_smsg",e:"SC_emsg",i:"SC_imsg",undefined:"SC_imsg"},j=[],k=d.links||[],l={};return h=d.appId?a("zmsuite").getCenter(d.appId)[0].$el[0].parentNode:d.parElem?d.parElem:document.body,k.forEach(function(a){var b=a.name,c=a.callback,d=a.type||"link";"text"===d?j.push(["text",b]):j.push(["I",{attrs:{"data-type":b,"class":"SC_lnk",style:"margin-left:3px; margin-right:3px;"},child:[["text",b]]}]),c&&(l[b]=c,l[b+"stay"]=a.stay)}),g=c.getDOM(["DIV",{attrs:{"class":"SC_msg"},child:[["SPAN",{child:j}]]}]),f=$(g),b=f,f.on("click","i",function(a){var c=$(a.target).data("type"),d=l[c];d&&d(),l[c+"stay"]||(f.remove(),b=void 0)}),$(h).append(g),c.show(g),c.addClass(g,i[e]||""),function(){f&&(f.remove(),f=void 0)}},e=function(){b&&(b.remove(),b=void 0)};return c.actionMessages=d,c.removeActionMessages=e,c}),define([],function(a){var b,c=a("$"),d={networkUnreachable:"Unable to reach the server. Please check your network connections.",captchaFail:"Operation not permitted due to captcha validation failure",sessionInvalid:"Your session is invalid. You will be logged out in 3 seconds!!"},e=function(){},f=[],g=[];e.getCookie=function(a){a=new RegExp("^"+a+"=");for(var b=document.cookie.split(";"),c=0;c<b.length;c++){var d=b[c].trim();if(a.test(d))return d.replace(a,"")}return null},b=function(a,b,c,d){var e=8*c,f=(b-a)/1e3,h=e/f,i=h/1e6,j={requestTime:a,requestUrl:d,duration:f,contentSize:e,speed:i+"Mbps"};g.push(j),g.length>50&&g.splice(0,1)},e.getRequestNetworkSpeed=function(){return g},e.getErrorDebuggerLog=function(){return f},e.failCodes={unknown:0,0:"unknown",connectivity:"1",1:"connectivity",captcha:"2",2:"captcha",others:"3",3:"others"},e.XHR=function(g){var h,i,j,k=a("_zm"),l=a("zmscaptcha"),m=(new Date).getTime(),n=g.u,o=g.p||{},p=g.t,q={};h=m,j=new Date,"get"===p.toLowerCase()?n=n+(n.indexOf("?")+1?"&":"?")+"xhr="+m:g.h?q={"X-ZCSRF-TOKEN":"zmrcsr="+e.getCookie("zmcsr")}:o.zmrcsr=e.getCookie("zmcsr"),g.setSessionId===!0&&zmail.isWSEnabled&&zmail._ws&&zmail._ws.getSessionId()&&(q.sId=zmail._ws.getSessionId());var r=function(a,b){var c=!0,f=typeof a;if("object"===f&&(g.removeLoader&&g.removeLoader(),1===Number(a[0])&&(c=!1,g.fn&&g.fn(a[1],g.ep))),c){var h="";h="string"===f?a:g.onerror?a[1]:a[1]&&a[1].msg;var i=e.failCodes,j=i.unknown;b.responseText||0!==b.status?g.oncaptchafailure&&a instanceof Array&&a[1]instanceof Object&&a[1].captcha?(k.succErrMsg("e",d.captchaFail),g.oncaptchafailure(h,g.ep,b),j=i.captcha):g.onerror?(j=i.others,g.onerror(h,g.ep,b,j)):(g.efn||("string"==typeof h?k.succErrMsg("e",h):"object"==typeof h&&h.msg&&"string"==typeof h.msg&&k.succErrMsg("e",h.msg)),j=i.others):(g.onnetfailure?g.onnetfailure(g.ep):"abort"!==b.statusText&&k.succErrMsg("e",d.networkUnreachable),j=i.connectivity),g.efn&&g.efn(h,g.ep,b,j)}},s={url:n,type:p,data:c.param(o,!0),dataType:"json",headers:q,success:function(a,c,d){i=(new Date).getTime();var e=JSON.stringify(a);e=void 0===e?0:e.length,b(h,i,e,n,j),r(a,d)},error:function(a,b,e){a.responseText=c.trim(a.responseText);var g;try{g=c.parseJSON(a.responseText)}catch(h){g={}}var i=!1;g instanceof Array&&g.length>1&&!isNaN(g[0])&&g[1]instanceof Object||(f.push({xhrObj:s,xhrresp:a,rstatus:b}),i=!0),i||(g[1].authFail?(k.succErrMsg("e",d.sessionInvalid),setTimeout(function(){c(location).attr("href",zmail.logoutURL)},3e3)):g[1].captcha?l.createCaptchaDialog(g[1].captcha,s,function(){r(a.responseText&&g,a)}):i=!0),i&&r(a.responseText&&g,a)}};return c.ajax(s)},e.formSubmit=function(b,c){var d=a("_zm");d("#","tarIframe")||d("<","body")[0].appendChild(d.getDOM(["IFRAME",{attrs:{id:"tarIframe",name:"tarIframe",style:"display:none",width:"0",height:"0",frameborder:"0"}}]));var f=d("<","body")[0].appendChild(d.getDOM(["FORM",{attrs:{id:"dwnFrm",style:"display:none",target:"tarIframe",name:"dwnFrm",enctype:"multipart/form-data",method:"post",action:c}}]));for(var g in b)f.appendChild(d.getDOM(["INPUT",{attrs:{type:"hidden",name:g,value:b[g]}}]));f.appendChild(d.getDOM(["INPUT",{attrs:{type:"hidden",name:"zmrcsr",value:e.getCookie("zmcsr")}}])),f.submit(),d.remove(f)};try{var h={};h[zmail.urls.gadURL]=1,window.addEventListener("message",function(a){if(a.origin in h){var b=c.parseJSON(a.data);c.publish(b.eventName,b.data)}})}catch(i){window.console.error&&window.console.error(i)}return window.zmAjq=e,e}),define([],function(a){var b=a("$"),c=b({}),d=function(){c.on.apply(c,arguments)},e=function(){c.off.apply(c,arguments)},f=function(){c.trigger.apply(c,arguments)};return b.subscribe=d,b.unsubscribe=e,b.publish=f,b});var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();define([],function(a){var b=a("zmail.Core.Namespaces"),c=b.create("zmail.Framework.Utils"),d=a("$"),e=function(){function a(){_classCallCheck(this,a),this.eventObj={}}return _createClass(a,[{key:"_subscribeHandler",value:function(a,b){var c=this;"function"==typeof b&&d(c.eventObj).on(a,b)}},{key:"_unsubscribeHandler",value:function(a,b){var c=this;"function"==typeof b&&d(c.eventObj).off(a,b)}},{key:"publish",value:function(a,b){var c=this;d(c.eventObj).trigger(a,b)}},{key:"_silenceObject",value:function(){var a=this;d(a.eventObj).off()}}]),a}();return c.PUBSUB=e,e}),define([],function(a){var b=a("$"),c=a("_"),d={},e=!0,f=0,g=function(){return f+=1,"zmailpw"+f+"_blank"},h=function(){return"status=yes,toolbar=no,menubar=no,location=no,scrollbars=yes,resizable=yes,titlebar=yes"},i=function(){var a=window.open("",g(),h());return a&&a.opener&&(a.opener=void 0),a},j=function(a){if(c.isString(a))return a;var d=b("<div/>");return d.append(a),d.html()},k={js:["printEvents.js"],css:["zmcss.css","zmprint.css"]},l=function(a){return a.createTitle=function(a){return"<title>"+a.title+"</title>"},a.cssLinks=function(a){if(a&&a.length)return a.map(function(a){return"<link href='"+window.location.protocol+zmail.cssPath+a+"'  rel='stylesheet' />"}).join("")},a.scriptTags=function(a){if(a&&a.length)return a.map(function(a){return"<script src='"+window.location.protocol+zmail.jsPath+a+"'></script>"}).join("")},a.createButton=function(){return["<div id='pbtn'>","<div class='rgtdiv'>","<div class='SC_PactionBg' onclick='window.print()'>","<span>","<i class='msi-print'></i>","Print","</span>","</div>","</div>","<div class='rgtdiv'>","<div class='SC_PactionBg cancel' onclick='window.close()'>","<span>","Cancel","</span>","</div>","</div>","</div>"].join("")},a}({}),m=function(a){var b=a.printWindow||i();if(b){b.document.open("text/html"),b.document.write(l.createTitle(a));var d=c.isArray(a.css)?a.css:[];b.document.write(l.cssLinks(d.concat(k.css))),b.document.write("<body class='zmDefaultMode'>"),b.document.write(l.createButton()),b.document.write(j(a.content));var e=c.isArray(a.js)?a.js:[];b.document.write(l.scriptTags(e.concat(k.js))),b.document.write("</body>"),b.document.close()}},n=function(){return e=!0,b.Deferred().reject().promise()},o=function(){var b=a("zmTab"),c=b.getTabObject();return c&&c.print?c.print:n};return d.print=function(a){var b;return a?void m(a):void(e&&(e=!1,o()().progress(function(){b=i()}).done(function(a){a.printWindow=b,m(a)}).always(function(){e=!0})))},window.zmail.Printer=b.extend(window.zmail.Printer,d),d}),window.zmshCut=function(a){var b=function(a,b,c){return zmText.get("preUtils","shortcut."+a,b,c)},c={shortcutException:!0,type:"i",message:b("dispMsg.selectMail")},d={shortcutException:!0,type:"i",message:b("dispMsg.selectMails")},e={mail:"m",task:"t",notes:"n",calendar:"c",streams:"zmStreamsApp",attachmentViews:"attView",notifications:"zmncenter",settings:"settings"},f={sc:function(){zmUtil.hideMenu();var a=zmApp.currentApp,b="6";"c"===a?b="4":"t"===a?b="3":"n"===a&&(b="2"),zmUtil.loadSmartCompose({eType:b,type:"tab"})},m:function(){zmUtil.hideMenu(),zmUtil.compose()},t:function(){zmUtil.hideMenu(),zmUtil.loadTask({action:"addCTask",groupId:zmail.zuid})},n:function(){zmUtil.hideMenu(),"n"===zmApp.currentApp?znNote.createInlineNotes():zmUtil.loadNotes("popup")},c:function(){zmUtil.hideMenu(),zmApp.loadCalendar("/calendar/event")},b:function(){zmUtil.hideMenu(),zmUtil.loadLink({mode:"create",groupId:zmail.zuid,catid:""})}},g=function(a,b){var e,f=zmUtil.getSelectedMails(),g=f[0].length,h=f[1].length;if(g||h){if(a||1===g&&0===h||0===g&&1===h){if(a)return f;e=g?f[0][0]:f[1][0]}else if(!b)throw c}else if(!b)throw d;return e},h=function(a){var b,c=zmInit.getListingDetObj();return a=a||c.fId,b=zmail.folId,a===b.dId||a===b.teId||a===b.oId},i={"!":"shift+1","@":"shift+2","#":"shift+3",$:"shift+4","%":"shift+5","^":"shift+6","&":"shift+7","*":"shift+8","(":"shift+9",")":"shift+0","{":"shift+openBracket","}":"shift+closeBracket","|":"shift+backSlash","/":"forwardSlash","\\":"backSlash","[":"openBracket","]":"closeBracket","`":"backtick","~":"shift+backtick","'":"singleQuote",'"':"shift+singleQuote",";":"semiColon",":":"shift+semiColon",".":"period",",":"comma","=":"equalTo","+":"shift+equalTo","-":"minus",_:"shift+minus"},j=["gotoInbox","gotoUnreadView","gotoSentbox","gotoDraft","gotoFlagView","gotoAllView","gotoLabelView","selectMail","selectAllMail","deSelectAllMail","previousMail","nextMail","expandFolder","collapseFolder","previousTab","nextTab","closeTab","sendMail","sendMailNow","saveDraft","saveTemplate","cmposeToWin","compose","reply","replyAll","forward","editAsNew","search","advanceSearch","markmenu","labelMenu","shortcutMenu","moveToMenu","viewMenu","clearMenu","clearLabel","openMailInTab","openMailInWin","closePreview","showOriginalMail","fetchMail","reportSpam","printMail","markAsUnread","markAsRead","deleteMail","archiveMail","addToFilter","previousTask","nextTask"],k={},l=function(a){var b,c,d,e,f,g,h,k,l,m=zmail.encodedShortcut||{},n=Object.keys(m).length;for(k=1;k<=n;k++){for(c="",b=m[k],b=b.replace(/&#34;/g,'"'),b=b.replace(/&#39;/g,"'"),b=b.replace(/&#92;/g,"\\"),b.length>4&&b.indexOf("ctrl")!==-1&&(c+="ctrl+",b=b.replace("ctrl","")),b.length>5&&b.indexOf("shift")!==-1&&(c+="shift+",b=b.replace("shift","")),b.length>4&&b.indexOf("enter")!==-1&&(c+="enter",b=b.replace("enter",""),b&&(c+="+")),b.length>2&&b.indexOf("ESC")!==-1&&(c+="esc",b=b.replace("ESC",""),b&&(c+="+")),b.length>2&&b.indexOf("Delete")!==-1&&(c+="delete",b=b.replace("Delete",""),b&&(c+="+")),e=b.length,f=e-1,l=0;l<e;l++)g=b.charCodeAt(l),h=b.charAt(l),c+=g>=65&&g<=90?"shift+"+h.toUpperCase():h in i?i[h]:h.toUpperCase(),l<f&&(c+="/");d=j[k-1]||k,a[d]=c}},m=[],n=[],o=[],p=[],q=[],r=function(a,b){b||(b=$("#"+a)),b.trigger("click");var c=b[0];c.scrollIntoView&&c.scrollIntoView()};a.currentLeftId="";var s=function(b){var c,d,e,f,g;switch(b){case"gotoInbox":r(zmail.folId.iId);break;case"gotoUnreadView":r("zm_unread");break;case"gotoSentbox":r(zmail.folId.sId);break;case"gotoDraft":r(zmail.folId.dId);break;case"gotoFlagView":r("zm_flag");break;case"gotoAllView":r("zm_all");break;case"gotoLabelView":r(null,$($("#zmllabel").children()[0]));break;case"expandFolder":"zm_Container"===zmTab.currentTab&&zmInit.isLeftFocused&&!zmList.isListingChecked(zmail.mailCenter.listElem)&&(g=zmail.mailLeft.getNodes()[0].el.find("#"+a.currentLeftId),g.hasClass("SC_ltl")?g.next(".SC_ldt").is(":visible")||g.trigger("click"):zmInit.findFolName(a.currentLeftId)&&g.find("i").not(".msi-arrow45").trigger("click"));break;case"collapseFolder":"zm_Container"===zmTab.currentTab&&zmInit.isLeftFocused&&!zmList.isListingChecked(zmail.mailCenter.listElem)&&(g=zmail.mailLeft.getNodes()[0].el.find("#"+a.currentLeftId),g.hasClass("SC_ltl")?g.next(".SC_ldt").is(":visible")&&g.trigger("click"):zmInit.findFolName(a.currentLeftId)&&g.find("i.msi-arrow45").trigger("click"));break;case"nextRow":if("zm_Container"===zmTab.currentTab&&!zmList.isListingChecked(zmail.mailCenter.listElem)&&zmInit.isLeftFocused&&!zmsuite.getCenter("zm_Container")[1].$el.hasClass("shw")&&(d=zmail.mailLeft.getNodes()[0],e=d.el,c=e.find(".SC_ltl:visible, .SC_tre:visible"),g=e.find("#"+a.currentLeftId),f=c.index(g[g.length-1]),f<c.length-1)){if(g=$(c[f+1]),g.hasClass("SC_ltl")){for(g=d.getLayer(g[0].id);g&&g.disableSelection;)g=d.getNextLayer(g.id);g&&(a.currentLeftId=g.id,c.filter(".Stre").removeClass("Stre"),$(g.el.children()[0]).addClass("Stre"),g=g.el)}else g.trigger("click");g&&g.position().top>e.height()-20&&e.scrollTop(e.scrollTop()+33)}break;case"previousRow":if("zm_Container"===zmTab.currentTab&&!zmList.isListingChecked(zmail.mailCenter.listElem)&&zmInit.isLeftFocused&&!zmsuite.getCenter("zm_Container")[1].$el.hasClass("shw")){d=zmail.mailLeft.getNodes()[0],e=d.el,c=e.find(".SC_ltl:visible, .SC_tre:visible"),g=e.find("#"+a.currentLeftId),f=c.index(g[g.length-1]);var h=$(c[f]);if(h.hasClass("SC_ltl")){h=d.getLayer(h[0].id);for(var i=d.getPreviousLayer(h.id);i&&i.disableSelection;)h=i,i=d.getPreviousLayer(h.id);g=e.find("#"+h.id),f=c.index(g[g.length-1])}f>0&&(g=$(c[f-1]),g.hasClass("SC_ltl")?(a.currentLeftId=g[0].id,c.filter(".Stre").removeClass("Stre"),g.addClass("Stre")):g.trigger("click"),g.position().top<20&&e.scrollTop(e.scrollTop()-33))}}},t=function(a,b){if("zm_Container"===zmTab.currentTab||zmTab.currentTab.indexOf("zm_srch")!==-1)switch(a){case"selectMail":"zmStreamTree"===zmail.mailLeft.selLayerId&&zmTab.currentTab.indexOf("zm_srch")===-1||zmList.chkSingleMsg();break;case"selectAllMail":"zmStreamTree"===zmail.mailLeft.selLayerId&&zmTab.currentTab.indexOf("zm_srch")===-1||zmList.chkAll();break;case"deSelectAllMail":"zmStreamTree"===zmail.mailLeft.selLayerId&&zmTab.currentTab.indexOf("zm_srch")===-1||zmList.unchkAll();break;case"previousMail":zmInit.isLeftFocused?(s("previousRow"),b.preventDefault()):zmList.listingFocused&&(zmPreviewTemplate.loadPrevMail(),b.preventDefault());break;case"nextMail":zmInit.isLeftFocused?(s("nextRow"),b.preventDefault()):zmList.listingFocused&&(zmPreviewTemplate.loadNextMail(),b.preventDefault());break;case"expandMail":zmInit.isLeftFocused?s("expandFolder"):zmList.showThreadTree();break;case"collapseMail":zmInit.isLeftFocused?s("collapseFolder"):zmList.hideThreadTree()}},u=function(a){var b,c,d,e,f,i,j,k,l=zmTab.currentTab.indexOf("zm_tab")!==-1?1:0;try{switch(a){case"reply":i=g(),j=zmail.mailObj[i]&&zmail.mailObj[i].FD,h()||zmUtil.isSharedFolder(j,"RW")||(zmUtil.hideMenu(),zmUtil.cmpReply({mode:"reply",type:"t",msgId:i}));break;case"replyAll":i=g(),j=zmail.mailObj[i]&&zmail.mailObj[i].FD,h()||zmUtil.isSharedFolder(j,"RW")||(zmUtil.hideMenu(),zmUtil.cmpReply({mode:"replyall",type:"t",msgId:i}));break;case"forward":i=g(),j=zmail.mailObj[i]&&zmail.mailObj[i].FD,h()||zmUtil.isSharedFolder(j,"RW")||(zmUtil.hideMenu(),zmUtil.cmpReply({mode:"fwdi",type:"t",msgId:i}));break;case"editAsNew":i=g(),j=zmail.mailObj[i]&&zmail.mailObj[i].FD,h()||zmUtil.isSharedFolder(j,"RW")||(zmUtil.hideMenu(),zmUtil.cmpReply({mode:"eanew",type:"t",msgId:i}));break;case"viewMenu":h()||"zm_Container"===zmTab.currentTab&&""!==zmInit.getListingDetObj().fId&&zmsuite.getCenter()[l].getNodes()[0].$el.find(".msi-filter").trigger("click");break;case"labelMenu":f=zmsuite.getCenterOuter().$el.data("data-detail"),b=f&&f.fId||zmInit.getListingDetObj().fId,b!==zmail.folId.spId&&!h()&&g(!0,!0)&&(zmUtil.hideMenu(),k=zmsuite.getCenter()[l].getNodes()[0].$el.find(".msi-label"),k.is(":visible")&&k.trigger("click"));break;case"moveToMenu":f=zmsuite.getCenterOuter().$el.data("data-detail"),b=f&&f.fId||zmInit.getListingDetObj().fId,b===zmail.folId.spId||h()||!g(!0,!0)||zmUtil.isSharedFolder(b)||(zmUtil.hideMenu(),k=zmsuite.getCenter()[l].getNodes()[0].$el.find(".msi-folder"),k.is(":visible")&&k.trigger("click"));break;case"clearLabel":h()||(c=zmUtil.getSelectedMailsWithLabels(),d=c[0],e=c[1],(d.length||e.length)&&zmmailAct.applyActions("label","click",{lA:"deleteall",msgId:d,thd:e}));break;case"openMailInTab":zmInit.getListingDetObj().fId!==zmail.folId.oId&&(zmInit.rclkId=g(),zmList.bindAction({action:"opentab",opentype:2}),zmInit.rclkId=0);break;case"openMailInWin":h()||(zmInit.rclkId=g(),zmail.mailObj[zmInit.rclkId]&&!zmail.mailObj[zmInit.rclkId].streams&&zmList.bindAction({action:"openwindow",opentype:2}),zmInit.rclkId=0);break;case"showOriginalMail":b=g(),h(zmail.mailObj[b].FD)||zmPreviewTemplate.showOrgMsg({mId:b});break;case"reportSpam":c=zmail.folId,f=zmsuite.getCenterOuter().$el.data("data-detail"),b=f&&f.fId||zmInit.getListingDetObj().fId,!g(!0,!1)||h(b)||zmUtil.isSharedFolder(b)||b!==c.spId&&b!==c.sId&&zmmailAct.doActions("spam");break;case"reportNotSpam":c=zmail.folId,f=zmsuite.getCenterOuter().$el.data("data-detail"),b=f&&f.fId||zmInit.getListingDetObj().fId,g(!0,!1)&&b===c.spId&&zmmailAct.doActions("notspam");break;case"openReader":b=g(),zmPreviewTemplate.shortCutHandler(a,{mId:b});break;case"printMail":b=g(),zmPreviewTemplate.shortCutHandler(a,{mId:b});break;case"markAsUnread":f=zmsuite.getCenterOuter().$el.data("data-detail"),b=f&&f.fId||zmInit.getListingDetObj().fId,h()||zmUtil.isSharedFolder(b,"R")||(c=g(!0,!1),d=c[0],e=c[1],(d.length||e.length)&&zmmailAct.applyActions("unread",null,{msgId:d,thd:e}));break;case"markAsRead":f=zmsuite.getCenterOuter().$el.data("data-detail"),b=f&&f.fId||zmInit.getListingDetObj().fId,h()||zmUtil.isSharedFolder(b,"R")||(c=g(!0,!1),d=c[0],e=c[1],(d.length||e.length)&&zmmailAct.applyActions("read",null,{msgId:d,thd:e}));break;case"deleteMail":f=zmsuite.getCenterOuter().$el.data("data-detail"),b=f&&f.fId||zmInit.getListingDetObj().fId,(c=g(!0,!1))&&!zmUtil.isSharedFolder(b)&&(d=c[0],e=c[1],(d.length||e.length)&&zmmailAct.doActions("delete",null,{msgId:d,thd:e}));break;case"archiveMail":c=zmail.folId,f=zmsuite.getCenterOuter().$el.data("data-detail"),b=f&&f.fId||zmInit.getListingDetObj().fId,g(!0,!1)&&!zmUtil.isSharedFolder(b)&&b!==c.teId&&b!==c.spId&&b!==c.dId&&b!==c.oId&&b!==c.tId&&zmmailAct.doActions("archive")}}catch(m){m.shortcutException&&_zm.succErrMsg(m.type,m.message)}},v=function(a,b,c){if(zmApp&&"m"===zmApp.currentApp)switch(b){case"mailLeft":s(a);break;case"mailListing":t(a,c);break;case"mailSelection":u(a)}},w=function(a,b,c){if(zmApp&&"t"===zmApp.currentApp)switch(b){case"taskListing":zmTask.openTaskPreview(a,c)}},x=function(a,b,c){if(zmTab.currentTab.indexOf("Cmp")!==-1)switch(a){case"sendMail":zmComp.sendMail({action:"compose",sendIm:!1,cmpId:zmTab.currentTab});break;case"sendMailNow":zmComp.sendMail({action:"compose",sendIm:!0,cmpId:zmTab.currentTab});break;case"saveDraft":zmComp.sendMail({action:"sdraft",cmpId:zmTab.currentTab});break;case"saveTemplate":zmComp.sendMail({action:"stemplate",cmpId:zmTab.currentTab});break;case"gotoSubject":var d=$(c.target||c.srcElement),e=d.closest(".ze_body");e.length>0&&(e.focusout(),$("#zmsub_"+zmTab.currentTab).focus())}},y=function(a){var b=zmail.appList.appObj;switch(a){case"toMail":b.mail.selectApp(),zmApp.showApp(e.mail);break;case"toCalendar":b.cal.selectApp(),zmApp.showApp(e.calendar);break;case"toTask":b.task.selectApp(),zmApp.showApp(e.task);break;case"toNotes":b.notes.selectApp(),zmApp.showApp(e.notes);break;case"toStreams":zmsuite.loadStreams();break;case"toAttachment":zmsuite.loadAttachView()}},z=function(a){var b;switch(a){case"create":var c=zmApp.currentApp;zmail.isSmartComposeEnabled&&(c="sc"),b=f[c],b&&b();break;case"composeMail":f.m();break;case"createEvent":f.c();break;case"createTask":f.t();break;case"createNotes":f.n();break;case"addBookmark":f.b()}},A=function(a){var b={},c=zmail.newSearch?zmail.Search.Models.Contexts:{},d=function(){b=zmail.newSearch?{MAIL:c.mailSearchContext,STREAMS:c.streamSearchContext,TASK:c.taskContextSearch,NOTES:c.noteSearchContext,QUICK_ACCESS:c.Commands}:{MAIL:e.mail,STREAMS:e.streams,TASK:e.task,NOTES:e.notes}},f=function(a){var c=function(){};a=a||b.MAIL;var d=(zmail.newSearch?zmail.Search.setContext:zmSearch.updateSearchValues)||c;d(a)};switch(d(),a){case"search":break;case"mailSearch":f(b.MAIL);
break;case"notesSearch":f(b.NOTES);break;case"taskSearch":f(b.TASK);break;case"streamsSearch":f(b.STREAMS);break;case"quickAccess":f(b.QUICK_ACCESS)}zmail.newSearch?zmail.Search.focusSearchBox():zmSearch.searchField.select().focus()},B=function(a,b,c){var d,e;switch(a){case"clearMenu":zmUtil.hideMenu(!0);break;case"expandMail":case"collapseMail":case"previousMail":case"nextMail":v(a,b,c);break;case"previousTab":d=zmTab.getPreviousTabId(zmTab.currentTab),d&&(zmUtil.hideMenu(!0),zmsuite.showWorkSpace(d));break;case"nextTab":d=zmTab.getNextTabId(zmTab.currentTab),d&&(zmUtil.hideMenu(!0),zmsuite.showWorkSpace(d));break;case"closeTab":zmsuite.closeWorkspace(zmTab.currentTab)&&zmUtil.hideMenu(!0);break;case"closePreview":if(e=zmsuite.getCenter()[1],e&&e.$el&&e.$el.hasClass("shw")){var f=e.headerObj.$el.find(".msi-close");f&&f.trigger("click")}$.publish("zm/shortcuts/global/closepreview",{});break;case"gotoSubject":x(a,b,c);break;case"toMail":case"toCalendar":case"toTask":case"toNotes":case"toStreams":case"toAttachment":y(a,b);break;case"create":case"composeMail":case"createEvent":case"createTask":case"createNotes":case"addBookmark":z(a,b);break;case"genericSearch":case"mailSearch":case"taskSearch":case"notesSearch":case"streamsSearch":case"quickAccess":A(a);break;case"print":zmail.Printer.print();break;case"systemPrint":window.print()}},C=function(a,b,c,d,e,f,g,h){return{scope:a,group:b||"default",uid:c,keyStr:d,actions:[e],includeHandling:g,preventDefault:h,displayName:f}},D=function(a){return a=a||{},a.toMail="A/M",a.toCalendar="A/C",a.toTask="A/T",a.toNotes="A/N",a.toStreams="A/S",a.toAttachment="A/F",a.create="C",a.composeMail="C/M",a.createEvent="C/E",a.createTask="C/T",a.createNotes="C/N",a.addBookmark="C/B",a.search="forwardSlash",a.mailSearch="forwardSlash/M",a.taskSearch="forwardSlash/T",a.notesSearch="forwardSlash/N",a.streamsSearch="forwardSlash/S",a.quickAccess="forwardSlash/Q",a},E=function(){m.push(C("default","mailListing","expandMail","rightArrow",B,b("dispNames.expandMail")),C("default","mailListing","collapseMail","leftArrow",B,b("dispNames.collapseMail")),C("default","mailListing","previousMail","upArrow",B,b("dispNames.previousMail")),C("default","mailListing","nextMail","downArrow",B,b("dispNames.nextMail")),C("default",null,"print","ctrl+P",B,b("dispNames.print"),!1,!0),C("default",null,"systemPrint","ctrl+shift+P",B,b("dispNames.systemPrint"),!1,!0)),zmail.mailOpt.isKey?(m.push(C("default",null,"previousTab",k.previousTab,B,b("dispNames.previousTab"),!1,!0),C("default",null,"nextTab",k.nextTab,B,b("dispNames.nextTab"),!1,!0),C("default",null,"closeTab",k.closeTab,B,b("dispNames.closeTab"),!1,!0),C("default",null,"closePreview",k.closePreview,B,b("dispNames.closePreview")),C("default",null,"clearMenu",k.clearMenu,B,b("dispNames.clearMenu"),!0)),zmail.fromOtherService||m.push(C("default","appNavigation","toMail",k.toMail,B,b("dispNames.toMail")),C("default","appNavigation","toCalendar",k.toCalendar,B,b("dispNames.toCalendar")),C("default","appNavigation","toTask",k.toTask,B,b("dispNames.toTask")),C("default","appNavigation","toNotes",k.toNotes,B,b("dispNames.toNotes")),C("default","appNavigation","toStreams",k.toStreams,B,b("dispNames.toStreams")),C("default","appNavigation","toAttachment",k.toAttachment,B,b("dispNames.toAttachment"))),m.push(C("default","newCreation","create",k.create,B,b("dispNames.create"),!1,!0),C("default","newCreation","composeMail",k.composeMail,B,b("dispNames.composeMail"),!1,!0),C("default","newCreation","createEvent",k.createEvent,B,b("dispNames.createEvent"),!1,!0),C("default","newCreation","createTask",k.createTask,B,b("dispNames.createTask"),!1,!0),C("default","newCreation","createNotes",k.createNotes,B,b("dispNames.createNote"),!1,!0),C("default","newCreation","addBookmark",k.addBookmark,B,b("dispNames.addBookmark"),!1,!0)),zmail.fromOtherService||m.push(C("default","search","genericSearch",k.search,B,b("dispNames.contextualSearch"),!1,!0),C("default","search","mailSearch",k.mailSearch,B,b("dispNames.mailSearch"),!1,!0),C("default","search","taskSearch",k.taskSearch,B,b("dispNames.taskSearch"),!1,!0),C("default","search","notesSearch",k.notesSearch,B,b("dispNames.notesSearch"),!1,!0),C("default","search","streamsSearch",k.streamsSearch,B,b("dispNames.streamsSearch"),!1,!0),C("default","search","quickAccess",k.quickAccess,B,b("dispNames.quickAccess"),!1,!0)),n.push(C("mail","mailLeft","gotoInbox",k.gotoInbox,v,b("dispNames.goToInbox")),C("mail","mailLeft","gotoUnreadView",k.gotoUnreadView,v,b("dispNames.goToUnreadView")),C("mail","mailLeft","gotoSentbox",k.gotoSentbox,v,b("dispNames.goToSent")),C("mail","mailLeft","gotoDraft",k.gotoDraft,v,b("dispNames.goToDraft")),C("mail","mailLeft","gotoFlagView",k.gotoFlagView,v,b("dispNames.goToFlag")),C("mail","mailLeft","gotoAllView",k.gotoAllView,v,b("dispNames.goToAllView")),C("mail","mailLeft","gotoLabelView",k.gotoLabelView,v,b("dispNames.goToLabelView")),C("mail","mailLeft","expandFolder",k.expandFolder,v,b("dispNames.expandFolder")),C("mail","mailLeft","collapseFolder",k.collapseFolder,v,b("dispNames.collapseFolder")),C("mail","mailListing","selectMail",k.selectMail,v,b("dispNames.selectMail"),!1,!0),C("mail","mailListing","selectAllMail",k.selectAllMail,v,b("dispNames.selectAllMail"),!1,!0),C("mail","mailListing","deSelectAllMail",k.deSelectAllMail,v,b("dispNames.deselectAllMail"),!1,!0),C("mail","mailListing","previousMail",k.previousMail,v,b("dispNames.previousMail")),C("mail","mailListing","nextMail",k.nextMail,v,b("dispNames.nextMail")),C("mail","mailSelection","reply",k.reply,v,b("dispNames.reply"),!1,!0),C("mail","mailSelection","replyAll",k.replyAll,v,b("dispNames.replyAll"),!1,!0),C("mail","mailSelection","forward",k.forward,v,b("dispNames.forward"),!1,!0),C("mail","mailSelection","editAsNew",k.editAsNew,v,b("dispNames.editAsNew"),!1,!0),C("mail","mailSelection","viewMenu",k.viewMenu,v,b("dispNames.viewMenu"),!1,!0),C("mail","mailSelection","labelMenu",k.labelMenu,v,b("dispNames.labelMenu"),!1,!0),C("mail","mailSelection","moveToMenu",k.moveToMenu,v,b("dispNames.moveToMenu"),!1,!0),C("mail","mailSelection","clearLabel",k.clearLabel,v,b("dispNames.clearLabel")),C("mail","mailSelection","openMailInTab",k.openMailInTab,v,b("dispNames.openMailInTab")),C("mail","mailSelection","openMailInWin",k.openMailInWin,v,b("dispNames.openMailInWindow")),C("mail","mailSelection","showOriginalMail",k.showOriginalMail,v,b("dispNames.showOriginal")),C("mail","mailSelection","reportSpam",k.reportSpam,v,b("dispNames.reportSpam")),C("mail","mailSelection","printMail",k.printMail,v,b("dispNames.printMail")),C("mail","mailSelection","markAsUnread",k.markAsUnread,v,b("dispNames.markAsUnread")),C("mail","mailSelection","markAsRead",k.markAsRead,v,b("dispNames.markAsRead")),C("mail","mailSelection","deleteMail",k.deleteMail,v,b("dispNames.deleteMail"),!1,!0),C("mail","mailSelection","archiveMail",k.archiveMail,v,b("dispNames.archiveMail")),C("mail","mailSelection","reportNotSpam","shift+N",v,b("dispNames.reportNotSpam")),C("mail","mailSelection","openReader","shift+R",v,b("dispNames.readerView"))),o.push(C("compose",null,"sendMail",k.sendMail,x,b("dispNames.sendMail"),!1,!0),C("compose",null,"sendMailNow",k.sendMailNow,x,b("dispNames.sendMailNow"),!1,!0),C("compose",null,"saveDraft",k.saveDraft,x,b("dispNames.saveDraft"),!1,!0),C("compose",null,"previousTab",k.previousTab,B,b("dispNames.previousTab"),!1,!0),C("compose",null,"nextTab",k.nextTab,B,b("dispNames.nextTab"),!1,!0),C("compose",null,"closeTab",k.closeTab,B,b("dispNames.closeTab"),!1,!0),C("compose",null,"clearMenu",k.clearMenu,B,b("dispNames.clearMenu"),!0),C("compose",null,"saveTemplate",k.saveTemplate,x,b("dispNames.saveTemplate"),!1,!0)),p.push(C("streams","default","AddPost","ctrl+enter","",b("dispNames.addPost"),!1,!0),C("streams","default","AddComment","ctrl+enter","",b("dispNames.addComment"),!1,!0)),q.push(C("task","taskListing","previousTask","upArrow",w,b("previous task")),C("task","taskListing","nextTask","downArrow",w,b("next task")))):m.push(C("default",null,"clearMenu","ESC",B,b("dispNames.clearMenu"),!0))};return l(k),D(k),E(),a.decodedShortcut=k,a.shortcutNames=j,a["default"]=m,a.mail=n,a.compose=o,a.streams=p,a.task=q,a}(window.zmshCut||{}),define([],function(a){var b,c=a("$"),d=a("zmText"),e={},f={},g=function(a,b){a&&a.trim()&&"function"==typeof b&&(f[a]=b)},h=function(a){"function"==typeof a&&(b=a)},i=function(b){var c=a("zmsuite"),d=a("zmTab"),e=c.getAppObj(b||d.currentTab),f=e&&e.obj||{};return f.defaultAppName||f.appname||""},j=function(b){var c=a("zmsuite"),d=a("zmTab"),e=c.getAppObj(b||d.currentTab),f=e&&e.obj||{};return f.hasOwnProperty("defaultAppName")},k=function(){var c=a("zmTab"),d=c.currentTab,e=f[d],g=i(d);return g&&(g=g.charAt(0).toUpperCase()+g.substr(1)),e&&!j(d)?e:g?function(){return g}:b?b:function(){return""}},l=function(){var a=d.get("mailsuite","global.companyName"),b=d.get("mailsuite","global.productName",{companyName:a||"Zoho"});return zmail.i18n&&zmail.i18n.zmail||b||"Zoho Mail"},m=function(){return zmail.aInfo&&zmail.aInfo[zmail.accId]&&zmail.aInfo[zmail.accId].mailId||""},n=function(){return zmail.aInfo&&zmail.aInfo[zmail.accId]&&zmail.aInfo[zmail.accId].disName||""},o=function(a){var b,d=m(),e=n();return a=a||[],"string"==typeof a&&(a=[a]),d||e?a.push(l()+" ("+(d||e)+")"):a.push(l()),b=a.join(" - "),document.title=b,c("title",document.head).text(b),b},p=function(){var a=e.getTitleProvider();return o(a())},q=function(){c.subscribe("mailsuite/appCreated",function(){e.updateTitle()}),c.subscribe("mailsuite/appOpened",function(){e.updateTitle()}),c.subscribe("mailsuite/appClosed",function(){e.updateTitle()}),c.subscribe("mail/listing/viewchanged",function(){e.updateTitle()}),c.subscribe("/apps/tabSwitched",function(){e.updateTitle()})};return e.registerTitleProvider=g,e.getTitleProvider=k,e.registerDefaultProvider=h,e.setTitle=o,e.updateTitle=p,e.init=q,window.zmWinTitle=e,e});var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();define([],function(){var a=zmail.Core.Namespaces,b=a.create("zmHash"),c="undefined"!=typeof window.history&&"function"==typeof window.history.pushState,d={},e=null,f=function(a){a=a||location.hash||"";var b="",c=[];c=a.split("#"),c.shift(),c=c.join("").split("/"),b=c.shift();for(var d in c)(c[d]||"").trim()||c.splice(d,1);return{key:b,params:c}},g=function(a,b){if(a=a||"",b=b||"","string"!=typeof b){for(var c in b)(b[c]||"").trim()||b.splice(c,1);b=b.join("/")}b&&"/"!==b.charAt(0)&&(b="/"+b);var d="#"+a+b;return d},h=function(a,b){var c=!1,e=!0;return a&&$(d).trigger("hash/"+a,{key:a,params:b,handled:function(){c=!0},preventDefaultAction:function(){e=!1}}),{handled:c,defaultAction:e}},i=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"hashChangeHandler",value:function(){var a=f(location.hash),b={handled:!1,defaultAction:!0};b=h(a.key,a.params),b.defaultAction===!0&&$.publish("mailsuite/hashurl/changed",{hashKey:a.key,hashParams:a.params,trigger:!0}),$.publish("mailsuite/hashurl/updated",{hashKey:a.key,hashParams:a.params})}},{key:"bindRouteChangeEvent",value:function(){}},{key:"initialize",value:function(a){var b=this;b.hashChangeHandler=b.hashChangeHandler.bind(b),b.bindRouteChangeEvent()}},{key:"setHash",value:function(a){}}]),a}(),j=function(a){function b(){return _classCallCheck(this,b),_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return _inherits(b,a),_createClass(b,[{key:"bindRouteChangeEvent",value:function(){var a=this;$(window).off("popstate",a.hashChangeHandler).on("popstate",a.hashChangeHandler)}},{key:"setHash",value:function(a){history.pushState({},"",a)}}]),b}(i),k=function(a){function b(){return _classCallCheck(this,b),_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return _inherits(b,a),_createClass(b,[{key:"bindRouteChangeEvent",value:function(){var a=this;$(window).off("hashchange",a.hashChangeHandler).on("hashchange",a.hashChangeHandler)}},{key:"setHash",value:function(a){var b=this,c=function(){setTimeout(function(){$(window).off("hashchange",b.hashChangeHandler).on("hashchange",b.hashChangeHandler)},0)};$(window).off("hashchange",b.hashChangeHandler).on("hashchange",c),location.hash=a,setTimeout(function(){$(window).off("hashchange",c)},0)}}]),b}(i),l=function(a,b){a&&"function"==typeof b&&"function"==typeof b._proxyCallback&&$(d).off("hash/"+a,b._proxyCallback)},m=function(a,b){if(a&&"function"==typeof b){l(a,b);var c=function(a,c){var d=b(c.key,c.params);c.handled(),d.defaultAction===!1&&c.preventDefaultAction()};b._proxyCallback=c,c._originalCallback=b,$(d).on("hash/"+a,c)}},n=function(a){var b=location.hash;b!==a&&e.setHash(a)},o=function(a,b){var c=g(a,b);n(c)},p=function(){n("")},q=function(){var a=c?j:k;e=new a,e.initialize()};return b.register=m,b.unregister=l,b.setHash=o,b.clearHash=p,b.decode=f,b.encode=g,q(),b}),define([],function(){var a=zmail.Core.Namespaces,b=a.create("zmail.Utils.EmailValidator"),c={COMMENT_PART_ATSTART:/^\([^)]*\)/gim,COMMENT_PART_ATEND:/\([^)]*\)$/gim,LOCAL_PART_ALPNUM:/[A-Za-z0-9]/gim,LOCAL_PART_ALLOWED_CHARS:/[!#$%&'*+\-\/=?^_`{|}~]/gim,LOCAL_PART_QUOTED_STRING_ALLOWED_CHARS:/[ "(),:;\\<>@[\\\]]/gim,LOCAL_PART_ALLOWED_UNICODE_CHARS:/[^\u0000-\u007F]/gim,LOCAL_PART_PERIOD_CHAR:/[.]/gim,LOCAL_PART_QUOTED_STRING_FETCH:/(?:\."(.*)"\.)/gim,LOCAL_PART_QUOTED_STRING:/(\.".*"\.)/gim,LOCAL_PART_CONSECUTIVE_PEROID_CHARS:/\.{2,}/gim,DOMAIN_PART_IPV4_CHECK:/\[((?:\d{1,3}\.){3}\d{1,3})\]/gim,DOMAIN_PART_IPV6_CHECK:/\[IPV6:[\d.:a-f]+\]/gim,DOMAIN_SUBPARTS_CHECK:/^(?=[^\-".\s]{1})[^"\s.]+(?![^-".\s]{1})$/gim,DOMAIN_LAST_SUBPART_CHECK:/^(?=[^\-".\s]{1})[a-zA-Z0-9]+(?![^-".\s]{1})$/gim},d={INVALID_LENGTH:[1,"Length of Email Address is invalid"],MISSING_ATTHERATE:[2,"An Email address should have a '@' character"],INVALID_DOMAINLENGTH:[3,"Length of Domain part (after @) of email address is invalid"],INVALID_LOCALPARTLENGTH:[4,"Length of Local part (before @) of email address is invalid"],INVALID_DOMAINPART:[5,"Domain part (after @) of email address is invalid"],INVALID_PERIODUSAGE:[6,"Peroid character (.) usage is invalid in Local part"],INVALID_QUOTE_ENCLOSED_FORMAT:[7,"The quote enclosed local part has character which are now allowed"],INVALID_QUOTED_PART:[8,"The quoted string in local part has characters which are not allowed"],INVALID_LOCALPART_CHARACTERS:[9,"The local part of email has characters which are not allowed"]},e=null,f=function(a){e=a||null},g=function(a){return a=a||"",a=a.replace(c.COMMENT_PART_ATSTART,""),a=a.replace(c.COMMENT_PART_ATEND,"")},h=function(){var a=function(a){return a=a||"",a=a.replace(c.LOCAL_PART_ALPNUM,""),a=a.replace(c.LOCAL_PART_ALLOWED_CHARS,""),a=a.replace(c.LOCAL_PART_QUOTED_STRING_ALLOWED_CHARS,""),a=a.replace(c.LOCAL_PART_ALLOWED_UNICODE_CHARS,""),a=a.replace(c.LOCAL_PART_PERIOD_CHAR,""),0===a.length},b=function(a){return a=a||"",a=a.replace(c.LOCAL_PART_ALPNUM,""),a=a.replace(c.LOCAL_PART_ALLOWED_CHARS,""),a=a.replace(c.LOCAL_PART_ALLOWED_UNICODE_CHARS,""),a=a.replace(c.LOCAL_PART_PERIOD_CHAR,""),0===a.length},e=function(a){if(a=a||"",'"'===a.charAt(0)&&'"'===a.charAt(a.length-1))return!0},h=function(a){return a=a||"",null!==a.match(c.LOCAL_PART_QUOTED_STRING)},i=function(a){return a=a||"",a.match(c.LOCAL_PART_QUOTED_STRING_FETCH)[0]},j=function(a){return a=a||"",a.replace(c.LOCAL_PART_QUOTED_STRING,"")},k=function(a){return a=a||"",a.length>0},l=function(a){a=a||"";var b=!0;return a.indexOf(".")===-1?b:("."===a.charAt(0)||"."===a.charAt(a.length-1)?b=!1:null!==a.match(c.LOCAL_PART_CONSECUTIVE_PEROID_CHARS)&&(b=!1),b)},m=function(c){c=c||"";var m,n=!0;if(k(c)){if(c=g(c),!l(c))return f(d.INVALID_PERIODUSAGE),n=!1;if(e(c))return c=c.substr(1,c.length-2),n=a(c),n||f(d.INVALID_QUOTE_ENCLOSED_FORMAT),n;h(c)?(m=i(c),c=j(c),a(m)?b(c)||(n=!1,f(d.INVALID_LOCALPART_CHARACTERS)):(n=!1,f(d.INVALID_QUOTED_PART))):(n=b(c),n||f(d.INVALID_LOCALPART_CHARACTERS))}else f(d.INVALID_LOCALPARTLENGTH),n=!1;return n};return{validate:m}}(),i=function(){var a=function(a){a=a||"";var b=c.DOMAIN_PART_IPV4_CHECK;return null!==a.match(b)},b=function(a){var b=c.DOMAIN_PART_IPV6_CHECK;return null!==b.exec(a)},e=function(a,b){var d=a.split(".");if(!b.allowLocalDomains&&d.length<2)return!1;var e,f,g,h=c.DOMAIN_SUBPARTS_CHECK,i=c.DOMAIN_LAST_SUBPART_CHECK,j=!0;for(e=0,f=d.length;e<f;e++)if(g=d[e],h.lastIndex=0,e===f-1){if(i.lastIndex=0,null===g.match(i)){j=!1;break}}else if(null===g.match(h)){j=!1;break}return j},h=function(a){return a=a||"",a.length>0},i=function(c,i){c=c||"";var j,k,l=!0;return h(c)?(c=g(c),j=a(c),k=b(c),j||k||(l=e(c,i),l||f(d.INVALID_DOMAINPART))):(f(d.INVALID_DOMAINLENGTH),l=!1),l};return{validate:i}}(),j=function(a){return a=a||"",a.length>0&&a.length<255},k=function(a,b){b=b||{},f(),a=a||"";var c,g,k,l=!0;k=a.lastIndexOf("@"),j(a)?k===-1?(f(d.MISSING_ATTHERATE),l=!1):(c=a.substr(0,k),g=a.substring(k+1),l=h.validate(c,b)&&i.validate(g,b)):(f(d.INVALID_LENGTH),l=!1);var m={};return m.status=l,l||(m.errorCode=e[0],m.errorMessage=e[1]),m};return b.validate=k,b});var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();define([],function(a){var b=a("$"),c=zmail.Core.Namespaces,d=c.create("zmail.Utils.DeferredCollection"),e=function(){function a(b){_classCallCheck(this,a);var c=this;b=b||{},c._collection={},c._keepDeferreds=b.keepDeferreds||!1}return _createClass(a,[{key:"has",value:function(a){var b=this;return a=(a||"").trim(),!!a&&"undefined"!=typeof b._collection[a]}},{key:"get",value:function(a,c){var d=this;return c=c||{},(a=(a||"").trim())?(d._collection[a]||(d._collection[a]=b.Deferred(),d._keepDeferreds||d._collection[a].always(function(){d._collection[a]=void 0})),d._collection[a]):null}},{key:"clear",value:function(a){var b=this,c=null;return(a=(a||"").trim())?(b._collection[a]&&(c=b._collection[a],b._collection[a]=void 0,delete b._collection[a]),c):null}}]),a}(),f=function(a){return new e(a)};return d.create=f,d}),define([],function(){var a,b=zmail.Core.Namespaces,c=b.create("zmail.Utils.FeatureUtil"),d=function(){a=[],zmail.isRebranded?a=["FeatureCards","topbar:apps","SiteTour","ForumAccess","newHelpMenu"]:zmail.isBaihui?a=["FeatureCards","SiteTour"]:zmail.isFuji&&(a=["FeatureCards","topbar:apps","SiteTour","ForumAccess","newHelpMenu"])},e=function(b){var c=!1;return"undefined"!=typeof b&&(c=a.indexOf(b)>-1),c};return c.isHidden=e,d(),c}),function(a){a.call(zmail.Core.Namespaces.create("zmail.Maps"),zmail.Core.Namespaces.get)}(function(a){var b=a("_"),c=this.Map=function(a){return this instanceof c?(a=a||{},this.hash={},void(this.sort=a.sort===!0)):new c(a)};c.prototype={add:function(a,b){if(!a||!b)return this;a=a.toLowerCase();var c=this.hash,d=c[a];return c[a]&&c.hasOwnProperty(a)||(d=c[a]=[]),d.indexOf(b)===-1&&(d.push(b),this.sort&&d.sort()),this},get:function(a){b.isArray(a)||(a=[a]);var c=this.hash;return a.reduce(function(a,b){return b=b.toLowerCase(),a.concat(c[b]||[])},[])},getAll:function(){var a=this;return Object.keys(this.hash).reduce(function(b,c){return b.concat(a.get(c))},[])},remove:function(a,b){a=a.toLowerCase();var c,d=this.hash[a];return d&&d.length&&(c=d.indexOf(b),c>=-1&&d.splice(c,1)),this},update:function(a,b,c){return this.remove(a,b).add(a,c)}}}),function(a){a.call(zmail.Core.Namespaces.create("zmail.Maps"),zmail.Core.Namespaces.get)}(function(a){var b=a("_"),c=a("zmail.Maps.Map"),d=this.IndexedMap=function(){return this instanceof d?(this.charMap=new c({}),void(this.stringMap=new c({}))):new d};d.prototype={add:function(a,b){return a&&b&&(a=a.toLowerCase(),this.charMap.add(a.charAt(0),a),this.stringMap.add(a,b)),this},getValues:function(a){var b=this.stringMap;return a.reduce(function(a,c){return a.concat(b.get(c))},[])},get:function(a){b.isArray(a)||(a=[a]);var c=this;return this.getValues(a.reduce(function(a,b){b=b.toLowerCase();var d=c.charMap.get(b.charAt(0));return b.length>=2&&(d=d.filter(function(a){return 0===a.indexOf(b)})),a.concat(d)},[]))},getAll:function(){var a=this.charMap.getAll();return this.getValues(a)},remove:function(a,b){return a=a.toLowerCase(),this.charMap.remove(a.charAt(0),a),this.stringMap.remove(a,b),this},update:function(a,b,c){return this.remove(a,b).add(a,c),this}}}),function(a){a.call(zmail.Core.Namespaces.create("zmail.Maps"),zmail.Core.Namespaces.get)}(function(a){var b=a("_"),c=a("zmail.Maps.Map"),d=this.DelimitedMap=function(a){a=a||{},b.extend(this,this.defaults(),a)};d.prototype={defaults:function(){return{map:new c,delimiter:"_"}},delimitedNames:function(a){var b=this.delimiter,c=a.split(b),d=[];return c.map(function(a){return d.push(a),d.join(b)})},add:function(a,b){var c=this.delimitedNames(a),d=this.map;return c.forEach(function(a){d.add(a,b)}),this},get:function(a){var c=this.delimitedNames(a),d=this.map;return b.unique(c.reduce(function(a,b){return a.concat(d.get(b))},[]))},getAll:function(){return this.map.getAll()},remove:function(a,b){var c=this.delimitedNames(a),d=this.map;return c.forEach(function(a){d.remove(a,b)}),this}}}),function(a){a.call(zmail.Core.Namespaces.create("zmail.Maps"),zmail.Core.Namespaces.get)}(function(a){var b=a("_"),c=this.MapKeeper=function(a){return this instanceof c?void(this.maps=a):new c(a)};c.prototype={add:function(a){var b=this.maps;for(var c in a){var d=b[c];if(d){var e=a[c];d.add(e.name,e.value)}}return this},get:function(a,c){var d=this.maps,e=[];return c=c||Object.keys(d),c.forEach(function(b){var c=d[b],f=a[b];c&&f&&(e=e.concat(c.get(f)))}),b.unique(e)},getAll:function(a){var b=this.maps;return a=a||Object.keys(b),a.reduce(function(a,c){var d=b[c];return d?a.concat(d.getAll()):a},[])}}});