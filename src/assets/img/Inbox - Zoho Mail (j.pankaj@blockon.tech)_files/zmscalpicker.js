function ZCL_XHR(a,b,c,d){a="/mail"+a;if(ZCL_LOGIN_STATE){rt=ZCL_RQ.length,ZCL_RQ[rt]=ZCL_GetHTTPTransport(),ZCL_URL[rt]=a,typeof b=="function"?(ZCL_RQ[rt].zcal_callback=b,ZCL_RQ[rt].zcal_reqindex=rt,ZCL_RQ[rt].onreadystatechange=function(){var a=this.zcal_callback,b=this.zcal_reqindex;if(this.readyState==4){var c=this.getResponseHeader("Content-Type").toLowerCase().indexOf("text/xml");c!=-1?a(this.responseXML,ZCL_URL[b]):a(this,ZCL_URL[b]),ZCL_RQ[b]=null}}):ZCL_RQ[rt].onreadystatechange=new Function("{ \t\t\t\tif( ZCL_RQ["+rt+"].readyState == 4 ) { \t\t\t\t\tZCL_XHRInclude(ZCL_RQ["+rt+"],ZCL_URL["+rt+"]);\t\t\t\t\tvar ret = ZCL_RQ["+rt+'].getResponseHeader("Content-Type").toLowerCase().indexOf("text/xml");\t\t\t\t\t'+b+"((ret !=-1 ? ZCL_RQ["+rt+"].responseXML:ZCL_RQ["+rt+"]) ,ZCL_URL["+rt+"]);ZCL_RQ["+rt+"]=null;}}"),m="POST";var e=document.cookie;return e=e.substring(e.indexOf("aprmjrnpkcrkks=")+15,e.length),a.indexOf("?")!=-1?(c=a.substring(a.indexOf("?")+1,a.length),a=a.substring(0,a.indexOf("?"))):c="",c+=(c!=""?"&":"")+"mstpcrdhkur="+(e.indexOf(";")!=-1?e.substring(0,e.indexOf(";")):e),ZCL_RQ[rt].open(m,a,!0),m=="POST"?(d||(d="application/x-www-form-urlencoded;charset=UTF-8"),ZCL_RQ[rt].setRequestHeader("Content-Type",d),ZCL_RQ[rt].send(c)):ZCL_RQ[rt].send(null),!0}return!1}function ZCL_XHRInclude(){return!0}function ZCL_XHRSync(a,b,c){var d=ZCL_GetHTTPTransport();return m=b?"POST":"GET",a+=(a.indexOf("?")+1?"&":"?")+(new Date).getTime(),d.open(m,a,!1),m=="POST"?(c||(c="application/x-www-form-urlencoded;charset=UTF-8"),d.setRequestHeader("Content-Type",c),d.send(b)):d.send(null),d}function ZCL_$(a){return document.getElementById(a)}function ZCL_getCalopt(a){var b,c=$.Deferred();return typeof zcal!="undefined"&&typeof zcal.cdata=="undefined"?ZCL_uXHR("/cal/set.do?type=opt",function(d){d.status=="200"?(b=JSON.parse(d.responseText),c.resolve(b.opt[a])):c.reject()}):(b=zcal.cdata.opt,c.resolve(b[a])),c}function ZCL_getFilter(){var a=zmail.Search.Models.Filters,b=[a.ZCalTitleFilter,a.ZCalAlldayFilter,a.LocationFilter,a.ZCalCalendarFilter,a.ZCalOrganizerFilter,a.ZCalDateFilter,a.ZCalFromDateFilter,a.ZCalToDateFilter];return b}function ZCL_getWeekStart(){var a="WK";return ZCL_getCalopt(a)}function ZCL_mailDetViewEvePopup(a){var b=a.ST;if(b!=undefined)var c=b.slice(0,2),d=b.slice(2,4),e=c>12?c-12:c,f=c>12?"pm":"am",g=e+":"+d+" "+f;var h=ZCL_dputDate(a.SD),i={},j=$('<ul id="c_event" class="zm_dateExt shw"></ul>'),k=$('<li><div class="zmcDatePost"><div class="SC_floatLabel placeholder zm_mention noBdr" style="color: transparent; overflow: hidden;"><div class="zm_mentionbg"></div><input type="text" id="de_eveTitle" placeholder="Untitled event" value="'+a.SUM+'" class="ZT_prvTitle">'+"<label>Event Title</label>"+"</div>"+'<div class="SC_floatLabelRow fLCol3">'+'<div class="SC_floatLabel placeholder noBdr"  id="de_eveDate">'+'<input class="hasDD" id="eveInpDt" title="Date" value="'+h+'" type="text" required="" readonly="" placeholder="Pick a date">'+"<label>When</label>"+"</div>"+'<div class="SC_floatLabel placeholder noBdr" id="de_eveTime">'+'<input class="hasDD" id="eveInpTi" title="Time" type="text" required="" value="'+(g!=undefined?g:"")+'"  placeholder="Time">'+"</div>"+'<div class="SC_floatLabel placeholder noBdr" id="de_eveDur">'+'<input class="hasDD" id="eveInpDu" title="Duration" onclick="ZCL_streamEve.setEventDurDropdwn(event,this)" value="00:30 Min" type="text" readonly="" placeholder="Duration">'+"</div>"+"</div>"+'<div class="SC_dyn" id="optMore1">'+'<div class="SC_floatLabel placeholder noBdr">'+'<input class="hasDD" type="text"  id="de_eveLoc" required=""  placeholder="Set a location">'+"<label>Where</label>"+"</div>"+'<div class="SC_floatLabel placeholder noBdr">'+'<textarea id="de_eveDesc" class="" placeholder="Enter description" spellcheck="true" style="z-index: auto; position: relative; line-height: 18px; font-size: 14px; transition: none; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);"></textarea>'+"<label>Description</label>"+"</div>"+"</div>"+'<div class="addInv SC_floatLabel flFLabel clearfix" id="de_attDiv" title="Attendee">'+'<div class="SC_cs myInv dFill addNew" id="de_eveAtt" data-uid="52882865"><div class="SC_avtr "><span><i class="msi-plus"></i></span></div></div>'+"</div>"+'<div class="SC_frt " id="moreOpt1" style="margin-top: 15px;">'+'<span class="SC_gray SC_dyn">Less<i class="msi-prev SC_gray"></i></span>'+'<span class="SC_gray">More<i class="msi-next SC_gray"></i></span>'+"</div>"+'<div class="SC_PUbtm"><span id="de_savEve">Create</span><span id="de_canEve" data-val="Cancel">Cancel</span></div>'+"</div></li>");return j.append(k),$(j).on("click",function(a){$(a.target).parent()[0].id==="de_eveAtt"?($("#de_attDiv")[0].childNodes.length>2?($(j).find("#de_attDiv")[0].className="addInv SC_floatLabel flFLabel clearfix edit_parti",$(j).find("input").focus()):($(j).find("#de_attDiv")[0].className="addInv SC_floatLabel flFLabel clearfix edit_parti",$(j).find("#de_attDiv")[0].innerHTML='<div id="att"></div><input type="text" class="zm_sgst" id="de_att"><div class="SC_cs myInv dFill addNew" id="de_eveAtt" data-uid="52882865"><div class="SC_avtr "><span><i class="msi-plus"></i></span></div></div>',$(j).find("input").focus()),bindFunction(j)):a.target.id!=="de_attDiv"&&$(a.target).parent()[0].id!=="de_eveAtt"&&$(a.target).parent()[0].id!=="de_attDiv"&&$(a.target).parent()[0].id!=="at"&&($("#de_attDiv")[0].childNodes.length>1?$(j).find("#de_attDiv")[0].className="addInv SC_floatLabel flFLabel clearfix":($(j).find("#de_attDiv")[0].className="addInv SC_floatLabel flFLabel clearfix",$(j).find("#de_attDiv")[0].innerHTML='<div class="SC_cs myInv dFill addNew" id="de_eveAtt" data-uid="52882865"><div class="SC_avtr "><span><i class="msi-plus"></i></span></div></div>'))}),$(j).find("#moreOpt1").on("click",function(){var a=$(j).find("#optMore1")[0].className;$(j).find("#optMore1")[0].className=a==""?"SC_dyn":"",$(j).find("#moreOpt1")[0].childNodes[0].className=$(j).find("#moreOpt1")[0].childNodes[0].className=="SC_gray SC_dyn"?"SC_gray":"SC_gray SC_dyn",$(j).find("#moreOpt1")[0].childNodes[1].className=$(j).find("#moreOpt1")[0].childNodes[1].className=="SC_gray SC_dyn"?"SC_gray":"SC_gray SC_dyn"}),deEveDatepicker($(j).find("#de_eveDate")[0]),deEveTimepicker($(j).find("#de_eveTime")[0]),$(j).find("#de_canEve").on("click",function(){zmUtil.hideMenu()}),$(j).find("#de_savEve").on("click",function(){ZCL_saveDetCreEvent()}),i.$el=$(j),i}function bindFunction(a){var b=$(a).find("#de_att");zmAppLoader.load("zmContactsAutoComplete").done(function(){zmContactsAutoComplete.autoComplete({input:b[0],contactType:"org",exclude:function(){var a=[];if($("#de_attDiv")[0]){var b=$("#de_attDiv").find("#att")[0].childNodes;for(var c=0;c<b.length;c++)b[c].id=="at"&&a.push(b[c].getElementsByTagName("SPAN")[0].id)}return a},excludeMe:!0,onSelect:function(c,d){var d=d.item.attributes;dataObj.push(d);var e=$(a).find("#de_attDiv"),f=document.createElement("div");f.className="SC_cs myInv dFill",f.setAttribute("data-uid",d.zid),f.setAttribute("id","at"),f.innerHTML='<div class="SC_avtr"><img src='+d.profileImage+'></div><span id="'+d.id+'">'+d.firstName+'</span><i class="msi-close closePopup"></i></div>',e.find("#att").append($(f)),$(b).val(""),$(f).find(".closePopup").on("click",function(){$(this).parent("#at").remove()})}})})}function deEveDatepicker(a){(function(b){if(a){var c=a.getElementsByTagName("input")[0];b(a).picker("date",{dform:"MM/dd/yyyy",refer:c,wkst:0,mode:"popup",update:"yes",minhgt:251}).bind()}})(ZEVENTS)}function deEveTimepicker(a){(function(b){if(a){var c=ZCL_streamEve.curStartAndEndTime(),d=a.getElementsByTagName("input")[0];d.value=d.value!=""?d.value:c.ST,b(a).picker("time",{tform:"hh:mm a",type:1}).bind()}})(ZEVENTS)}function ZCL_saveDetCreEvent(){var a=$("#de_eveTitle")[0].value;if(a=="")return zmUtil.succErrMsg("e",zcal.i18n.plenttle),!1;var b=$("#eveInpDt")[0].value,c=$("#eveInpTi")[0].value,d=$("#eveInpDu")[0].value,e=ZCL_streamEve.calcEventTime(b,c,d),f=e.ST_MONTH+"/"+e.ST_DATE+"/"+e.ST_YEAR,g=e.END_MONTH+"/"+e.END_DATE+"/"+e.END_YEAR,h=e.ST_HOUR+e.ST_MIN,i=e.END_HOUR+e.END_MIN,j=$("#de_eveLoc")[0].value,k=$("#de_eveDesc")[0].value,l="";for(var m in dataObj)l+=l==""?dataObj[m].email:","+dataObj[m].email;var n=zcal.cdata.defcal,o=zcal.getCalObj(n),p={EID:"",EUID:"",EPERM:o[12]>=2?2:o[12]==1?1:0,DPERM:o[12]>=2?2:0,SD:f,ST:h,ED:g,ET:i,ADAY:0,LOC:j,DESC:k,ETZ:"",IN_ETZ:!1,CLASS:0,IMP:0,CNAME:n,TRANS:1,ETSK:0,ECRM:0,ENTS:0,EMET:0,LINK:"",SUM:a,EC:-1,ATT:l,ADD_MODE:"PP"};ZCL_detailObj(p),zmUtil.hideMenu()}ZEVENTS=function(a){return new ZCALPicker(a)},ZEVENTS.count=0,ZEVENTS.obj={},ZEVENTS.template=function(a){switch(a){case"type1":return{_HTML:'<li class="zcal_table zcal_mCaltt"><ul><li class="zcal_arr"><i class="#py#" rel="PY"></i></li><li class="zcal_arr"><i class="#pm#" rel="PM"></i></li><li>#HEAD#</li><li class="zcal_arr"><i class="#nm#" rel="NM"></i></li><li class="zcal_arr"><i class="#ny#" rel="NY"></i></li></ul></li><li class="zcal_mCalcn"><ul><li class="zcal_mCaldy zcal_table"><ul>#wk<li>#item#</li>wk#</ul></li><li class="zcal_table" rel="DT">#dr<div>#dc<#tag#>#item#</#tag#>dc#</div>dr#</li><li class="zcal_tmz"><span>#tz#</span></li></ul></li>',_cont:{tag:"UL",_class:"zcal_mCal"},_class:{sel:"i",hglt:"s",dis:"u",selhgt:"p",nor:"b"}};case"type2":return{_HTML:'<ul class="zcal_mCal #shadow# #hover#"><li class="zcal_table zcal_mCaltt"><ul><li class="zcal_arr"><i class="#py#" rel="PY"></i></li><li class="zcal_arr" ><i class="#pm#" rel="PM"></i></li><li>#HEAD#</li><li class="zcal_arr"><i class="#nm#" rel="NM"></i></li><li class="zcal_arr"><i class="#ny#" rel="NY"></i></li></ul></li><li class="zcal_mCalcn"><ul><li class="zcal_mCaldy zcal_table"><ul>#wk<li>#item#</li>wk#</ul></li><li class="zcal_table" rel="DT">#dr<div>#dc<#tag# rel=#month#Y#year#>#item#</#tag#>dc#</div>dr#</li></ul></li></ul>',_class:{sel:"i",hglt:"s",dis:"u",selhgt:"p",nor:"b",shdwn:"zcal_mCalppu",shup:"zcal_mCalppd"},_cont:{tag:"DIV",_class:"zcal_cn"}};case"type3":return{_HTML:'<li class="zcal_table zcal_mCaltt"><ul><li class="zcal_arr" ><i class="#py#" rel="PY"></i></li><li class="zcal_arr" ><i class="#pm#" rel="PM"></i></li><li>#HEAD#</li><li class="zcal_arr"><i class="#nm#" rel="NM"></i></li><li class="zcal_arr" ><i class="#ny#" rel="NY"></i></li></ul></li><li class="zcal_mCalcn"><ul><li class="zcal_mCaldy zcal_table"><ul>#wk<li>#item#</li>wk#</ul></li><li rel="DT" class="zcal_table">#dr<div>#dc<#tag#>#item#</#tag#>dc#</div>dr#</li></ul></li>',_class:{sel:"em",dis:"u",nor:"b"},_cont:{tag:"UL",_class:"zcal_mCal"},_bsecont:{tag:"DIV",_class:"zcal_mpcal"},_patch:{tag:"DIV",_cont:"<b></b>"}};case"type4":return{_HTML:'<li class="zcl_mCaltt zcl_table"><ul><li><span>#HEADM#</span><span>#HEADY#</span></li><li class="zcl_W20"><i class="#pm#" rel="PM"></i><i class="#nm#" rel="NM"></i></li></ul></li><li class="zcl_mCaldy zcl_table"><ul>#wk<li#hgt#>#item#</li>wk#</ul></li><li class="zcl_table zcl_mCaldt" rel="DT">#dr<div>#dc<#tag#>#item#</#tag#>dc#</div>dr#</li></ul></li>',_cont:{tag:"UL",_class:"zcl_mCal"},_class:{sel:"i",hglt:"s",dis:"u",selhgt:"p",nor:"b"},_cust:{dysel:"zcl_sl",pm:"zcli-larrow",nm:"zcli-rarrow"}};case"type5":return{_HTML:'<div class="zcal_mCal #shadow# #hover# zcl_mCalwti"><div class="zcal_table"><ul><li class="zcal_mCalti"><div class="zcal_table zcal_mCaltt"><ul><li class="zcal_arr"><i class="zci-fst" rel="PY"></i></li><li class="zcal_arr"><i class="zci-pre" rel="PM"></i></li><li>#HEAD#</li><li class="zcal_arr"><i class="zci-nxt" rel="NM"></i></li><li class="zcal_arr"><i class="zci-lst" rel="NY"></i></li></ul></div><div class="zcal_mCalcn"><ul><li class="zcal_mCaldy zcal_table"><ul>#wk<li>#item#</li>wk#</ul></li><li class="zcal_table" rel="DT">#dr<div>#dc<#tag# rel=#month#Y#year#>#item#</#tag#>dc#</div>dr#</li></ul></div></li><li class="zcal_mTil"><i class="zci-tiupar" rel="UT"></i><div ><ul id="zcl_t" style="overflow-y:auto;height:205px">#tr<li#ti# rel="TP">#item#</li>tr#</ul></div><i class="zci-tidnar" rel="TD"></i></li></ul></div><div class="zcal_mCalbtm"><div class="SC_PUbtm"><span rel="OK">Ok</span></div></div></div>',_class:{sel:"i",hglt:"s",dis:"u",selhgt:"p",nor:"b",shdwn:"zcal_mCalppu",shup:"zcal_mCalppd"},_cont:{tag:"DIV",_class:"zcal_cn"}};default:return}},ZEVENTS.selector=function(a){var b={},c=a.trim().split(" ");b.target=(c[0]||c).substring(1);if(c.length==2){c[1]=c[1].trim();var d=c[1].indexOf("[");if(d!=-1){var e=c[1].indexOf("]"),f=c[1].indexOf("."),g=c[1].indexOf("=");b.ele=c[1].substring(0,d),b.atr=c[1].substring(d+1,e),b.atr_val=c[1].substring(g+1)}else b.atr=c[1][0]==="#"?"id":c[1][0]=="."?"class":"",b.atr!=""?(b.atr_val=c[1].substring(c[1].search(/(#|\.)/g)+1),b.ele=""):(b.ele=c[1],b.atr_val="")}else b.ele="",b.atr="",b.atr_val="";return b},ZEVENTS.removeall=function(a){a=a?a:"picker";if(typeof a=="string"&&a=="picker"&&ZEVENTS.obj.picker){var b=ZEVENTS.obj.picker;for(var c in b)ZEVENTS.remove(b[c],a)}},ZEVENTS.remove=function(a,b){if(typeof a=="object"&&a._name){var c=a._cont;a.clearobj(),a.clearvar(),a=null,b=b||"picker",delete ZEVENTS.obj[b][c]}},ZEVENTS.clear=function(a){typeof a=="object"&&a._name&&(a.clearobj(),ZEVENTS.obj.state=null)},ZCALPicker=function(a){return this.tar=a,this},ZCALPicker.prototype.picker=function(a,b){var c=ZEVENTS.obj.picker||(ZEVENTS.obj.picker={}),d;return b.target=this.tar,a=="date"?d=new ZCALdatepickr(b):a=="range"?d=new ZCALrangepickr(b):a=="time"&&(d=new ZCALtimepickr(b)),d?c[d._cont]=d:"",d};var ZCALtimepickr=function(a){return a?(this._name="timepicker",this._type=a.type&&/^[123]$/.test(a.type)?a.type:1,this._tar=typeof a.target=="object"?a.target:document.getElementById(a.target),this._tform=a.tform,a.refer?this._refer=typeof a.refer=="object"?a.refer:document.getElementById(a.refer):this._tar&&(this._refer=this._tar.tagName.toLowerCase()=="input"?this._tar:this._tar.getElementsByTagName("input")[0]),this.os=0,this.n="",this.tmpO="no",this._cont=(new Date).getTime()+"_"+ZEVENTS.count++,this._prevalue="",this._menu=!1,this._sel=-1,this._errfn=[],this._chgefn=[],this):null};ZCALtimepickr.prototype.on=function(a,b){return a=="change"&&"function"==typeof b?this._chgefn.push(b):a=="error"&&"function"==typeof b&&this._errfn.push(b),this},ZCALtimepickr.prototype.bind=function(){var a=this,b=function(){if(a._inEl){ZCALremoveListener(a._inEl,"input",h),ZCALremoveListener(a._inEl,"keydown",i),ZCALremoveListener(a._inEl,"blur",k),ZCALremoveListener(a._inEl,"keypress",j);var b=a._inEl.parentNode.removeChild(a._inEl);e1=null}if(a._ulEl){ZCALremoveListener(a._ulEl,"mousedown",l);var b=a._ulEl.parentNode.removeChild(a._ulEl);e1=null}a._menu=!1,a._sel=-1,a._prevalue="",a._ulEl=a._inEl=null};a.clearobj=function(){ZEVENTS.obj.state=null;var d=document.getElementById(a._cont);d&&(ZCALremoveListener(d,"mousedown",c),ZCALremoveListener(document,"scroll",docevehandle),ZCALremoveListener(document,"mousedown",docevehandle),ZCALremoveListener(document,"mousewheel",docevehandle),ZCALremoveListener(a._tar,"keydown",f),d=d.parentNode.removeChild(d),d=null,a._sel=-1),a._inEl&&(a._refer.placeholder!=""?a._refer.value=a._refer.placeholder:a._refer.value=a._inEl.value,a._refer.placeholder=a._tform,b());return},a.clearvar=function(){a._type==1?(ZCALremoveListener(a._tar,"focus",e),ZCALremoveListener(a._tar,"click",e),ZCALremoveListener(a._tar,"keydown",f)):a._type==3?(ZCALremoveListener(a._refer,"keydown",g),ZCALremoveListener(a._refer,"keyup",g),ZCALremoveListener(a._refer,"mouseup",g)):a._type==2&&ZCALremoveListener(a._refer,"focus",m)};var c=function(b){var c=b.target||event.srcElement;c.tagName.toLowerCase()=="li"&&(a._refer.value=c.innerHTML,d(),a.clearobj()),ZCALprevDef(b)},d=function(){var b=a._errfn,c=a._chgefn,d=a._tform=="hh:mm a"?a.get12hrTime(a._refer.value):a.get24hrTime(a._refer.value);if(!d)for(var e in b)b[e].call(a._refer);else for(var e in c)c[e].call(a._refer)},e=function(b){ZEVENTS.obj.state&&ZEVENTS.clear(ZEVENTS.obj.state),ZEVENTS.obj.state=a;var d=b.target||b.srcElement,e=this.tagName.toLowerCase()=="input"?this:this.getElementsByTagName("input")[0],g=e.value,h=a._tform||e.getAttribute("tform"),i=g.changeTimetoNumber(h);a._sel=i;var j=document.body.appendChild(document.createElement("ul"));j.style.width=(this.clientWidth<110?110:this.clientWidth)+"px",j.style.left=this.positionX()+"px",j.id=a._cont,ZCALaddListener(j,"mousedown",c);var k=(document.documentElement.clientHeight||window.innerHeight)+Math.max(document.body.scrollTop,document.documentElement.scrollTop);j.className="zcal_tilst "+(this.positionY()+250>k?"zcal_tilsbt":"zcal_tilstp");var l="";for(var m=0;m<48;m++)l+='<li rel="'+m+'"'+(m==i?'class="zcal_sl"':"")+">"+(m+"").changeNumbertoTime(h)+"</li>";j.innerHTML=l,j.scrollTop=i*24,j.style.top=this.positionY()+250<k?this.positionY()+this.offsetHeight+"px":this.positionY()-j.offsetHeight+"px",ZCALprevDef(b),ZCALaddListener(document,"scroll",docevehandle=function(){a.clearobj()}),ZCALaddListener(document,"mousedown",docevehandle=function(){a.clearobj()}),ZCALaddListener(a._tar,"keydown",f),ZCALaddListener(a._refer,"blur",docevehandle=function(){a.clearobj()})},f=function(b){var c=b.which||b.keyCode||b.charCode,e=document.getElementById(a._cont).getElementsByTagName("li");c==38&&a._sel!=0?(e[a._sel--].className="",e[a._sel].className="zcal_sl",document.getElementById(a._cont).scrollTop=a._sel*24,d()):c==40&&a._sel!=e.length-1?(e[a._sel++].className="",e[a._sel].className="zcal_sl",document.getElementById(a._cont).scrollTop=a._sel*24,d()):c==13&&(this.value=e[a._sel].innerHTML,a.clearobj())},g=function(b){ZEVENTS.obj.state&&ZEVENTS.clear(ZEVENTS.obj.state),ZEVENTS.obj.state=a;var c=this;b=b||event;var e=b.which||b.keyCode||b.charCode,f=(a._tform||c.getAttribute("tform"))=="HH:mm"?!0:!1;if(b.type.toLowerCase()=="mouseup"){var g=ZCALselstart(c);return a.os=g<=2?ZCALcrtesel(c,0,2):g>=3&&g<=5?ZCALcrtesel(c,3,5):g>=6&&g<=8?ZCALcrtesel(c,6,8):0,!0}if(b.type.toLowerCase()=="keyup"&&e!=9)return;switch(!0){case e==37:a.os=a.os==0&&!f?ZCALcrtesel(c,6,8):a.os==0&&f?ZCALcrtesel(c,3,5):a.os==3?ZCALcrtesel(c,0,2):a.os==6?ZCALcrtesel(c,3,5):0;break;case e==38:a.shiftnos(c,a.os,-1),d();break;case e==39:a.os=a.os==0?ZCALcrtesel(c,3,5):a.os==3&&!f?ZCALcrtesel(c,6,8):a.os==3&&f?ZCALcrtesel(c,0,2):a.os==6?ZCALcrtesel(c,0,2):0;break;case e==40:a.shiftnos(c,a.os,1),d();break;case e>=48&&e<=57:a.typenos(c,e,a.os),d();break;case e==65||e==80:a.typenos(c,e,a.os),d();break;case e==9:if(b.type.toLowerCase()=="keydown"){if(ZCALselend(c)==c.value.length)return;a.tmpO="yes",ZCALselend(c)-ZCALselstart(c)!=2?a.os=ZCALcrtesel(c,0,2):a.os=a.os==0?ZCALcrtesel(c,3,5):a.os==3&&!f?ZCALcrtesel(c,6,8):a.os==3&&f?ZCALcrtesel(c,0,2):a.os==6?ZCALcrtesel(c,0,2):0}else b.type.toLowerCase()=="keyup"&&a.tmpO=="no"?ZCALselend(c)-ZCALselstart(c)!=2?a.os=ZCALcrtesel(c,0,2):a.os=a.os==0?ZCALcrtesel(c,3,5):a.os==3&&!f?ZCALcrtesel(c,6,8):a.os==3&&f?ZCALcrtesel(c,0,2):a.os==6?ZCALcrtesel(c,0,2):0:b.type.toLowerCase()=="keyup"&&a.tmpO=="yes"&&(a.tmpO="no",ZCALprevDef(b));break;default:}ZCALprevDef(b)},h=function(){if(a._prevalue==this.value)return;this.value=this.value.replace("'","").replace("&","").replace("%","").replace(".",""),a._prevalue=this.value;var b=a._tform=="hh:mm a"?a.timeObj12hr(this.value):a.timeObj24hr(this.value);if(b){if(b[0]==""){var c=a._ulEl.getElementsByTagName("li");c[a._sel].className="",c[b[1]].className="zcal_sl"}else{a._ulEl.innerHTML=b[0];var d=a._ulEl.getElementsByTagName("li").length;a._ulEl.style.height=24*(d<=2?d:4)+"px"}a._sel=b[1],a._ulEl.style.display="",a._ulEl.scrollTop=24*b[1],a._prevalue=this.value=a._tform=="hh:mm a"?this.value.toUpperCase().replace(/^0/,""):this.value,a._refer.placeholder=b[2],a._refer.value=""}else a._ulEl.style.display="none",a._refer.placeholder="",a._refer.value=""},i=function(c){var e=c.which||c.keyCode||c.charCode,f=a._ulEl.getElementsByTagName("li");if(e==38)a._sel>0&&(f[a._sel--].className="",f[a._sel].className="zcal_sl",this.value=f[a._sel].innerHTML,a._refer.placeholder=f[a._sel].innerHTML,a._ulEl.scrollTop=24*a._sel);else{if(e==39)return a._refer.placeholder!=""&&(this.value=a._refer.placeholder.substring(0,this.value.length+1)),h.call(this,c);e==40?f.length-1>a._sel&&(f[a._sel++].className="",f[a._sel].className="zcal_sl",this.value=f[a._sel].innerHTML,a._refer.placeholder=f[a._sel].innerHTML,a._ulEl.scrollTop=24*a._sel):e==13&&(a._refer.placeholder!=""?a._refer.value=a._refer.placeholder:a._refer.value=this.value,a._refer.placeholder=a._tform,d(),b())}},j=function(b){var c=b.which||b.keyCode||b.charCode;if(!/^(8|4[0689]|5[0-8]|3[7-9])$/.test(c)&&a._tform=="HH:mm")return b.preventDefault(),b.stopPropagation(),!1;var d=this.selectionStart,e=this.selectionEnd;if(d==e&&e==this.value.length&&!/^(37|8|46)$/.test(c)){var f=String.fromCharCode(c),g=a._tform=="hh:mm a"?a.get12hrTime(this.value+f):a.get24hrTime(this.value+f);g||(b.preventDefault(),b.stopPropagation())}},k=function(){a._refer.placeholder!=""?a._refer.value=a._refer.placeholder:a._refer.value=this.value,a._refer.placeholder=a._tform,d(),b()},l=function(c){var e=c.target||c.srcElement;e.tagName.toLowerCase()=="li"&&(a._refer.value=e.innerHTML,a._refer.placeHolder="",b(),d())},m=function(b){ZEVENTS.obj.state&&ZEVENTS.clear(ZEVENTS.obj.state),ZEVENTS.obj.state=a;var c=this.parentNode;a._inEl=c.getElementsByTagName("input")[1],a._ulEl=c.getElementsByTagName("ul")[0],a._inEl||(a._inEl=c.appendChild(document.createElement("input")),a._inEl.type="text",a._inEl.className="zcal_tiabs",ZCALaddListener(a._inEl,"input",h),ZCALaddListener(a._inEl,"keydown",i),ZCALaddListener(a._inEl,"blur",k),ZCALaddListener(a._inEl,"keypress",j)),a._ulEl||(a._ulEl=c.appendChild(document.createElement("ul")),ZCALaddListener(a._ulEl,"mousedown",l));var d=a._tform=="hh:mm a"?a.timeObj12hr(this.value):a.timeObj24hr(this.value);if(d){a._ulEl.innerHTML=d[0],a._ulEl.style.display="";var e=a._ulEl.getElementsByTagName("li").length;a._ulEl.style.height=24*(e<=2?e:4)+"px",a._ulEl.scrollTop=24*d[1],a._inEl.value=a._tform=="hh:mm a"?this.value.toUpperCase().replace(/^0/,""):this.value,this.placeholder=d[2],this.value="",a._sel=d[1],a._prevalue=this.value}else a._inEl.value=this.value,this.value="",this.placeholder="",a._ulEl.style.display="none";a._inEl.focus()};return a._type==1?(ZCALaddListener(a._tar,"focus",e),ZCALaddListener(a._tar,"click",e)):a._type==2?ZCALaddListener(a._refer,"focus",m):a._type==3&&(ZCALaddListener(a._refer,"keydown",g),ZCALaddListener(a._refer,"keyup",g),ZCALaddListener(a._refer,"mouseup",g)),this},ZCALtimepickr.prototype.typenos=function(a,b,c){if(c==6&&/(A|P)/ig.test(String.fromCharCode(b))){var d=String.fromCharCode(b);return _ch=d=="A"?" "+ZCALtform[0]:" "+ZCALtform[1],a.value=a.value.substring(0,5)+_ch,ZCALcrtesel(a,c,c+2),!0}var e=String.fromCharCode(b),f=(this._tform||a.getAttribute("tform"))=="HH:mm"?!0:!1;this.n==""?(this.n=e,e="0"+e):(e=this.n+""+e,this.n=""),c==0&&(!f&&parseInt(e,10)<=12||f&&parseInt(e,10)<=23)?a.value=e+a.value.substring(2):c==3&&parseInt(e,10)<=59&&(a.value=a.value.substring(0,3)+e+a.value.substring(5));var g=this;setTimeout(function(){g.n=""},1e4),ZCALcrtesel(a,c,c+2)},ZCALtimepickr.prototype.shiftnos=function(a,b,c){var d=a.value.substring(b,b+2);if(b==0){var e=(this._tform||a.getAttribute("tform"))=="HH:mm"?!0:!1,f=parseInt(d,10);e&&f==0&&c==-1?f=23:!e&&f==1&&c==-1?f=12:e&&f==23&&c==1?f=0:!e&&f==12&&c==1?f=1:f+=c,a.value=(f<=9?"0":"")+f+a.value.substring(2,8)}else if(b==3){var f=parseInt(d,10);f==0&&c==-1?f=59:f==59&&c==1?f=1:f+=c,a.value=a.value.substring(0,3)+(f<=9?"0":"")+f+a.value.substring(5,8)}else b==6&&(d==ZCALtform[0]?a.value=a.value.substring(0,5)+" "+ZCALtform[1]:a.value=a.value.substring(0,5)+" "+ZCALtform[0]);return ZCALcrtesel(a,b,b+2),"true"},ZCALtimepickr.prototype.timeObj12hr=function(a){var b=this.get12hrTime(a),c="";if(b&&b.arr){for(var d=0;d<b.arr.length;d++)c+="<li"+(d==b.sel?" class='zcal_sl'":"")+">"+b.arr[d]+"</li>";return this._menu=!1,[c,b.sel,b.arr[b.sel]]}if(b&&b.sel>-1){var e="";if(!this._menu)for(var d=0;d<24;d++){var f=d==0?"12:00 AM":d==12?"12:00 PM":d>12?d-12+":00 PM":d+":00 AM";d==b.sel&&(e=f),c+="<li"+(d==b.sel?" class='zcal_sl'":"")+">"+f+"</li>",c+="<li>"+f.replace("00","30")+"</li>"}else e=b.sel==0?"12:00 AM":b.sel+":00 AM";return this._menu=!0,[c,b.sel*2,e]}return!1},ZCALtimepickr.prototype.get12hrTime=function(a){var b=["^([0-9])$","^(0?[1-9]|1[012])$","^(0?[1-9]|1[012])(:)$","^(0?[1-9]|1[012])(:)([0-5])$","^(0?[1-9]|1[012])(:)([0-5][0-9])$","^(0?[1-9]|1[012])(:)([0-5][0-9])(\\s)$","^(0?[1-9]|1[012])(:)([0-5][0-9])(\\s)([APap])$","^(0?[1-9]|1[012])(:)([0-5][0-9])(\\s)([APap][mM])$"],c=a.length,d;c>1&&a[1]==":"&&c++;if(!(c>0&&c<=8&&(d=a.match(new RegExp(b[c-1])))))return c==0?!1:!1;d=Array.prototype.slice.call(d,1);if(c<4){var e=parseInt(d[0],10);return{sel:e>11?0:e==0?12:e}}if(c==4)return a=a[0]==0?a.slice(1):a,{arr:[a+"0 AM",a+"5 PM",a+"0 AM",a+"5 PM"],sel:0};if(c>4){var e=a.substring(0,5).trim();e=e[0]==0?e.slice(1):e;var f=d[4]?/a/i.test(d[4][0])?0:1:0;return{arr:[e+" AM",e+" PM"],sel:f}}},ZCALtimepickr.prototype.timeObj24hr=function(a){var b=this.get24hrTime(a),c=tmp="";if(b&&b.arr){for(var d=0;d<b.arr.length;d++)c+="<li "+(d==b.sel?"class='zcal_sl'":"")+">"+b.arr[d]+"</li>";return this._menu=!1,[c,b.sel,b.arr[b.sel]]}if(b&&b.sel>-1){if(!this._menu)for(var d=0;d<24;d++)tmp=d<10?"0"+d:d,c+="<li "+(d==b.sel?"class='zcal_sl'":"")+" >"+tmp+":00</li>",c+="<li>"+tmp+":30</li>";return this._menu=!0,[c,b.sel*2,(b.sel<10?"0"+b.sel:b.sel)+":00"]}},ZCALtimepickr.prototype.get24hrTime=function(a){var b=["^([0-2])$","^([0-1][0-9]|2[0-3])$","^([0-1][0-9]|2[0-3])(:)$","^([0-1][0-9]|2[0-3])(:)([0-5])$","^([0-1][0-9]|2[0-3])(:)([0-5][0-9])$"],c=a.length,d;if(!(c>0&&c<6&&(d=a.match(new RegExp(b[c-1])))))return c==0?!1:!1;d=Array.prototype.slice.call(d,1);if(c==2){var e=parseInt(d[0],10);return{sel:e}}if(c<4){var e=parseInt(d[0],10);return{sel:d[0].length==1&&e<=2?e*10:e}}if(c==4)return{arr:[a+"0",a+"5"],sel:0};if(c==5)return{arr:[a],sel:0}};var ZCALrangepickr=function(a){if(!a)return;this._name="rangepicker",a.range=a.range||["",""],a.range[0]=a.range[0].trim()!=""?new Date(a.range[0].parseDate(a.dform)):new Date(1947,8,15),a.range[1]=a.range[1].trim()!=""?new Date(a.range[1].parseDate(a.dform)):new Date(2147,8,15),a.range[1]=a.range[0].diffTo("month",a.range[1])>=0?a.range[1]:new Date(2147,8,15);var b=new Date,c=a.range[0].diffTo("month",new Date),d=b.diffTo("month",a.range[1]),e=c>=0&&d>0?new Date((new Date).setDate(1)):c<=0?a.range[0]:d<=0?new Date(a.range[1].getFullYear(),a.range[1].getMonth()-1,1):"",f=new Date(e.getFullYear(),e.getMonth()+1);return this._r1=new ZCALdatepickr({dform:a.dform||"MM/DD/YYYY",curdate:e,wkst:a.wkst||0,template:"type3",_cont:(new Date).getTime()+"_"+ZEVENTS.count++,range:a.range}),this._r2=new ZCALdatepickr({dform:a.dform||"MM/DD/YYYY",curdate:f,wkst:a.wkst||0,template:"type3",_cont:(new Date).getTime()+"_"+ZEVENTS.count++,range:a.range}),this._clkdates=[],this._selfn=[],this._tar=typeof a.target=="object"?a.target:document.getElementById(a.target),this._bsecont=ZEVENTS.template("type3")._bsecont,this._patch=ZEVENTS.template("type3")._patch,this._cont=(new Date).getTime()+"_"+ZEVENTS.count++,this};ZCALrangepickr.prototype.on=function(a,b){return a=="select"&&"function"==typeof b&&this._selfn.push(b),this},ZCALrangepickr.prototype.bind=function(){var a=this,b=document.createElement(a._bsecont.tag);b.id=a._cont,b.className=a._bsecont._class,a._tar.appendChild(b);var c=a._r1._curDate.diffTo("month",a._r2._curDate);a.clearobj=function(){ZCALremoveListener(document.getElementById(a._r1._cont),"mousedown",e),ZCALremoveListener(document.getElementById(a._r2._cont),"mousedown",e),ZCALremoveListener(b,"selectstart",ZCALprevDef),ZCALremoveListener(b,"dragstart",ZCALprevDef);var c=b.parentNode.removeChild(b);c=null},a.clearvar=function(){a=b=c=null};var d=function(a){while(a.firstChild)a.removeChild(a.firstChild);return a},e=function(b){var c=b.target||event.srcElement,e=c.getAttribute("rel"),h=c.parentNode.getAttribute("rel"),i=this.rel=="r1"?a._r1:a._r2,j=new Date(i._curDate),k=!1;if(c.tagName.toLowerCase()=="u"||c.className.indexOf("zcal_dis")!=-1)return ZCALprevDef(b),!1;if(e=="PM"||h=="PM")j=ZCALchangeMonth(j,-1),i._curDate=j;else if(e=="NM"||h=="NM")j=ZCALchangeMonth(j,1),i._curDate=j;else if(e=="PY"||h=="PY")j.setYear(j.getFullYear()-1),i._curDate=j;else if(e=="NY"||h=="NY")j.setYear(j.getFullYear()+1),i._curDate=j;else if(c.parentNode.parentNode.getAttribute("rel")=="DT"){if(c.className&&c.className==ZEVENTS.template(i._template)._class.dis)return;j.setDate(parseInt(c.innerHTML,10));var l=a._clkdates.length;if(l==0||l>=2)a._clkdates=new Array(j);else if(l==1&&a._clkdates[0].getTime()!=j.getTime()){var m=j<a._clkdates[0]?0:1;a._clkdates.splice(m,0,j),k=!0}}var l=a._clkdates.length;a._r1._select=a._r2._select=[];if(l==2){var n=a._clkdates[0].diffTo("month",a._r1._curDate),o=a._r1._curDate.diffTo("month",a._clkdates[1]),p=a._clkdates[0].diffTo("month",a._r2._curDate),q=a._r2._curDate.diffTo("month",a._clkdates[1]);n>=0&&o>=0&&(a._r1._select={start:n>0?1:a._clkdates[0].getDate(),end:o>0?(new Date(a._r1._curDate.getFullYear(),a._r1._curDate.getMonth()+1,0)).getDate():a._clkdates[1].getDate()}),p>=0&&q>=0&&(a._r2._select={start:p>0?1:a._clkdates[0].getDate(),end:q>0?(new Date(a._r2._curDate.getFullYear(),a._r2._curDate.getMonth()+1,0)).getDate():a._clkdates[1].getDate()})}else l==1&&a._clkdates[0].diffTo("month",j)==0&&(i._select=[j.getDate()]);var r=a._r1._curDate.diffTo("month",a._r2._curDate);a.resetDRange(this.rel=="r1"?"r1":"r2"),d(f.call(a._r1)).innerHTML=a._r1.calendar(),d(g.call(a)).innerHTML=r>1?a._patch._cont:"",d(f.call(a._r2)).innerHTML=a._r2.calendar();if(k)for(var s in a._selfn)a._selfn[s].call({getDateRange:{from:a._clkdates[0],to:a._clkdates[1]}})};c<=0&&(a._r2._curDate=new Date((new Date(a._r1._curDate.getTime())).setMonth(a._r1._curDate.getMonth()+1)));var f=function(b){var c=document.getElementById(this._cont);if(!c){var d=ZEVENTS.template(this._template)._cont;c=document.createElement(d.tag),c.className=d._class,c.rel=b,c.id=this._cont,document.getElementById(a._cont).appendChild(c),ZCALaddListener(c,"mousedown",e)}return c},g=function(){var a=document.getElementById(this._cont+"_patch");if(!a){var a=document.createElement(this._patch.tag);a.id=this._cont+"_patch",document.getElementById(this._cont).appendChild(a)}return a};return a.resetDRange(),f.call(a._r1,"r1").innerHTML=a._r1.calendar(),g.call(a).innerHTML=c>1?a._patch._cont:"",f.call(a._r2,"r2").innerHTML=a._r2.calendar(),ZCALaddListener(b,"selectstart",ZCALprevDef),ZCALaddListener(b,"dragstart",ZCALprevDef),this},ZCALrangepickr.prototype.resetDRange=function(a){this._r1._edate=new Date(this._r2._curDate.getFullYear(),this._r2._curDate.getMonth(),0),this._r2._sdate=new Date(this._r1._curDate.getFullYear(),this._r1._curDate.getMonth()+1,1)};var ZCALdatepickr=function(a){return a=a?a:{},this.fullDtclk=a.fullDtclk!=undefined?a.fullDtclk:0,this._name="datepicker",this._dform=a.dform||"mm/dd/yyyy",this._wkst=a.wkst&&/^[0-7]$/g.test(a.wkst)?a.wkst:0,this._tar=typeof a.target=="object"?a.target:document.getElementById(a.target),this._type=a.mode||"inline",this._titype=a.time||"",this._select=a.select||[],this._monchge=[],this._yrchge=[],this._dtclk=[],this._template=a.template||(this._type=="inline"?"type1":this._type=="popup"&&this._titype=="right"?"type5":"type2"),this._curDate=a.curdate||(a.today?a.today.parseDate(this._dform):new Date),this._cont=a._cont||(new Date).getTime()+"_"+ZEVENTS.count++,this._change=a.update||"yes",this._minhgt=a.minhgt||251,this._tz=a.timezone||"",a.fn&&(this.fn=a.fn),a.range&&Object.prototype.toString.call(a.range[0])=="[object String]"?(this._sdate=a.range[0].parseDate(this._dform)||new Date(1947,8,15),this._edate=a.range[1].parseDate(this._dform)||new Date(2147,8,15)):a.range&&Object.prototype.toString.call(a.range[0])=="[object Date]"?(this._sdate=a.range[0],this._edate=a.range[1]):(this._sdate=null,this._edate=null),a.refer?this._refer=typeof a.refer=="object"?a.refer:document.getElementById(a.refer):this._tar&&(this._refer=this._tar.tagName.toLowerCase()=="input"?this._tar:this._tar.getElementsByTagName("input")[0]),this};ZCALdatepickr.prototype.on=function(a,b){return a=="monthchge"&&"function"==typeof b?this._monchge.push(b):a=="yearchge"&&"function"==typeof b?this._yrchge.push(b):a=="dateclick"&&"function"==typeof b&&this._dtclk.push(b),this},ZCALdatepickr.prototype.updateselect=function(a){return this._r1||(this._select=a||this._select,document.getElementById(this._cont).innerHTML=this.calendar()),this},ZCALdatepickr.prototype.bind=function(){var a=this,b=ZEVENTS.template(a._template)._cont,c="",d=document.createElement(b.tag);d.id=a._cont,d.className=b._class,a.clearobj=function(){ZEVENTS.obj.state=null;if(document.getElementById(a._cont)){ZCALremoveListener(d,"mousedown",g),ZCALremoveListener(d,"selectstart",ZCALprevDef),ZCALremoveListener(d,"dragstart",ZCALprevDef);var b=d.parentNode.removeChild(d);a._type=="popup"&&(ZCALremoveListener(document,"mousedown",docevehandle),ZCALremoveListener(document,"scroll",docevehandle)),b=null}},a.hide=function(b){var c=!0;d.contains(b.target)&&(c=!1),c&&a.clearobj()},a.clearvar=function(){a=d=b=null};var e=function(b){ZEVENTS.obj.state&&ZEVENTS.clear(ZEVENTS.obj.state),ZEVENTS.obj.state=a;var e=a._refer,f=(document.documentElement.clientHeight||window.innerHeight)+Math.max(document.body.scrollTop,document.documentElement.scrollTop),h=(document.documentElement.clientWidth||window.innerWidth)+Math.max(document.body.scrollLeft,document.documentElement.scrollLeft);document.body.appendChild(d),ZCALaddListener(d,"mousedown",g),ZCALaddListener(d,"selectstart",ZCALprevDef),ZCALaddListener(d,"dragstart",ZCALprevDef),ZCALaddListener(document,"mousedown",docevehandle=function(){a.clearobj()}),ZCALaddListener(document,"scroll",docevehandle=function(b){a.hide(b)}),ZCALaddListener(document,"mousewheel",docevehandle=function(b){a.hide(b)}),c=this.positionY()+this.offsetHeight+a._minhgt>f?"no":"yes",d.style.left=this.positionX()+(this.positionX()+260>h?-260+this.offsetWidth:0)+"px",a._curDate=e.value.parseDate(a._dform)||new Date,d.innerHTML=a.calendar(c),d.style.top=(c=="yes"?this.positionY()+this.offsetHeight:this.positionY()-d.offsetHeight)+"px",a._refer.focus(),ZCALprevDef(b)},f=function(a,b,c){return c==0?{getDates:function(){return[b,a]}}:{getDate:function(){return a}}},g=function(b){b=b||event;var e=b.target||b.srcElement,g=e.getAttribute("rel"),h=e.parentNode.getAttribute("rel"),i=[],j=0,k=new Date(a._curDate);if(e.tagName.toLowerCase()=="u"||e.className.indexOf("zcal_dis")!=-1){if(a.fullDtclk!=1||e.tagName.toLowerCase()!="u")return ZCALprevDef(b),!1;i=a._dtclk,j=1;var l=parseInt(e.getAttribute("rel").split("Y")[0]),m=parseInt(e.getAttribute("rel").split("Y")[1]);k.setDate(parseInt(e.innerHTML,10)),k.setMonth(l),k.setYear(m)}if(g=="PY"||h=="PY")i=a._yrchge,k.setYear(k.getFullYear()-1);else if(g=="NY"||h=="NY")i=a._yrchge,k.setYear(k.getFullYear()+1);else if(g=="PM"||h=="PM")i=a._monchge,k=ZCALchangeMonth(k,-1);else if(g=="NM"||h=="NM")k=ZCALchangeMonth(k,1),i=a._monchge;else if(e.parentNode.parentNode.getAttribute("rel")=="DT")i=a._dtclk,j=1,k.setDate(parseInt(e.innerHTML,10));else if(g=="UT")j=1,e.parentNode.querySelector("ul[id=zcl_t]").scrollTop-=10;else if(g=="TD")j=1,e.parentNode.querySelector("ul[id=zcl_t]").scrollTop+=10;else if(g=="OK"){if(a._refer.value.split(" ").length<2){var n=e.parentNode.parentNode.parentNode.querySelector(".zcal_sl").innerHTML;a._refer.value=a._refer.value+" "+n,this.fn&&this.fn(a._refer.value)}else a.clearobj();a.clearobj()}if(j==0){a._curDate=k;while(d.firstChild)d.removeChild(d.firstChild);d.innerHTML=a.calendar(c)}j==1&&a&&a._type=="popup"&&(a._titype=="right"?a._change=="yes"&&(a._refer.value=k.getDateBy(a._dform)):(a._change=="yes"&&(a._refer.value=k.getDateBy(a._dform)),a.clearobj()));for(var o in i)i[o].call(f(k,a._curDate,j));ZCALprevDef(b)};return a._type=="inline"?(a._tar.appendChild(d),ZCALaddListener(d,"mousedown",g),ZCALaddListener(d,"selectstart",ZCALprevDef),ZCALaddListener(d,"dragstart",ZCALprevDef),d.innerHTML=a.calendar()):a._type=="popup"&&(ZCALaddListener(a._refer,"focus",e),ZCALaddListener(a._refer,"blur",docevehandle=function(){a.clearobj()}),ZCALaddListener(a._refer,"keypress",ZCALprevDef),ZCALaddListener(a._tar,"mousedown",e)),this},ZCALdatepickr.prototype.changeDate=function(a){var b=document.getElementById(this._cont);this._curDate=a?a.parseDate(this._dform):this._curDate;while(b.firstChild)b.removeChild(b.firstChild);return b.innerHTML=this.calendar(""),!0},ZCALdatepickr.prototype.calendar=function(a){var b=ZEVENTS.template(this._template),c=b._HTML,d=b._class,e=b._cust,f=c.indexOf("#wk"),g=c.indexOf("wk#"),h=c.indexOf("#dr"),i=c.indexOf("dr#"),j=c.indexOf("#tr"),k=c.indexOf("tr#"),l=c.substring(0,f).replace("#HEAD#",this._curDate.getDateBy("MMMM YYYY")).replace("#HEADM#",this._curDate.getDateBy("MMMM")).replace("#HEADY#",this._curDate.getDateBy("YYYY"));if(this._sdate&&this._edate){var m=this._sdate.getFullYear(),n=this._sdate.getMonth(),o=this._edate.getFullYear(),p=this._edate.getMonth(),q=this._curDate.getFullYear(),r=this._curDate.getMonth(),s=this._curDate.getDate();l=l.replace("#py#","zci-fst"+(new Date(q-1,r,1)>=new Date(m,n,1)?"":" zcal_dis")).replace("#ny#","zci-lst"+(new Date(q+1,r,1)<=new Date(o,p,1)?"":" zcal_dis")).replace("#pm#","zci-pre"+(new Date(q,r,1)>new Date(m,n,1)?"":" zcal_dis")).replace("#nm#","zci-nxt"+(new Date(q,r,1)<new Date(o,p,1)?"":" zcal_dis"))}else l=l.replace("#py#","zci-fst").replace("#ny#","zci-lst").replace("#pm#","zci-pre").replace("#nm#","zci-nxt");return l=this.fullDtclk==1?l.replace("#hover#","zcal_mCalce"):l.replace("#hover#",""),a&&a!=""&&(l=l.replace("#shadow#",a=="yes"?d.shdwn:d.shup)),l+=this.weekrow(c.substring(f+3,g)),l+=c.substring(g+3,h),l+=this.daterow(c.substring(h+3,i)),this._type=="popup"&&this._titype=="right"?(l+=c.substring(i+3,j).replace("#tz#",this._tz),l+=this.timerow(c.substring(j+3,k)),l+=c.substring(k+3,c.length)):l+=c.substring(i+3,c.length).replace("#tz#",this._tz),l},ZCALdatepickr.prototype.timerow=function(a){var b=["12:00 am","12:30 am","1:00 am","1:30 am","2:00 am","2:30 am","3:00 am","3:30 am","4:00 am","4:30 am","5:00 am","5:30 am","6:00 am","6:30 am","7:00 am","7:30 am","8:00 am","8:30 am","9:00 am","9:30 am","10:00 am","10:30 am","11:00 am","11:30 am","12:00 pm","12:30 pm","1:00 pm","1:30 pm","2:00 pm","2:30 pm","3:00 pm","3:30 pm","4:00 pm","4:30 pm","5:00 pm","5:30 pm","6:00 pm","6:30 pm","7:00 pm","7:30 pm","8:00 pm","8:30 pm","9:00 pm","9:30 pm","10:00 pm","10:30 pm","11:00 pm","11:30 pm"],c=new Date,d="";c.setTime(zcal.today.getTime());var e=c.getDate(),f=c.getMonth(),g=c.getFullYear(),h,i,j,k,l;f=f+1<10?"0"+(f+1):f+1,e=e<10?"0"+e:e,h=g+""+f+""+e,c.setTime(zcal.cdate),i=c.getHours(),j=c.getMinutes(),k=i*2+(j>30?2:1),k=k>46?46:k;var m=ZEVENTS.template(this._template),n="";for(var o=0;o<48;o++)n+=a.replace("#item#",(o+"").changeNumbertoTime("hh:mm a")).replace("#ti#",o==k?' class="zcal_sl"':"");return n},ZCALdatepickr.prototype.weekrow=function(a){var b=(new Date(this._curDate)).getDay(),c=this._wkst,d=ZEVENTS.template(this._template),e=0,f="";while(e<7)f+=a.replace("#item#",Date.WEEKS_DAYS[2][c]).replace("#hgt#",c==b&&d._cust?" class="+d._cust.dysel:""),c=c<6?c+1:0,e++;return f},ZCALdatepickr.prototype.daterow=function(a){var b=a.indexOf("#dc"),c=a.indexOf("dc#"),d=a.substring(b+3,c),e=new Date(this._curDate),f=e.getDate(),g=e.getMonth(),h="",i="",j="",k=",",l=this._type,m=Object.prototype.toString.call(this._select)=="[object Object]"?!0:!1;if(!m)for(var n=0;n<this._select.length;n++)k+=this._select[n]+",";e.setDate(1);var o=e.getDay(),p=new Date(e.getFullYear(),e.getMonth(),1),q=new Date(e.getFullYear(),e.getMonth()+1,0),r=Math.ceil((p.getDay()+q.getDate())/7),s=o-this._wkst+(r==4||r==5?7:0)+(o-this._wkst<0?7:0);e.setDate(e.getDate()-s);var t=ZEVENTS.template(this._template)._class;for(var u=0;u<7;u++){j+=a.substring(0,b);for(var v=0;v<7;v++){var w="";h=e.getDate(),i=e.getMonth();var x=t.nor;if(i==g&&!this._sdate&&!this._edate||i==g&&this._sdate&&this._edate&&this._sdate<=e&&this._edate>=e){if(k!=""&&k.indexOf(","+h+",")>-1||m&&this._select.start<=h&&this._select.end>=h)x=t.sel;f==h&&t.hglt&&(x=x==t.sel?t.selhgt:t.hglt)}else x=t.dis;j+=d.replace(/#tag#/g,x).replace("#item#",h).replace("#month#",e.getMonth()).replace("#year#",e.getFullYear()),e.setDate(h+1)}j+=a.substring(c+3,a.length)}return j},Element.prototype.positionX=function(a){var b=0,c=this;if(typeof c.getBoundingClientRect=="function"){var d=c.getBoundingClientRect();b=d.left+(window.pageXOffset||document.documentElement.scrollLeft)-(document.documentElement.clientLeft||0)}else if(c.offsetParent)while(c.offsetParent)b+=c.offsetLeft,c=c.offsetParent;else c.x&&(urleft+=c.x);return b},Element.prototype.positionY=function(){var a=0,b=this;if(typeof b.getBoundingClientRect=="function"){var c=b.getBoundingClientRect();a=c.top+(window.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0)}else if(b.offsetParent)while(b.offsetParent)a+=b.offsetTop,b=b.offsetParent;else b.y&&(a+=b.y);return a},String.prototype.trim=function(){var a=this;return a=a.replace(/^\s*(.*)/,"$1"),a=a.replace(/(.*?)\s*$/,"$1"),a},String.prototype.changeNumbertoTime=function(a){var b,c,d=parseInt(this,10);return a=="hh:mm a"?(c=d>24?d-24:d,c=c==0||c==1?12:parseInt(c/2,10),b=d>23?" "+ZCALtform[1]:" "+ZCALtform[0]):(c=parseInt(d/2,10),b=""),(c<10?"0":"")+c+":"+(d%2==1?"30":"00")+b},String.prototype.changeTimetoNumber=function(a){if(this.indexOf(":")<0)return 0;var b=this.split(":");b[0]=parseInt(b[0],10);if(a=="hh:mm a"){var c=b[1].split(" ");c[1]==ZCALtform[1]&&b[0]!=12?b[0]+=12:c[1]==ZCALtform[0]&&b[0]==12&&(b[0]=0),b[1]=c[0]}return b[1]=parseInt(b[1],10),b[0]*2+(b[1]==30?1:0)},String.prototype.parseDate=function(a){var b=function(a,b){for(var c in b)if(a.toLowerCase().trim()==b[c].toLowerCase())return parseInt(c,10)+1;return!1};if(!a||a.trim()=="")return!1;if(this&&this.trim()=="")return!1;var c=this,d=c.match(/(\d+)|([a-zA-Z]+)/g),e=0,f={},g=a.toLowerCase().match(/([a-z]+)/g);if(g.length!=3||d.length!=3)return!1;for(var e in g)g[e]=="d"||g[e]=="m"?g[e]+=g[e]:g[e]=="mmm"?(d[e]=b(d[e],Date.MONTH_NAMES[1]),g[e]="mm"):g[e]=="mmmm"?(d[e]=b(d[e],Date.MONTH_NAMES[0]),g[e]="mm"):g[e]=="yy"&&(d[e]=d[e]>=70?1900+parseInt(d[e],10):2e3+parseInt(d[e],10),g[e]="yyyy"),f[g[e]]=d[e];return new Date(f.yyyy,f.mm-1,f.dd)},Date.MONTH_NAMES=new Array(["January","February","March","April","May","June","July","August","September","October","November","December"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),Date.WEEKS_DAYS=new Array(["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["S","M","T","W","T","F","S"]),ZCALtform=["am","pm"],Date.prototype.getDaysOfMonth=function(){return(new Date(this.getFullYear(),this.getMonth()+1,0)).getDate()},Date.prototype.getDateBy=function(a){var b=function(a){return(a<0||a>9?"":"0")+a};if(a.trim()=="")return;a+="";var c="",d=0,e="",f="",g=this.getYear()+"",h=this.getMonth()+1,i=this.getDate(),j=this.getDay();g.length<4&&(g=""+(+g+1900));var k={};k.YYYY=g,k.YY=g.substring(2,4),k.M=h,k.MM=b(h),k.MMMM=Date.MONTH_NAMES[0][h-1],k.MMM=Date.MONTH_NAMES[1][h-1],k.D=i,k.DD=b(i),k.E=Date.WEEKS_DAYS[1][j],k.EE=Date.WEEKS_DAYS[0][j];while(d<a.length){e=a.charAt(d),f="";while(a.charAt(d)==e&&d<a.length)f+=a.charAt(d++);k[f.toUpperCase()]!=null?c+=k[f.toUpperCase()]:c+=f}return c},Date.prototype.getTimeBy=function(a){function b(a,b){var c=a+"";b=b||2;while(c.length<b)c="0"+c;return c}var c=this.getHours();a=a.replace(/(^|[^\\])HH+/g,"$1"+b(c)),a=a.replace(/(^|[^\\])H/g,"$1"+c);var d=c>12?c-12:c==0?12:c;a=a.replace(/(^|[^\\])hh+/g,"$1"+b(d)),a=a.replace(/(^|[^\\])h/g,"$1"+d);var e=this.getMinutes();a=a.replace(/(^|[^\\])mm+/g,"$1"+b(e)),a=a.replace(/(^|[^\\])m/g,"$1"+e);var f=this.getSeconds();a=a.replace(/(^|[^\\])ss+/g,"$1"+b(f)),a=a.replace(/(^|[^\\])s/g,"$1"+f);var g=c<12?"AM":"PM";a=a.replace(/(^|[^\\])TT+/g,"$1"+g),a=a.replace(/(^|[^\\])T/g,"$1"+g.charAt(0));var h=g.toLowerCase();a=a.replace(/(^|[^\\])tt+/g,"$1"+h),a=a.replace(/(^|[^\\])t/g,"$1"+h.charAt(0));var i=-this.getTimezoneOffset(),j=i?i>0?"+":"-":"Z";i=Math.abs(i);var k=Math.floor(i/60),l=i%60;return j+=b(k)+":"+b(l),a=a.replace(/(^|[^\\])K/g,"$1"+j),a},Date.prototype.diffTo=function(a,b){var c=this;b=b||new Date;if(a=="days")return parseInt((b.getTime()-c.getTime())/864e5,10);if(a=="month")return b.getMonth()-c.getMonth()+12*(b.getFullYear()-c.getFullYear());if(a=="year")return b.getFullYear()-c.getFullYear()};var ZCALaddListener=document.addEventListener?function(a,b,c,d){b=="mousewheel"&&navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&(b="DOMMouseScroll"),a.addEventListener(b,c,Boolean(d))}:function(a,b,c){a.attachEvent("on"+b,c)},ZCALremoveListener=document.removeEventListener?function(a,b,c,d){b=="mousewheel"&&navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&(b="DOMMouseScroll"),a.removeEventListener(b,c,Boolean(d))}:function(a,b,c){a.removeEventListener("on"+b,c)},ZCALprevDef=function(a){a=a||event,a.stopPropagation?(a.preventDefault(),a.stopPropagation()):(a.cancelBubble=!0,a.returnValue=!1)};ZCALcrtesel=function(a,b,c){if(a.createTextRange){a.focus();var d=a.createTextRange();d.collapse(!0),d.moveStart("character",b),d.moveEnd("character",c-b),d.select()}else a.setSelectionRange?(a.focus(),a.setSelectionRange(b,c)):typeof a.selectionStart!="undefined"&&(a.focus(),a.selectionStart=b,a.selectionEnd=c);return b},ZCALselstart=function(a){if(document.selection){var b=document.selection.createRange().duplicate();return b.moveEnd("character",a.value.length),b.text==""?a.value.length:a.value.lastIndexOf(b.text)}return a.selectionStart},ZCALselend=function(a){if(document.selection){var b=document.selection.createRange().duplicate();return b.moveStart("character",-a.value.length),b.text.length}return a.selectionEnd},ZCALchangeMonth=function(a,b){var c=new Date(a.getFullYear(),a.getMonth()+b,1),d=a.getDate(),e=(new Date(c.getFullYear(),c.getMonth()+1,0)).getDate();return c.setDate(d<=e?d:e),c};var ZCL_RQ=[],ZCL_URL=[],ZCL_LOGIN_STATE=!0;ZCL_uXHR=function(a,b,c,d){return a="/mail"+a,rt=ZCL_RQ.length,ZCL_RQ[rt]=ZCL_GetHTTPTransport(),ZCL_URL[rt]=a,typeof b=="function"?(ZCL_RQ[rt].zcal_callback=b,ZCL_RQ[rt].zcal_reqindex=rt,ZCL_RQ[rt].onreadystatechange=function(){var a=this.zcal_callback,b=this.zcal_reqindex;if(this.readyState==4){var c=this.getResponseHeader("Content-Type").toLowerCase().indexOf("text/xml");c!=-1?a(this.responseXML,ZCL_URL[b]):a(this,ZCL_URL[b]),ZCL_RQ[b]=null}}):ZCL_RQ[rt].onreadystatechange=new Function("{\t\t\tif( ZCL_RQ["+rt+"].readyState == 4 ) { \t\t\t\tZCL_XHRInclude(ZCL_RQ["+rt+"],ZCL_URL["+rt+"]);\t\t\t\tvar ret = ZCL_RQ["+rt+'].getResponseHeader("Content-Type").toLowerCase().indexOf("text/xml");\t\t\t\t'+b+"((ret !=-1 ? ZCL_RQ["+rt+"].responseXML:ZCL_RQ["+rt+"]) ,ZCL_URL["+rt+"]);ZCL_RQ["+rt+"]=null;}}"),ZCL_RQ[rt].open("GET",a,!0),ZCL_RQ[rt].setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),ZCL_RQ[rt].send(null),!0},ZCL_GetHTTPTransport=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;if(window.ActiveXObject)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(a){try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(a){throw new Exception("Browser not supported")}}},ZCL_formSubmit=function(a,b,c){if(!ZCL_$("zcl_tarFrame")){var d=_zm.getDOM(["IFRAME",{attrs:{id:"zcl_tarFrame",name:"zcl_tarFrame",style:"display:none",width:"0",height:"0",frameborder:"0"}}]);document.body.appendChild(d)}var e=_zm.getDOM(["FORM",{attrs:{id:"dwnldForm",name:"dwnldForm",style:"display:none",target:"zcl_tarFrame",method:c||"post",action:"/mail"+b+"?frameorigin="+window.location.protocol+"//"+window.location.hostname}}]);for(var f in a)e.appendChild(_zm.getDOM(["INPUT",{attrs:{type:"hidden",name:f,value:a[f]}}]));var g=document.cookie,h;g=g.substring(g.indexOf("aprmjrnpkcrkks=")+15,g.length),h=g.indexOf(";")!=-1?g.substring(0,g.indexOf(";")):g,e.appendChild(_zm.getDOM(["INPUT",{attrs:{type:"hidden",name:"mstpcrdhkur",value:h}}])),document.body.appendChild(e),e.submit(),e.parentNode.removeChild(e)};var loadZcalSearch=function(){ZCL_uXHR("/ncal/loadjs.do",function(a){var b=JSON.parse(a.responseText),c=document.createElement("script");c.type="text/javascript",c.src="//"+b[1].jsPath+b[1].search.js[0],document.head.append(c)})};loadZcalSearch();var ZCL_streamEve={entId:"",dataObj:{},RQ:new Array,URL:new Array,LOGIN_STATE:!0,callback:"",timeObj:new Object,curTimeGMT:"",timeIntVl:"",eventExpireIntvl:"",grpId:"",isreq:!1,timeIncDur:12e4,chckEventExpDur:3e5,allAttnElem:"",parentDOM:"",remUserID:"",remStTime:"",curAttendeeList:[],isAttReqInvoked:!0,initEventTBox:function(a,b,c){var d='<textarea  id="eventTitle" placeholder="Event title, @attendees"></textarea>',e='<span id="eventDate_span"><i class="msi-calendar"></i><input type="text"  placeholder="Date" id="eventDate"></span><i class="msi-clock"></i><span style="border:none;" class="zcal_time zcal_nbr" id="eventTime_span"><input type="text" placeholder="Time" id="eventTime" ></span><i class="msi-duration"></i><span class="zcal_time zcal_nbr" id="eventDur_span"><input onclick="ZCL_streamEve.setEventDurDropdwn(event,this)" readonly type="text" value="00:30 Min" id="eventDur" placeholder="Duration"></ul></span><i class="msi-location"></i><input type="text" placeholder="Choose Location" id="eventLoc">',f=document.createDocumentFragment(),g=document.createElement("div");g.innerHTML=d,f.appendChild(g);var h=document.createElement("div");h.className="Sevent_data",h.innerHTML=e,f.appendChild(h),c(f,ZCL_streamEve.eventAddPublish),ZCL_streamEve.initDateTimePicker(h.firstChild,h.childNodes[2]),g.firstChild&&ZCL_streamEve.setMention(g.firstChild)},curStartAndEndTime:function(){var a="am",b="pm",c=["12:00 "+a,"12:30 "+a,"01:00 "+a,"01:30 "+a,"02:00 "+a,"02:30 "+a,"03:00 "+a,"03:30 "+a,"04:00 "+a,"04:30 "+a,"05:00 "+a,"05:30 "+a,"06:00 "+a,"06:30 "+a,"07:00 "+a,"07:30 "+a,"08:00 "+a,"08:30 "+a,"09:00 "+a,"09:30 "+a,"10:00 "+a,"10:30 "+a,"11:00 "+a,"11:30 "+a,"12:00 "+b,"12:30 "+b,"01:00 "+b,"01:30 "+b,"02:00 "+b,"02:30 "+b,"03:00 "+b,"03:30 "+b,"04:00 "+b,"04:30 "+b,"05:00 "+b,"05:30 "+b,"06:00 "+b,"06:30 "+b,"07:00 "+b,"07:30 "+b,"08:00 "+b,"08:30 "+b,"09:00 "+b,"09:30 "+b,"10:00 "+b,"10:30 "+b,"11:00 "+b,"11:30 "+b],d=new Array,e=new Date,f=e.getHours(),g=e.getMinutes(),h=f*2+(g>30?2:1);return h=h>46?46:h,d.ST=c[h],d.ET=c[h+1],d},initDateTimePicker:function(a,b){(function(c){if(a){var d=(new Date).getDateBy("MM/dd/yyyy"),e=a.getElementsByTagName("input")[0];e.value=d,c(a).picker("date",{dform:"MM/DD/YYYY",refer:e,wkst:0,range:[d,""],mode:"popup",update:"yes",minhgt:251}).bind()}if(b){var f=ZCL_streamEve.curStartAndEndTime(),g=b.getElementsByTagName("input")[0];g.value=f.ST,c(b).picker("time",{tform:"hh:mm a",type:1}).bind()}})(ZEVENTS)},setEventDurDropdwn:function(a,b){if(ZCL_$("eventDur_span")||ZCL_$("SCeventDur_span")||ZCL_$("de_eveDur")){var c=["00:30 Min","01:00 Hr","01:30 Hr","02:00 Hr","02:30 Hr","03:00 Hr","03:30 Hr","04:00 Hr","04:30 Hr","05:00 Hr"],d=a.target||a.srcElement,e=b.tagName.toLowerCase()=="input"?b:b.getElementsByTagName("input")[0],f=e.value,g=document.body.appendChild(document.createElement("ul"));g.style.width=(b.clientWidth<110?110:b.clientWidth)+"px",g.style.left=b.positionX()+"px",g.id=d.id=="SC_eventDur"?"SCeventDur_ul":"eventDur_ul",ZCALaddListener(g,"mousedown",ZCL_streamEve.ulEvent);var h=(document.documentElement.clientHeight||window.innerHeight)+Math.max(document.body.scrollTop,document.documentElement.scrollTop);g.className="zcal_tilst "+(b.positionY()+250>h?"zcal_tilsbt":"zcal_tilstp");var i="";for(var j=0;j<c.length;j++)i+='<li rel="'+j+'"'+(c[j]==f?'class="zcal_sl"':"")+">"+c[j]+"</li>";g.innerHTML=i,g.style.top=b.positionY()+250<h?b.positionY()+b.offsetHeight+"px":b.positionY()-g.offsetHeight+"px",ZCALaddListener(document,"mousedown",docevehandle=function(a){ZCL_streamEve.selectEventDuration(a,d.id)}),ZCALaddListener(document,"keydown",docevekeyhandle=function(a){ZCL_streamEve.myKeyPressHandler(a,d.id)}),ZCALaddListener(b,"blur",docevehandle=function(a){ZCL_streamEve.selectEventDuration(a,d.id)})}},ulEvent:function(a){var b=a.target||a.srcElement;b.tagName.toLowerCase()=="li"&&($("#eveInpDu")[0].value=b.innerHTML,$("#eventDur_ul").remove()),ZCALprevDef(a)},selectEventDuration:function(a,b){var c=a.target.innerHTML,d=c.trim().toLowerCase();/^(0[0-5]):(00|30)\s*(hr|min)$/.test(d)&&(ZCL_$(b).value=a.target.innerHTML),ZCALremoveListener(document,"mousedown",docevehandle),ZCALremoveListener(document,"keydown",docevekeyhandle),ZCALremoveListener(document,"blur",docevehandle),b=="SC_eventDur"?$("#SCeventDur_ul").remove():b=="eventDur"?$("#eventDur_ul").remove():b=="eveInpDu"&&$("#eventDur_ul").remove()},myKeyPressHandler:function(a,b){var c=a.which||a.keyCode||a.charCode,d,e;b=="eveInpDu"?(d=document.getElementById("eventDur_ul").getElementsByTagName("li"),e=ZCL_$("eventDur_ul").childNodes):(d=b=="eventDur"?document.getElementById("eventDur_ul").getElementsByTagName("li"):document.getElementById("SCeventDur_ul").getElementsByTagName("li"),e=b=="eventDur"?ZCL_$("eventDur_ul").childNodes:ZCL_$("SCeventDur_ul").childNodes);var f=ZCL_$(b),g="";for(var h=0;h<e.length;h++)if(e[h].getAttribute("class")=="zcal_sl"){g=e[h].getAttribute("rel");break}if(c==27||c==13)b=="eveInpDu"?$("#eventDur_ul").remove():b=="eventDur"?ZCL_$("eventDur_ul").remove():ZCL_$("SCeventDur_ul").remove(),ZCALremoveListener(document,"mousedown",docevehandle),ZCALremoveListener(document,"keydown",docevekeyhandle);c==38&&g!=0?(d[g--].className="",d[g].className="zcal_sl",f.value=d[g--].innerHTML):c==40&&g!=d.length-1&&(d[g++].className="",d[g].className="zcal_sl",f.value=d[g++].innerHTML)},eventPublish:function(a,b){var c={};ZCL_streamEve.callback=b;var d="",e=ZCL_streamEve.getEventParams(a);if(!e.ERR_ARR){var f="sum="+encodeURIComponent(e.TITLE)+"&sday="+e.ST_DATE+"&smonth="+e.ST_MONTH+"&syear="+e.ST_YEAR+"&shour="+e.ST_HOUR+"&smin="+e.ST_MIN+"&eday="+e.END_DATE+"&emonth="+e.END_MONTH+"&eyear="+e.END_YEAR+"&ehour="+e.END_HOUR+"&emin="+e.END_MIN+"&loc="+encodeURIComponent(e.LOCATION)+"&zgid="+a+"&att="+e.ATTN;ZCL_XHR("/cal/stream/api/private/json/addEvent?"+f,"ZCL_streamEve.afterSubmit")}else c.ERROR={},c.ERROR.message=e.ERR_ARR[0],ZCL_streamEve.callback(c)},eventAddPublish:function(a,b,c){var d={};ZCL_streamEve.callback=c;var e="",f=a.gid,g=a.lckInv?a.lckInv:!1,h=ZCL_streamEve.getEventDOMParams(f,b);if(!h.ERR_ARR){var i="sum="+encodeURIComponent(h.TITLE)+"&sday="+h.ST_DATE+"&smonth="+h.ST_MONTH+"&syear="+h.ST_YEAR+"&shour="+h.ST_HOUR+"&smin="+h.ST_MIN+"&eday="+h.END_DATE+"&emonth="+h.END_MONTH+"&eyear="+h.END_YEAR+"&ehour="+h.END_HOUR+"&emin="+h.END_MIN+"&loc="+encodeURIComponent(h.LOCATION)+"&zgid="+f+"&att="+h.ATTN+"&lckInv="+g;if(a.inv_allMem!=undefined){var j=a.inv_allMem;i+="&inv_allMem="+j}ZCL_XHR("/cal/stream/api/private/json/addEvent?"+i,"ZCL_streamEve.afterSubmit")}else d.ERROR={},d.ERROR.message=h.ERR_ARR[0],ZCL_streamEve.callback(d)},afterSubmit:function(a){var b={},c=ZCL_streamEve.evl(1,a.responseText),d=c.response.result;c.response.error?(b.ERROR={},b.ERROR.message=c.response.error=="err_nostreamadd"?"Problem in adding event":c.response.error.message?c.response.error.message:c.response.error):(b.ENTITY_ID=d.ENTITY_ID,b.GROUP_ID=d.GROUP_ID),ZCL_streamEve.callback(b)},evl:function(){if(arguments.length<2)return;if(arguments["0"]==1)return JSON.parse(arguments[1]);if(arguments.length==2)return window[arguments[1]].apply(this);var a=Array.prototype.slice.call(arguments,2);return window[arguments[1]].apply(this,a)},getEventParams:function(a){var b=new Array,c={},d=ZCL_$("eventDate").value,e=ZCL_$("eventTime").value,f=ZCL_$("eventDur").value,g=ZCL_$("eventTitle").parentNode.firstChild.innerHTML.split("<b")[0],h=ZCL_$("eventLoc").value,i=zmMention.getMentions($("#eventTitle")),j=ZCL_streamEve.getMentionEmails(i),k=zmail.zuid==a?!0:!1,l=ZCL_streamEve.validateEventParams(d,e,g,j,k),m=Object.keys(l);return m.length==0?(b=ZCL_streamEve.calcEventTime(d,e,f),b.TITLE=g,b.LOCATION=h,b.ATTN=j):b.ERR_ARR=l,b},getEventDOMParams:function(a,b){var c=new Array,d={},e=b.lastChild.firstChild.lastChild.value,f=b.lastChild.childNodes[2].lastChild.value,g=b.lastChild.childNodes[4].lastChild.value,h=b.lastChild.lastChild.value,i=b.firstChild.firstChild.lastChild.parentNode.firstChild.innerHTML.split("<b")[0];i=i.trim();var j=zmMention.getMentions(b.firstChild.firstChild.getElementsByTagName("TEXTAREA")),k=ZCL_streamEve.getMentionEmails(j),l=ZCL_streamEve.validateEventParams(e,f,i,k,m),m=zmail.zuid==a?!0:!1,n=Object.keys(l);return n.length==0?(c=ZCL_streamEve.calcEventTime(e,f,g),c.TITLE=i,c.LOCATION=h,c.ATTN=k):c.ERR_ARR=l,c},getMentionEmails:function(a){var b="";for(var c in a)b+=b==""?a[c].eid:","+a[c].eid;return b},validateEventParams:function(a,b,c,d,e){var f=new Array;c==""?f.push(" Title is mandatory"):c.length>255&&f.push("Event title cannot exceed 255 characters");if(a=="")f.push("Date is mandatory");else if(!/^\d{2}\/\d{2}\/\d{4}$/.test(a))f.push("Invalid date format");else{var g=(new Date).getDateBy("MM/dd/yyyy"),h=Date.parse(a);h<g&&f.push("The date is earlier than today")}return b==""?f.push("Time is mandatory"):/^(0[1-9]|1[0-2]|[1-9]):[0-5][0-9]\s*([ap]m|[AP]M)$/.test(b.toLowerCase())||f.push("Invalid time format"),e&&d==""&&f.push("Select a group or mention/tag someone in the event"),f},calcEventTime:function(a,b,c){var b=ZCL_streamEve.parseTime(b),d=a.split("/"),e=c.split(" ")[0],f=parseInt(e.split(":")[0]),g=parseInt(e.split(":")[1]),h=new Date(Date.parse(a));h.setHours(b.HH),h.setMinutes(b.mm),h.setSeconds(0,0);var i=new Date(Date.parse(a));i.setHours(h.getHours()+f),i.setMinutes(h.getMinutes()+g),i.setSeconds(0,0);var j=i.getDate(),k=i.getMonth()+1,l=j<10?"0"+j:j+"",m=k<10?"0"+k:k,n=m+"/"+l+"/"+i.getFullYear(),o=ZCL_streamEve.parseTime((i.getHours()<10?"0"+i.getHours():i.getHours())+":"+i.getMinutes()),p=new Array;return p.END_HOUR=o.HH,p.END_MIN=o.mm,p.ST_HOUR=b.HH,p.ST_MIN=b.mm,p.ST_MONTH=d[0],p.ST_DATE=d[1],p.ST_YEAR=d[2],p.END_MONTH=m,p.END_DATE=l,p.END_YEAR=i.getFullYear(),p},correctTimeFormat:function(a){return a.length==1?a="000"+a:a.length==2?a="00"+a:a.length==3&&(a="0"+a),a},addEventAttendee:function(a){var b="ckey="+ckey+"&ekey="+ekey+"att="+a;ZCL_XHR("/cal/stream/api/private/json/addAttendee?"+b)},updateAttStatusFrmNotification:function(a,b){var c=a.parentNode.getAttribute("eveid"),d=a.innerHTML,e=0;d=="Yes"?e=1:d=="No"?e=2:d=="MayBe"&&(e=3);var f="ckey="+b+"&ekey="+c+"&status="+e;ZCL_XHR("/cal/stream/api/private/json/updateAttStatus?"+f,"ZCL_streamEve.afterUpdateAttnFrmNoti")},updateAttendeeStatus:function(a,b){var c=a.parentNode.getAttribute("eveid"),d=a.innerHTML,e=0;d=="Yes"?e=1:d=="No"?e=2:d=="Maybe"&&(e=3);var f="ckey="+b+"&ekey="+c+"&status="+e;ZCL_XHR("/cal/stream/api/private/json/updateAttStatus?"+f,"ZCL_streamEve.afterUpdateAttn")},afterUpdateAttnFrmNoti:function(a){var b=ZCL_streamEve.evl(1,a.responseText),c=b.response.result,d=c.status,e=c.message;if(d==1){var f=c.eventKey,g=c.eventstatus,h=document.querySelectorAll('[eveid="'+c.eventKey+'"]');for(var i=0;i<h.length;i++){var j=h[i].getAttribute("eveid");if(c.eventKey==j){var k=h[i].childNodes;for(var l=0;l<k.length;l++)l==g-1?k[l].className="sel":k[l].removeAttribute("class")}}zmUtil.succErrMsg("s",e)}else if(e.indexOf("Event is expired")!=-1){var h=document.querySelectorAll('[eveid="'+c.eventKey+'"]');for(var i=0;i<h.length;i++){var j=h[i].getAttribute("eveid");h[i].className="eventExpired";if(c.eventKey==j){var k=h[i].childNodes;for(var l=0;l<k.length;l++)k[l].removeAttribute("onclick")}}zmUtil.succErrMsg("e",e)}else zmUtil.succErrMsg("e",e)},getAllAttendee:function(a,b,c){ZCL_streamEve.allAttnElem=a;var d="ckey="+b+"&ekey="+c;ZCL_streamEve.isAttReqInvoked&&(ZCL_streamEve.isAttReqInvoked=!1,ZCL_XHR("/cal/stream/api/private/json/getAllAttendeeStatus?"+d,"ZCL_streamEve.afterGetAllAttn"))},getAttendeesHtml:function(a,b,c){var d="",e=0,f=$("<ul class='SC_Phr SC_P2r'/>"),g=new Array;for(var h in b){var i=b[h].STS,j=b[h].ATT_ZUID+"",k=j!="undefined"?a[j].photo:zmail.defaultPhoto,l=_zm.getDOM(["LI",{child:[["DIV",{child:[["text","&nbsp;&nbsp;"+a[j].eid],["SPAN",{child:[["text","&nbsp;&nbsp;"+i]]}]]}],["IMG",{attrs:{src:k}}]]}]);f.append(l),delete a[j]}for(var m in a){var n=m==c?"Yes":"Pending",l=_zm.getDOM(["LI",{child:[["DIV",{child:[["text","&nbsp;&nbsp;"+a[m].eid],["SPAN",{child:[["text","&nbsp;&nbsp;"+n]]}]]}],["IMG",{attrs:{src:a[m].photo}}]]}]);f.append(l)}return f},ParseByDB:function(a){var b=a.substring(0,2),c=a.substring(2,4);b=parseInt(b,10);var d=(b==0?"12|am":b==12?"12|pm":b<12?b+"|am":b-12+"|pm").split("|"),e={};return e.HH=b<10?"0"+b:b,e.hh=d[0]<10?"0"+d[0]:d[0],e.mm=c.length<2?"0"+c:c,e.a=d[1],e},parseTime:function(a){var b,c,d,e,f=a.trim().toLowerCase();if(/^(20|21|22|23|[01]\d|\d)(([:][0-5]\d){1,2})$/.test(f))return ZCL_streamEve.ParseByRT(f);if(/^(0[1-9]|1[0-2]|[1-9]):[0-5][0-9]\s*([ap]m|[AP]M)$/.test(f))return ZCL_streamEve.ParseByAm(f);if(/^(20|21|22|23|[01]\d|\d)[0-5][0-9]$/.test(f))return ZCL_streamEve.ParseByDB(f);f=f.replace(/\D/ig,"");if(isNaN(f))return{HH:"08",hh:"08",mm:"00",a:"am"};var g=f.length;return f=g==1?f+"000":g==2?f+"00":g==3?f+"0":g>4?f.substring(0,4):f,/^(20|21|22|23|[01]\d|\d)[0-5][0-9]$/.test(f)?ZCL_streamEve.ParseByDB(f):{HH:"08",hh:"08",mm:"00",a:"am"}},ParseByRT:function(a){var b=a.split(":");b[0]=parseInt(b[0],10);var c=(b[0]==0?"12|am":b[0]==12?"12|pm":b[0]<12?b[0]+"|am":b[0]-12+"|pm").split("|"),d={};return d.HH=b[0]<10?"0"+b[0]:b[0],d.hh=c[0]<10?"0"+c[0]:c[0],d.mm=b[1],d.a=c[1],d},ParseByAm:function(a){var b=a.split(/:|\s+/);b.length<3&&(b[2]=b[1].substring(2,4),b[1]=b[1].substring(0,2)),b[0]=parseInt(b[0],10);var c={};return c.hh=b[0]<10?"0"+b[0]:b[0],c.mm=b[1],c.a=b[2],c.HH=b[0]==12&&c.a=="am"?"00":c.a=="pm"&&b[0]!=12?b[0]+12:b[0]<10?"0"+b[0]:b[0],c},setMention:function(a){var b="org",c={contentArray:b,compare:["fn","ln","nn","eid"],LType:"3",OType:"3",drag:!1};zmAutoFill.setAutofill(c,$(a))},eventDelete:function(a){var b="/cal/stream/api/private/json/deleteEvent?eKey="+a.eventUID+"&cKey="+a.calUID+"&zmstreamweb=true";ZCL_XHR(b,"ZCL_streamEve.afterDelEvent")},clearETBox:function(a){zmMention.clearMention($("#eventTitle"));var b=ZCL_streamEve.curStartAndEndTime();ZCL_$("eventDate").value=(new Date).getDateBy("MM/dd/yyyy"),ZCL_$("eventTime").value=b.ST,ZCL_$("eventDur").value="00:30 Min",ZCL_$("eventTitle").value="",ZCL_$("eventLoc").value=""},clearETBoxDOM:function(a){zmMention.clearMention(a.firstChild.firstChild.lastChild);var b=ZCL_streamEve.curStartAndEndTime();a.lastChild.firstChild.lastChild.value=(new Date).getDateBy("MM/dd/yyyy"),a.lastChild.childNodes[2].lastChild.value=b.ST,a.lastChild.childNodes[4].lastChild.value="00:30 Min",a.lastChild.lastChild.value="",a.firstChild.firstChild.lastChild=""},afterDelEvent:function(a){var b=ZCL_streamEve.evl(1,a.responseText),c=b.response.result.eKey;delete ZCL_streamEve.timeObj[c]},eventExpired:function(a,b){var c=a<b?!0:!1;return c},setTimeIntrvl:function(a,b){var c=Object.keys(ZCL_streamEve.timeObj);if(c.indexOf(a.events.eventUID)==-1&&!b){var d=a.events.endDateTime?a.events.endDateTime:a.events.endDate,e=a.events.startDateTime?a.events.startDateTime:a.events.startDate,f=new Array;f[0]=parseInt(e),f[1]=parseInt(d),ZCL_streamEve.timeObj[a.events.eventUID]=f}ZCL_streamEve.curTimeGMT==""&&!ZCL_streamEve.isreq&&(ZCL_streamEve.isreq=!0,ZCL_streamEve.getCurrentSerTime()),ZCL_streamEve.timeIntVl==""&&(ZCL_streamEve.eventExpireIntvl=setInterval(ZCL_streamEve.checkEventExpire,ZCL_streamEve.chckEventExpDur))},getCurrentSerTime:function(){var a="/cal/stream/api/private/json/getcurtime?";ZCL_XHR(a,"ZCL_streamEve.aftergetcurtime")},aftergetcurtime:function(a){var b=ZCL_streamEve.evl(1,a.responseText);ZCL_streamEve.curTimeGMT==""&&(ZCL_streamEve.curTimeGMT=b.response.result.CUR_TIME,ZCL_streamEve.timeIntVl=setInterval(ZCL_streamEve.incCurTime,ZCL_streamEve.timeIncDur))},incCurTime:function(){var a=ZCL_streamEve.curTimeGMT,b=new Date;b.setTime(ZCL_streamEve.curTimeGMT),b.setMinutes(b.getMinutes()+2),ZCL_streamEve.curTimeGMT=b.getTime()},clearTimeIntrvl:function(){ZCL_streamEve.curTimeGMT="",ZCL_streamEve.timeObj={},clearInterval(ZCL_streamEve.eventExpireIntvl),clearInterval(ZCL_streamEve.timeIntVl),ZCL_streamEve.eventExpireIntvl="",ZCL_streamEve.timeIntVl="",ZCL_streamEve.isreq=!1},streamEveNotificationPreview:function(a,b){var c=ZCL_streamEve.evl(1,a.summary[0]),d="eKey="+c.eKey+"&cKey="+c.cKey;ZCL_streamEve.remUserID=c.userZUID,ZCL_streamEve.parentDOM=b,ZCL_streamEve.remStTime=c.st,ZCL_XHR("/cal/stream/api/private/json/eventDetails?"+d,"ZCL_streamEve.constStrmEvePreview")},constStrmEvePreview:function(a){var b=ZCL_streamEve.evl(1,a.responseText),c=b.response.result.events.event,d=b.response.result.events.curTime,e=!1,f=c.ISRECUR,g=c.SD,h=c.ST,i=g.substring(0,4),j=g.substring(6,8),k=h.substring(0,2),l=h.substring(3,5),m=h.substring(6,8),n=parseInt(g.substring(4,6));n-=1;var o=new Date,p=new Date(c.STMILLIS);if(c.ETMILLIS<d&&f==0)e=!0;else if(f==1){A=c.REPEAT;if(A.UNTIL!=undefined){var q=A.UNTIL;q<d?e=!0:e=!1}else e=!1;var r=ZCL_streamEve.remStTime;p=new Date(r)}else e=!0;var s=c.ED,t=c.ET,u=s.substring(0,4),v=s.substring(6,8),w=t.substring(0,2),x=t.substring(3,5),y=parseInt(s.substring(4,6)),z=c.ALLDAY,A={};y-=1;var B=new Date(u,y,v);B.setHours(w),B.setMinutes(x);var C={1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday",0:"Sunday"},D={0:"JAN",1:"FEB",2:"MAR",3:"APR",4:"MAY",5:"JUN",6:"JUL",7:"AUG",8:"SEP",9:"OCT",10:"NOV",11:"DEC"},E=C[p.getDay()+""],F='<div class="SCS_post"><div class="SCS_postWra">';F+='<div class="postMsg">',e?F+='<span class="zmsEventExpired"><h3>'+c.SUM+"</h3></span>":F+="<span><h3>"+c.SUM+"</h3></span>",F+='<div class="zmsEventPost"><div class="zmsEventWra">',F+='<div class="zmsEventCal zmEventInfo zmEvExp">',F+="<span>"+D[p.getMonth()+""]+"</span><span>"+p.getDate()+"</span>";var G=c.ATTENDEE_DETAILS.length;e&&G>0&&(F+='<div class="zmEventTag">',F+="<span>Expired</span>",F+="</div>"),F+="</div>",F+='<div class="zmsEventDtl"><div><i class="msi-clock"></i>\t<strong>',z=="0"?F+=E+"&nbsp;&nbsp;at&nbsp;&nbsp;"+k+"&nbsp;:&nbsp;"+l+"&nbsp;&nbsp;"+m+"</strong>":F+=E+"</strong>",p.getFullYear()==o.getFullYear()&&p.getMonth()==o.getMonth()&&p.getDate()==o.getDate()&&(F+='<div class="greyText">Today</div>');var H=new Date(o.getFullYear(),o.getMonth(),o.getDate()+1);H.getFullYear()==p.getFullYear()&&H.getMonth()==p.getMonth()&&H.getDate()==p.getDate()&&(F+='<div class="greyText">Tomorrow</div>');var I=new Date(o.getFullYear(),o.getMonth(),o.getDate()+2);I.getFullYear()==p.getFullYear()&&I.getMonth()==p.getMonth()&&I.getDate()==p.getDate()&&(F+='<div class="greyText">2 Days from now</div>');var J=new Date(o.getFullYear(),o.getMonth(),o.getDate()+3);J.getFullYear()==p.getFullYear()&&J.getMonth()==p.getMonth()&&J.getDate()==p.getDate()&&(F+='<div class="greyText">3 Days from now</div>'),F+="</div>",c.LOC!=""&&(F+='<div><i class="msi-location"></i>'+c.LOC+"</div>");var K=0,L=0,M=0,N=0,O=c.ATTENDEE_DETAILS.length,P=c.CKEY,Q=!1,R=0;for(var S=0;S<O;S++){var T=c.ATTENDEE_DETAILS[S],U=parseInt(T.STATUS);N=U==0?N+1:N,K=U==1?K+1:K,L=U==2?L+1:L,M=U==3?M+1:M;var V=T.ZUID!=undefined?T.ZUID:T.zuid;V==ZCL_streamEve.remUserID&&(Q=!0,R=U)}if(c.ATTENDEE_DETAILS.length>0){F+='<div class="zmsEventAction"> Are you attending ?',F+=e?'<ul eveid="'+c.EUID+'" class="zmsEventExpired">':'<ul eveid="'+c.EUID+'" class="zmsEvent">';var W=e?"":"ZCL_streamEve.updateAttStatusFrmNotification(this,'"+P+"')";R==0?F+='<li onclick="'+W+'">Yes</li><li onclick="'+W+'">No</li><li onclick="'+W+'">Maybe</li>':R==1?F+='<li class="sel">Yes</li><li onclick="'+W+'">No</li><li onclick="'+W+'">Maybe</li>':R==2?F+='<li onclick="'+W+'">Yes</li><li class="sel">No</li><li onclick="'+W+'">Maybe</li>':R==3&&(F+='<li onclick="'+W+'">Yes</li><li onclick="'+W+'">No</li><li class="sel">Maybe</li>'),F+="</ul></div>",F+="</div>",F+="</div>",F+='<div class="zmsEventAtt">',F+='<div><span class="SC_thm">&nbsp;&nbsp;'+G+"&nbsp;&nbsp;</span>Invited</div>",F+="<div>",F+='<span class="SC_thm">'+K+'</span> Yes<span class="SC_SDot"></span>',F+='<span class="SC_thm">'+L+'</span> No<span class="SC_SDot"></span>',F+='<span class="SC_thm">'+M+'</span> Maybe<span class="SC_SDot"></span>',F+="</div></div>"}F+="</div></div></div></div>";var X=ZCL_streamEve.parentDOM;X.innerHTML=F},getEventElem:function(a){var b=a.events.endDateTime?a.events.endDateTime:a.events.endDate,c=!1;ZCL_streamEve.curTimeGMT!=""?c=ZCL_streamEve.eventExpired(b,ZCL_streamEve.curTimeGMT):c=ZCL_streamEve.eventExpired(b,a.events.currTimeGMT),ZCL_streamEve.setTimeIntrvl(a,c);var d=zmCont.isGroup(a.gnrl.group.id),e=a.events.attendees?a.events.attendees.length:0,f=-1;if(d){var g=zmCont.getGroup(a.gnrl.group.id);f=parseInt(a.act.invitees)+parseInt(g.members.length),f=f>1?f-1:f}else f=parseInt(a.act.invitees);var h=ZCL_streamEve.consDateTime(a),i="<h3>"+a.cntnt.title+"</h3>";if(c)var j='<div class="zmsEventPost zmsEventExpired">';else var j='<div class="zmsEventPost">';j+='<div class="zmsEventWra">',c&&e>0?(j+='<div class="zmsEventCal zmEventInfo zmEvExp" expTagEId = "'+a.events.eventUID+'">',j+="<span>"+h.MOY+"</span><span>"+h.DOM+'</span><div class="zmEventTag"><span>Expired</span></div></div>'):(j+='<div class="zmsEventCal zmEventInfo" expTagEId = "'+a.events.eventUID+'">',j+="<span>"+h.MOY+"</span><span>"+h.DOM+'</span><div class="zmEventTag"><span></span></div></div>'),j+='<div class="zmsEventDtl" id="zcl_eveDtl_'+a.events.eventUID+'" ><div>',j+='<i class="msi-clock"></i>',j+="<strong>"+h.DOW+" at "+h.STH+":"+h.STM+" "+h.STA+"</strong>",j+=a.events.timezone&&a.events.timezone!=""?'<span class="SC_SDot"></span><strong>&nbsp;'+a.events.timezone+'</strong><span class="SC_SDot"></span>':"",j+=h.dayTxt!=undefined?'<div class="greyText" id="zcl_dayTxt"  >'+h.dayTxt+"</div>":"",j+="</div>";var k=a.events.location!=""?'<div><i class="msi-location"></i>'+a.events.location+"</div>":"";j+=k;var l=0,m=0,n=0,o=0;if(a.events.attendees){var p=a.events.attendees;e=p.length;for(var q=0;q<p.length;q++){var r=p[q];l=r.STS=="Yes"?l+1:l,m=r.STS=="No"?m+1:m,n=r.STS=="Maybe"?n+1:n,o=r.STS=="Pending"?o+1:o}for(var s in a.events.attendees)a.events.attendees[s].ATT_ZUID==zmail.zuid&&e>0&&(c?j+='<div class="zmsEventAction"> Are you attending ? <ul eveid="'+a.events.eventUID+'" class="zmsEventExpired">':j+='<div class="zmsEventAction"> Are you attending ? <ul eveid="'+a.events.eventUID+'" >',j+=ZCL_streamEve.setEventStatus(a.events.status,a.events.calUID,a.gnrl.owner,c),j+="</ul></div>");j+="</div></div>";if(e>0){var t="ZCL_streamEve.getAllAttendee(this,'"+a.events.calUID+"','"+a.events.eventUID+"')";j+='<div class="zmsEventAtt" zclAttAllEId="'+a.events.eventUID+'" >',j+='<div id="zms_zcl_invAll" onclick = '+t+'><span><span class="SC_thm" >'+e+"</span> Invited</span></div>",j+='<div zclAttByStsEId="'+a.events.eventUID+'" >',l>0?j+=a.events.status==1?'<span id="acceptList" onclick='+t+' ><span class="SC_thm" cuSts=true id="zcl_sts_1" >'+l+'</span>&nbsp;&nbsp;Yes</span><span class="SC_SDot"></span>':'<span id="acceptList"  onclick = '+t+'><span class="SC_thm" cuSts=false id="zcl_sts_1" >'+l+'</span>&nbsp;&nbsp;Yes</span><span class="SC_SDot"></span>':"",m>0?j+=a.events.status==2?'<span id="declinedList" onclick = '+t+'><span class="SC_thm" cuSts=true  id="zcl_sts_2">'+m+'</span>&nbsp;&nbsp;No</span><span class="SC_SDot"></span>':'<span id="declinedList" onclick = '+t+'><span class="SC_thm" cuSts=false id="zcl_sts_2">'+m+'</span>&nbsp;&nbsp;No</span><span class="SC_SDot"></span>':"",n>0?j+=a.events.status==3?'<span id="maybeList" onclick = '+t+'><span class="SC_thm" cuSts=true id="zcl_sts_3" >'+n+'</span>&nbsp;&nbsp;Maybe</span><span class="SC_SDot"></span>':'<span id="maybeList" onclick = '+t+'><span class="SC_thm" cuSts=false id="zcl_sts_3" >'+n+'</span>&nbsp;&nbsp;Maybe</span><span class="SC_SDot"></span>':"",o>0?j+=a.events.status==0?'<span id="pendingList" onclick = '+t+'><span class="SC_thm" cuSts=true id="zcl_sts_0">'+o+"</span>&nbsp;&nbsp;pending</span>":'<span id="pendingList" onclick = '+t+'><span class="SC_thm" cuSts=false id="zcl_sts_0">'+o+"</span>&nbsp;&nbsp;Pending</span>":"",j+="</div>",j+="</div>"}}j+="</div>",j+="</div>";var u=document.createDocumentFragment(),v=document.createElement("span");c&&(v.className="zmsEventExpired"),v.innerHTML=i,u.appendChild(v);var w=document.createElement("div");return w.className="Sevent_list",w.innerHTML=j,u.appendChild(w),u},clSrchAtt:function(){var a=ZCL_$("zmsSrchAttList");a.innerHTML="",a.style.display="block",ZCL_$("SC_PUcen_ZCL_AttList").childNodes[0].childNodes.length>0?(ZCL_$("SC_PUcen_ZCL_Srch").style.display="none",ZCL_$("zcl_msgcontent").style.display="none",ZCL_$("SC_PUcen_ZCL_AttList").style.display="block"):(ZCL_$("SC_PUcen_ZCL_Srch").style.display="block",ZCL_$("zcl_msgcontent").innerHTML="No entries yet",ZCL_$("zcl_msgcontent").style.display="block",ZCL_$("SC_PUcen_ZCL_AttList").style.display="none")},showAttMsg:function(a){ZCL_$("SC_PUcen_ZCL_AttList")!=undefined&&(ZCL_$("SC_PUcen_ZCL_AttList").style.display="none");var b=ZCL_$("zcl_msgcontent"),c=ZCL_$("zmsSrchAttList");c!=undefined&&(c.style.display="none"),ZCL_$("SC_PUcen_ZCL_Srch").style.display="block",b.style.display="block",b.innerHTML=a},searchAtt:function(a,b){var c=a.value.trim(),d=ZCL_$("zcl_attStsTab"),e=d.getAttribute("cTab"),f="",g="";e=="zcl_all"?g="":e=="zcl_yes"?g="msi-like":e=="zcl_no"?g="msi-no":e=="zcl_myb"?g="msi-maybe":e=="zcl_pending"&&(g="msi-pending");if(b.type=="keydown"&&b.keyCode==9&&c=="")return ZCL_streamEve.clSrchAtt(),0;b.type=="blur"&&(b.target.parentNode.className="SC_sch"),b.type=="focus"&&(b.target.parentNode.className="SC_sch inputFocus"),b.keyCode==8&&ZCL_streamEve.clSrchAtt();if(c=="")return ZCL_streamEve.clSrchAtt(),0;if(c!=""){if(b.keyCode==27)return ZCL_streamEve.clSrchAtt(),a.value="",0;var h=a.value.charAt(0),i=ZCL_streamEve.curAttendeeList.emlList,j="",k="No matches for this search. Try again",l=ZCL_$("SC_PUcen_ZCL_Srch");if(i[h]!=undefined){var m=i[h];if(m.length>0){var n=0,o=ZCL_$("zmsSrchAttList");o.innerHTML="";for(var p=0;p<m.length;p++){var q=m[p].email,r=m[p];if(q.startsWith(c)&&(g==m[p].stsclass||g=="")){n++;var s=_zm.getDOM(["LI",{child:[["DIV",{attrs:{"class":"SC_avtr"},child:[["IMG",{attrs:{src:r.photo}}]]}],["text","&nbsp;&nbsp;"+r.email],["SPAN",{child:[["i",{attrs:{"class":r.stsclass}}]]}]]}]);o.appendChild(s)}}return o.childNodes.length>0?(ZCL_$("SC_PUcen_ZCL_AttList").style.display="none",n>8&&(l.style.height="400px"),l.appendChild(o),l.style.display="block",0):(ZCL_streamEve.showAttMsg(k),0)}return ZCL_streamEve.showAttMsg(k),0}return ZCL_streamEve.showAttMsg(k),0}return 0},addEml:function(a){var b=a.email,c=b.charAt(0),d=ZCL_streamEve.curAttendeeList.emlList;if(d[c]!=undefined){var e=d[c];e.length>0?e[e.length]=a:(e=new Array,e[0]=a),d[c]=e}else{var e=new Array;e[0]=a,d[c]=e}},getAttendeesHtml:function(a,b,c,d){var e="",f=$("<div class='SC_PUcen' id='SC_PUcen_ZCL_AttList'>"),g=0,h=$("<ul class='zmsEventList' id='zmsattList'>"),i=new Array;ZCL_streamEve.curAttendeeList.acceptList=new Array,ZCL_streamEve.curAttendeeList.declinedList=new Array,ZCL_streamEve.curAttendeeList.maybeList=new Array,ZCL_streamEve.curAttendeeList.pendingList=new Array,ZCL_streamEve.curAttendeeList.all=new Array,ZCL_streamEve.curAttendeeList.emlList={};for(var j in b){var k=b[j].STS,l=b[j].ATT_ZUID+"",m="";b[j].photo=l!="undefined"?a[l].photo:zmail.defaultPhoto,b[j].email=b[j].AID,k=="Yes"?(m="msi-like",b[j].stsclass=m,ZCL_streamEve.curAttendeeList.acceptList[ZCL_streamEve.curAttendeeList.acceptList.length]=b[j]):k=="No"?(m="msi-unlike",b[j].stsclass=m,ZCL_streamEve.curAttendeeList.declinedList[ZCL_streamEve.curAttendeeList.declinedList.length]=b[j]):k=="Maybe"?(m="msi-maybe",b[j].stsclass=m,ZCL_streamEve.curAttendeeList.maybeList[ZCL_streamEve.curAttendeeList.maybeList.length]=b[j]):k=="Pending"&&(m="msi-pending",b[j].stsclass=m,ZCL_streamEve.curAttendeeList.pendingList[ZCL_streamEve.curAttendeeList.pendingList.length]=b[j]),ZCL_streamEve.addEml(b[j]),ZCL_streamEve.curAttendeeList.all[ZCL_streamEve.curAttendeeList.all.length]=b[j]}var n=c=="zms_zcl_invAll"?b:ZCL_streamEve.curAttendeeList[c],o=ZCL_$("zms_attView").childNodes[0].childNodes[1];ZCL_$("zcl_attSearch").value="",c=="acceptList"?(b=ZCL_streamEve.curAttendeeList.acceptList,m="msi-like",o.setAttribute("cTab","zcl_yes")):c=="declinedList"?(b=ZCL_streamEve.curAttendeeList.declinedList,m="msi-unlike",o.setAttribute("cTab","zcl_no")):c=="maybeList"?(b=ZCL_streamEve.curAttendeeList.maybeList,m="msi-maybe",o.setAttribute("cTab","zcl_myb")):c=="pendingList"?(b=ZCL_streamEve.curAttendeeList.pendingList,m="msi-pending",o.setAttribute("cTab","zcl_pending")):c=="zms_zcl_invAll"&&(b=ZCL_streamEve.curAttendeeList.all,m="all",o.setAttribute("cTab","zcl_all"));for(var p in n){var m=n[p].stsclass,l=n[p].ATT_ZUID+"",q=n[p].ATT_ZUID!=undefined&&a[l].eid!=""?a[l].eid:n[p].email,r=n[p].ATT_ZUID!=undefined?a[l].photo:zmail.defaultPhoto,s=_zm.getDOM(["LI",{child:[["DIV",{attrs:{"class":"SC_avtr"},child:[["IMG",{attrs:{src:r}}]]}],["text","&nbsp;&nbsp;"+q],["SPAN",{child:[["i",{attrs:{"class":m}}]]}]]}]);h.append(s),g++,delete a[l]}f.append(h),d.append(f);var t=document.createElement("div");t.id="SC_PUcen_ZCL_Srch",t.setAttribute("class","SC_PUcen");var u=document.createElement("div");u.id="zcl_msgcontent",u.setAttribute("class","SC_nmsg"),u.style.display="none";var v="No matches for this search. Try again";u.innerHTML=v;var w=document.createElement("ul");w.id="zmsSrchAttList",w.setAttribute("class","zmsEventList"),t.appendChild(u),t.appendChild(w),t.setAttribute("display","none"),d.append(t);if(g>8)f.height(400);else if(g==0){var x="No entries yet";ZCL_streamEve.showAttMsg(x)}return f},afterGetAllAttn:function(a){var b=ZCL_streamEve.evl(1,a.responseText),c=b.response.result,d=c.response,e=ZCL_streamEve.allAttnElem,f=e.getAttribute("attrgrpid"),g=e.id,h=zmCont.isGroup(f),i="",j=0,k=0,l=0,m=0,n=0,o="";for(var p in d)i==""?i=d[p].ATT_ZUID+"":i+=","+d[p].ATT_ZUID+"",k=d[p].STS=="Yes"?k+1:k,l=d[p].STS=="No"?l+1:l,m=d[p].STS=="Maybe"?m+1:m,n=d[p].STS=="Pending"?n+1:n,j++;for(var q in d)o==""?o=d[q].AID+"":o+=","+d[q].AID+"";ZCL_streamEve.isAttReqInvoked=!0;if(j>0){var r;ZCL_$("zms_attView")?$("#zms_attView").innerHTML="":$("body").append("<div id='zms_attView' class='SU_PU'/>"),r=$("#zms_attView");var s=[];for(var t in d)d[t].hasOwnProperty("ATT_ZUID")&&s.push(d[t].ATT_ZUID.toString());var u,v={promise:!0,zuid:s},w=zmail.ContactBook.get(v);w.done(function(a){u=a});var x={};for(var q in u){var y=u[q].attrs.zid;x[y]=u[q].attrs}var z=$("<div class='SC_PUtt'>"),A="",A="<div class='SC_sch'><i class='msi-search'></i><input id='zcl_attSearch' onfocus=ZCL_streamEve.searchAtt(this,event)  onkeyup=ZCL_streamEve.searchAtt(this,event) onblur = ZCL_streamEve.searchAtt(this,event) type='text' placeholder='Search Guest'  style='width:380px;'></div>";A+="<ul class='SCS_tab' id='zcl_attStsTab' cTab='zcl_all' >",A+=g=="zms_zcl_invAll"?"<li class='stSel' onclick=ZCL_streamEve.showList('all',this) id='zcl_selall' >Invited(&nbsp;"+j+"&nbsp;)</li>":"<li onclick=ZCL_streamEve.showList('all',this) id='zcl_selall' >Invited(&nbsp;"+j+"&nbsp;)</li>",A+=k==0?"":g=="acceptList"?"<li onclick=ZCL_streamEve.showList('yes',this) class='stSel' id='zcl_selyes'>Yes(&nbsp;"+k+"&nbsp;)</li>":"<li onclick=ZCL_streamEve.showList('yes',this) id='zcl_selyes'>Yes(&nbsp;"+k+"&nbsp;)</li>",A+=l==0?"":g=="declinedList"?"<li onclick=ZCL_streamEve.showList('no',this) class='stSel' id='zcl_selno'>No(&nbsp;"+l+"&nbsp;)</li>":"<li onclick=ZCL_streamEve.showList('no',this) id='zcl_selno'>No(&nbsp;"+l+"&nbsp;)</li>",A+=m==0?"":g=="maybeList"?"<li onclick=ZCL_streamEve.showList('maybe',this) class='stSel' id='zcl_selmyb'>Maybe(&nbsp;"+m+"&nbsp;)</li> ":"<li onclick=ZCL_streamEve.showList('maybe',this) id='zcl_selmyb'>Maybe(&nbsp;"+m+"&nbsp;)</li> ",A+=n==0?"":g=="pendingList"?"<li onclick=ZCL_streamEve.showList('pending',this) class='stSel' id='zcl_selpnd'>Pending(&nbsp;"+n+"&nbsp;)</li>":"<li onclick=ZCL_streamEve.showList('pending',this) id='zcl_selpnd'>Pending(&nbsp;"+n+"&nbsp;)</li>",A+="</ul>",z.append(A),r.append(z),ZCL_streamEve.getAttendeesHtml(x,d,g,r);var B={title:"",$content:r,defaultCloseIcon:!0,closeAction:function(){ZCL_streamEve.cleanStrmCalInfo()}},C=Dialog.new({title:"Invitees",$content:r,defaultCloseIcon:!0,closeAction:function(){ZCL_streamEve.cleanStrmCalInfo()}})}},cleanStrmCalInfo:function(){ZCL_streamEve.curAttendeeList={}},constrctAttList:function(a){var b=0,c=$("<ul class='zmsEventList'  id='zmsattList'>"),d=new Array;for(var e in a){var f=a[e].STS,g=a[e].ATT_ZUID+"",h=a[e].stsclass,i=_zm.getDOM(["LI",{child:[["DIV",{attrs:{"class":"SC_avtr"},child:[["IMG",{attrs:{src:a[e].photo}}]]}],["text","&nbsp;&nbsp;"+a[e].email],["SPAN",{child:[["i",{attrs:{"class":h}}]]}]]}]);c.append(i)}return c},showList:function(a,b){var c;ZCL_streamEve.clSrchAtt(),ZCL_$("SC_PUcen_ZCL_Srch").style.display="none",ZCL_$("SC_PUcen_ZCL_AttList").style.display="block";var d=ZCL_$("zms_attView").childNodes[0].childNodes[1];ZCL_$("zcl_attSearch").value="",a=="yes"?(c=ZCL_streamEve.curAttendeeList.acceptList,attStsCls="msi-like",d.setAttribute("cTab","zcl_yes")):a=="no"?(c=ZCL_streamEve.curAttendeeList.declinedList,attStsCls="msi-unlike",d.setAttribute("cTab","zcl_no")):a=="maybe"?(c=ZCL_streamEve.curAttendeeList.maybeList,attStsCls="msi-maybe",d.setAttribute("cTab","zcl_myb")):a=="pending"?(c=ZCL_streamEve.curAttendeeList.pendingList,attStsCls="msi-pending",d.setAttribute("cTab","zcl_pending")):a=="all"&&(c=ZCL_streamEve.curAttendeeList.all,attStsCls="all",d.setAttribute("cTab","zcl_all"));var e="";for(var f in c)e==""?e=c[f].ATT_ZUID+"":e+=","+c[f].ATT_ZUID+"";var g=zmCont.getOrgContacts(e),h=ZCL_$("zms_attView").childNodes[0].childNodes[1].getElementsByTagName("li");for(var i=0;i<h.length;i++){var j=h[i];j.id!=b.id?j.className="":j.className="stSel"}var k=ZCL_$("zms_attView").childNodes[1];k.innerHTML="";var l=ZCL_streamEve.constrctAttList(c,g),m=$("#SC_PUcen_ZCL_AttList"),n=c.length;if(n>8)m.height(400);else if(n==0){var o="No entries yet";ZCL_streamEve.showAttMsg(o)}m.append(l)},afterUpdateAttn:function(a){var b=ZCL_streamEve.evl(1,a.responseText),c=b.response.result,d=c.status,e=c.message,f=c.eventstatus,g=1;if(d=="1"){var h=document.querySelectorAll('[eveid="'+c.eventKey+'"]');for(var i=0;i<h.length;i++){var j=h[i].getAttribute("eveid");if(c.eventKey==j){var k=h[i].childNodes;for(var l=0;l<k.length;l++)g==c.eventstatus?k[l].className="sel":k[l].removeAttribute("class"),g++}}var m=document.querySelectorAll('[zclAttByStsEId="'+c.eventKey+'"');for(var n=0;n<m.length;n++){var o=m[n].childNodes;for(var p=0;p<o.length;p++)if(o[p].childNodes.length>0){var q=o[p].childNodes[0],r=q.getAttribute("custs");r=="false"&&q.id=="zcl_sts_"+f?(q.innerHTML=parseInt(q.innerHTML)+1,q.setAttribute("custs",!0)):parseInt(q.innerHTML)!=0&&q.getAttribute("custs")=="true"&&(q.innerHTML=parseInt(q.innerHTML)-1,q.setAttribute("custs",!1))}}zmUtil.succErrMsg("s",e)}else if(e.indexOf("Event is expired")!=-1){var h=document.querySelectorAll('[eveid="'+c.eventKey+'"]');for(var i=0;i<h.length;i++){var j=h[i].getAttribute("eveid");h[i].className="eventExpired";if(c.eventKey==j){var k=h[i].childNodes;for(var l=0;l<k.length;l++)k[l].removeAttribute("onclick")}}zmUtil.succErrMsg("e",e)}else zmUtil.succErrMsg("e",e)},setEventStatus:function(a,b,c,d){var e="",f="sel",g=d?"":"ZCL_streamEve.updateAttendeeStatus(this,'"+b+"')";return e+=a=="-1"&&c||a=="1"?'<li class="'+f+'" onclick="'+g+'">Yes</li>':'<li onclick="'+g+'">Yes</li>',e+=a=="2"?'<li class="'+f+'" onclick="'+g+'">No</li>':'<li onclick="'+g+'">No</li>',e+=a=="3"?'<li class="'+f+'" onclick="'+g+'">Maybe</li>':'<li onclick="'+g+'">Maybe</li>',e},get_whole_values:function(a,b){time_data=[a];for(i=0;i<b.length;i++)time_data.push(parseInt(time_data[i]/b[i])),time_data[i]=time_data[i]%b[i];return time_data},millisToTime:function(a){var b=parseInt(a/1e3%60),c=parseInt(a/6e4%60),d=parseInt(a/36e5%24),e=parseInt(a/864e5),f=parseInt(e*24);return d+=f,d=d<10?"0"+d:d,c=c<10?"0"+c:c,b=b<10?"0"+b:b,d+":"+c+":"+b},checkEventExpire:function(){var a=Object.keys(ZCL_streamEve.timeObj);for(var b=0;b<a.length;b++){var c=a[b],d=document.querySelectorAll('[eveid="'+c+'"]');if(d.length>0){var e=ZCL_streamEve.timeObj[c];if(e[1]<ZCL_streamEve.curTimeGMT){var d=document.querySelectorAll('[eveid="'+c+'"]'),f=!1;for(var g=0;g<d.length;g++){var h=d[g].getAttribute("eveid");d[g].className="zmsEventExpired";if(c==h){var i=d[g].childNodes;for(var j=0;j<i.length;j++)i[j].removeAttribute("onclick"),f=!0}delete ZCL_streamEve.timeObj[c]}if(f){var k=document.querySelectorAll('[expTagEId="'+c+'"]');k[0].className="zmsEventCal zmEventInfo zmEvExp",k[0].childNodes[2].childNodes[0].innerHTML="Expired"}var l=new Date(e[0]),m=new Date(e[1]),n=ZCL_streamEve.getCurrDateDispStr(l,m,ZCL_streamEve.curTimeGMT),o=document.getElementById("zcl_eveDtl_"+c);o.childNodes[0].childNodes[5].innerHTML=n}else{var l=new Date(e[0]),m=new Date(e[1]),n=ZCL_streamEve.getCurrDateDispStr(l,m,ZCL_streamEve.curTimeGMT),o=document.getElementById("zcl_eveDtl_"+c);o.childNodes[0].childNodes[5].innerHTML=n}}else delete ZCL_streamEve.timeObj[c]}var a=Object.keys(ZCL_streamEve.timeObj);a.length==0&&ZCL_streamEve.clearTimeIntrvl()},consDateTime:function(a){var b="",c="",d=/((19|20)[0-9][0-9])(0[1-9]|1[0-2])(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/,e={1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday",0:"Sunday"},f={0:"JAN",1:"FEB",2:"MAR",3:"APR",4:"MAY",5:"JUN",6:"JUL",7:"AUG",8:"SEP",9:"OCT",10:"NOV",11:"DEC"},g="",h="",i="",j=new Date,k=new Date;if(d.test(a.events.startDate)&&d.test(a.events.endDate)||d.test(a.events.startDateTime)&&d.test(a.events.endDateTime)){var l=d.test(a.events.startDateTime)?a.events.startDateTime:a.events.startDate,c=d.test(a.events.endDateTime)?a.events.endDateTime:a.events.endDate,m=l.substring(0,4),n=l.substring(6,8),o=l.substring(4,6);b=n+"/"+o+"/"+m;var p=c.substring(0,4),q=c.substring(6,8),r=c.substring(4,6);c=q+"/"+r+"/"+p;var s=new Date;s.setTime(l),j=new Date(m,o-1,n),k=new Date(p,r-1,q)}else{var l=a.events.startDateTime?a.events.startDateTime:a.events.startDate,c=a.events.endDateTime?a.events.endDateTime:a.events.endDate,s=new Date;s.setTime(l);var n=s.getDate(),o=s.getMonth()+1,m=s.getFullYear();n=n<10?"0"+n:n,o=o<10?"0"+o:o,b=n+"/"+o+"/"+m;var t=new Date;t.setTime(c);var q=t.getDate(),r=t.getMonth()+1,p=t.getFullYear();q=q<10?"0"+q:q,r=r<10?"0"+r:r,c=q+"/"+r+"/"+p,j=new Date(m,o-1,n),k=new Date(p,r-1,q)}var u=ZCL_streamEve.correctTimeFormat(a.events.startTime),v=ZCL_streamEve.correctTimeFormat(a.events.endTime),w=ZCL_streamEve.parseTime(u),x=ZCL_streamEve.parseTime(v),y=w.hh+":"+w.mm+" "+w.a,z=x.hh+":"+x.mm+" "+x.a,A="",B="";j.setHours(w.HH),j.setMinutes(w.mm),g=e[j.getDay()+""],h=f[j.getMonth()+""],i=j.getDate(),k.setHours(x.HH),k.setMinutes(x.mm),b!=c&&!a.events.allDay?(A=b+"&nbsp;to&nbsp;"+c,B=y+"&nbsp;to&nbsp;"+z):b==c&&!a.events.allDay?(A=b,B=y+"&nbsp;to&nbsp;"+z):b!=c&&a.events.allDay?A=b+"&nbsp;to&nbsp;"+c:b==c&&a.events.allDay&&(A=b);var C=new Array;C.DATE=A,C.TIME=B,C.DOW=g,C.MOY=h,C.DOM=i,C.STH=w.hh,C.STM=w.mm,C.STA=w.a;var D=new Date;if(j.getFullYear()==D.getFullYear()&&j.getMonth()==D.getMonth()&&j.getDate()==D.getDate()){var E=ZCL_streamEve.curTimeGMT!=""?ZCL_streamEve.curTimeGMT:a.events.currTimeGMT;C.dayTxt=ZCL_streamEve.getCurrDateDispStr(j,k,E)}var F=new Date(D.getFullYear(),D.getMonth(),D.getDate()+1);F.getFullYear()==j.getFullYear()&&F.getMonth()==j.getMonth()&&F.getDate()==j.getDate()&&(C.dayTxt="Tomorrow");var G=new Date(D.getFullYear(),D.getMonth(),D.getDate()+2);G.getFullYear()==j.getFullYear()&&G.getMonth()==j.getMonth()&&G.getDate()==j.getDate()&&(C.dayTxt="2 Days from now");var H=new Date(D.getFullYear(),D.getMonth(),D.getDate()+3);return H.getFullYear()==j.getFullYear()&&H.getMonth()==j.getMonth()&&H.getDate()==j.getDate()&&(C.dayTxt="3 Days from now"),C},getCurrDateDispStr:function(a,b,c){var d=new Date(c),e="";if(d<=b&&d>=a){var f=ZCL_streamEve.millisToTime(d-a),g=f.split(":");e="Started before ",g[0]!="00"&&(e+=parseInt(g[0])+" hours");if(g[1]!="00"){var h=parseInt(g[1])+" minutes";e+=e!=""?" "+h:h}}else if(d.getDate()==a.getDate()&&d<=a){var i=ZCL_streamEve.millisToTime(a-d),j=a-d,k=i.split(":");e="Starts in ",k[0]!="00"&&(e+=parseInt(k[0])+" hours");if(k[1]!="00"){var h=parseInt(k[1])+" minutes";e+=e!=""?" "+h:h}}else if(d.getDate()==b.getDate()&&d>=b){var i=ZCL_streamEve.millisToTime(d-b),j=d-b,k=i.split(":"),l=b.getMinutes()==0?"":":"+b.getMinutes(),m=b.getHours()==0?12+l+" "+"am":b.getHours()==12?b.getHours()+" "+l+" "+"pm":b.getHours()>12?b.getHours()-12+" "+l+" "+"pm":b.getHours()+" "+l+" "+"am";e="Event ended at ",e+=e!=""?m:m}else e="Today";return e},Sm_ComposeEventBoxcon:function(a,b){var c=$(a),d=$('<div class="Sevent_update SC_e" id="ScEvent_'+b+'">');d.append('<div class="Sevent_data"><span id="scDate_span"><i class="msi-calendar"></i><input type="text" placeholder="Date" id = "SC_eventDate"></span><i class="msi-clock"></i><span style="border:none;" class="zcal_time zcal_nbr" id="scTime"><input type="text" placeholder="Time" id="SC_eventTime"></span><i class="msi-duration"></i><span class="zcal_time zcal_nbr" id="SCeventDur_span"><input onclick="ZCL_streamEve.setEventDurDropdwn(event,this)" type="text" value="00:30 Min" id="SC_eventDur" placeholder="Duration"></span><i class="msi-location"></i><input type="text" placeholder="Choose Location" id="SC_eventLoc"></div>'),c.find(".zmScContent").after(d),ZCL_streamEve.initDateTimePicker(d[0].firstChild.firstChild,d[0].firstChild.childNodes[2])},Sm_ComposeAddStreamEvent:function(a){ZCL_streamEve.dataObj=a;var b="";for(var c in a.attendees)b+=b==""?a.attendees[c]:","+a.attendees[c];var d=new Array,e=ZCL_$("SC_eventDate").value,f=ZCL_$("SC_eventTime").value,g=ZCL_$("SC_eventDur").value,h=ZCL_$("SC_eventLoc").value;d=ZCL_streamEve.calcEventTime(e,f,g);var i="sum="+encodeURIComponent(a.title)+"&sday="+d.ST_DATE+"&smonth="+d.ST_MONTH+"&syear="+d.ST_YEAR+"&shour="+d.ST_HOUR+"&smin="+d.ST_MIN+"&eday="+d.END_DATE+"&emonth="+d.END_MONTH+"&eyear="+d.END_YEAR+"&ehour="+d.END_HOUR+"&emin="+d.END_MIN+"&loc="+encodeURIComponent(h)+"&zgid="+a.groupId+"&att="+b+"&lckInv="+a.lckInv;if(a.inv_allMem!=undefined){var j=a.inv_allMem;i+="&inv_allMem="+j}ZCL_XHR("/cal/stream/api/private/json/addEvent?"+i,"ZCL_streamEve.afterSubEvent")},afterSubEvent:function(a){var b=ZCL_streamEve.evl(1,a.responseText),c=b.response.result;b.response.result.status=="success"?ZCL_streamEve.dataObj.onSuccess():(Errmsg=b.response.error=="err_nostreamadd"?"Problem in adding event":b.response.error.message?b.response.error.message:b.response.error,ZCL_streamEve.dataObj.onFailure(Errmsg))}};ZCL_dputDate=function(a){var b="MM/dd/yyyy",c=a.substring(6,8),d=a.substring(4,6),e=a.substring(0,4);return b.replace("dd",c).replace("MM",d).replace("yyyy",e)};var dataObj=[];